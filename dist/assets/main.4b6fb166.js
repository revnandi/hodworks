var hl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dl(n){if(n.__esModule)return n;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(s){var u=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(l,s,u.get?u:{enumerable:!0,get:function(){return n[s]}})}),l}function fl(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ea={exports:{}};(function(n){(function(l,s){var u=s(l,l.document,Date);l.lazySizes=u,n.exports&&(n.exports=u)})(typeof window!="undefined"?window:{},function(s,u,y){var d,S;if(function(){var Ce,fe={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};S=s.lazySizesConfig||s.lazysizesConfig||{};for(Ce in fe)Ce in S||(S[Ce]=fe[Ce])}(),!u||!u.getElementsByClassName)return{init:function(){},cfg:S,noSupport:!0};var M=u.documentElement,q=s.HTMLPictureElement,j="addEventListener",G="getAttribute",K=s[j].bind(s),$=s.setTimeout,L=s.requestAnimationFrame||$,ee=s.requestIdleCallback,H=/^picture$/i,te=["load","error","lazyincluded","_lazyloaded"],X={},J=Array.prototype.forEach,re=function(Ce,fe){return X[fe]||(X[fe]=new RegExp("(\\s|^)"+fe+"(\\s|$)")),X[fe].test(Ce[G]("class")||"")&&X[fe]},ge=function(Ce,fe){re(Ce,fe)||Ce.setAttribute("class",(Ce[G]("class")||"").trim()+" "+fe)},Le=function(Ce,fe){var ae;(ae=re(Ce,fe))&&Ce.setAttribute("class",(Ce[G]("class")||"").replace(ae," "))},ce=function(Ce,fe,ae){var Ee=ae?j:"removeEventListener";ae&&ce(Ce,fe),te.forEach(function(oe){Ce[Ee](oe,fe)})},_e=function(Ce,fe,ae,Ee,oe){var we=u.createEvent("Event");return ae||(ae={}),ae.instance=d,we.initEvent(fe,!Ee,!oe),we.detail=ae,Ce.dispatchEvent(we),we},ze=function(Ce,fe){var ae;!q&&(ae=s.picturefill||S.pf)?(fe&&fe.src&&!Ce[G]("srcset")&&Ce.setAttribute("srcset",fe.src),ae({reevaluate:!0,elements:[Ce]})):fe&&fe.src&&(Ce.src=fe.src)},xe=function(Ce,fe){return(getComputedStyle(Ce,null)||{})[fe]},Ne=function(Ce,fe,ae){for(ae=ae||Ce.offsetWidth;ae<S.minSize&&fe&&!Ce._lazysizesWidth;)ae=fe.offsetWidth,fe=fe.parentNode;return ae},me=function(){var Ce,fe,ae=[],Ee=[],oe=ae,we=function(){var Ae=oe;for(oe=ae.length?Ee:ae,Ce=!0,fe=!1;Ae.length;)Ae.shift()();Ce=!1},$e=function(Ae,Ue){Ce&&!Ue?Ae.apply(this,arguments):(oe.push(Ae),fe||(fe=!0,(u.hidden?$:L)(we)))};return $e._lsFlush=we,$e}(),ve=function(Ce,fe){return fe?function(){me(Ce)}:function(){var ae=this,Ee=arguments;me(function(){Ce.apply(ae,Ee)})}},Oe=function(Ce){var fe,ae=0,Ee=S.throttleDelay,oe=S.ricTimeout,we=function(){fe=!1,ae=y.now(),Ce()},$e=ee&&oe>49?function(){ee(we,{timeout:oe}),oe!==S.ricTimeout&&(oe=S.ricTimeout)}:ve(function(){$(we)},!0);return function(Ae){var Ue;(Ae=Ae===!0)&&(oe=33),!fe&&(fe=!0,Ue=Ee-(y.now()-ae),Ue<0&&(Ue=0),Ae||Ue<9?$e():$($e,Ue))}},he=function(Ce){var fe,ae,Ee=99,oe=function(){fe=null,Ce()},we=function(){var $e=y.now()-ae;$e<Ee?$(we,Ee-$e):(ee||oe)(oe)};return function(){ae=y.now(),fe||(fe=$(we,Ee))}},et=function(){var Ce,fe,ae,Ee,oe,we,$e,Ae,Ue,xt,Ot,at,ht=/^img$/i,ct=/^iframe$/i,Hi="onscroll"in s&&!/(gle|ing)bot/.test(navigator.userAgent),Me=0,rt=0,mt=0,Dt=-1,Ui=function(h){mt--,(!h||mt<0||!h.target)&&(mt=0)},qn=function(h){return at==null&&(at=xe(u.body,"visibility")=="hidden"),at||!(xe(h.parentNode,"visibility")=="hidden"&&xe(h,"visibility")=="hidden")},Pr=function(h,c){var f,g=h,v=qn(h);for(Ae-=c,Ot+=c,Ue-=c,xt+=c;v&&(g=g.offsetParent)&&g!=u.body&&g!=M;)v=(xe(g,"opacity")||1)>0,v&&xe(g,"overflow")!="visible"&&(f=g.getBoundingClientRect(),v=xt>f.left&&Ue<f.right&&Ot>f.top-1&&Ae<f.bottom+1);return v},gn=function(){var h,c,f,g,v,b,_,m,T,x,E,w,k=d.elements;if((Ee=S.loadMode)&&mt<8&&(h=k.length)){for(c=0,Dt++;c<h;c++)if(!(!k[c]||k[c]._lazyRace)){if(!Hi||d.prematureUnveil&&d.prematureUnveil(k[c])){i(k[c]);continue}if((!(m=k[c][G]("data-expand"))||!(b=m*1))&&(b=rt),x||(x=!S.expand||S.expand<1?M.clientHeight>500&&M.clientWidth>500?500:370:S.expand,d._defEx=x,E=x*S.expFactor,w=S.hFac,at=null,rt<E&&mt<1&&Dt>2&&Ee>2&&!u.hidden?(rt=E,Dt=0):Ee>1&&Dt>1&&mt<6?rt=x:rt=Me),T!==b&&(we=innerWidth+b*w,$e=innerHeight+b,_=b*-1,T=b),f=k[c].getBoundingClientRect(),(Ot=f.bottom)>=_&&(Ae=f.top)<=$e&&(xt=f.right)>=_*w&&(Ue=f.left)<=we&&(Ot||xt||Ue||Ae)&&(S.loadHidden||qn(k[c]))&&(fe&&mt<3&&!m&&(Ee<3||Dt<4)||Pr(k[c],b))){if(i(k[c]),v=!0,mt>9)break}else!v&&fe&&!g&&mt<4&&Dt<4&&Ee>2&&(Ce[0]||S.preloadAfterLoad)&&(Ce[0]||!m&&(Ot||xt||Ue||Ae||k[c][G](S.sizesAttr)!="auto"))&&(g=Ce[0]||k[c])}g&&!v&&i(g)}},tt=Oe(gn),ji=function(h){var c=h.target;if(c._lazyCache){delete c._lazyCache;return}Ui(h),ge(c,S.loadedClass),Le(c,S.loadingClass),ce(c,pn),_e(c,"lazyloaded")},ft=ve(ji),pn=function(h){ft({target:h.target})},Ye=function(h,c){var f=h.getAttribute("data-load-mode")||S.iframeLoadMode;f==0?h.contentWindow.location.replace(c):f==1&&(h.src=c)},e=function(h){var c,f=h[G](S.srcsetAttr);(c=S.customMedia[h[G]("data-media")||h[G]("media")])&&h.setAttribute("media",c),f&&h.setAttribute("srcset",f)},t=ve(function(h,c,f,g,v){var b,_,m,T,x,E;(x=_e(h,"lazybeforeunveil",c)).defaultPrevented||(g&&(f?ge(h,S.autosizesClass):h.setAttribute("sizes",g)),_=h[G](S.srcsetAttr),b=h[G](S.srcAttr),v&&(m=h.parentNode,T=m&&H.test(m.nodeName||"")),E=c.firesLoad||"src"in h&&(_||b||T),x={target:h},ge(h,S.loadingClass),E&&(clearTimeout(ae),ae=$(Ui,2500),ce(h,pn,!0)),T&&J.call(m.getElementsByTagName("source"),e),_?h.setAttribute("srcset",_):b&&!T&&(ct.test(h.nodeName)?Ye(h,b):h.src=b),v&&(_||T)&&ze(h,{src:b})),h._lazyRace&&delete h._lazyRace,Le(h,S.lazyClass),me(function(){var w=h.complete&&h.naturalWidth>1;(!E||w)&&(w&&ge(h,S.fastLoadedClass),ji(x),h._lazyCache=!0,$(function(){"_lazyCache"in h&&delete h._lazyCache},9)),h.loading=="lazy"&&mt--},!0)}),i=function(h){if(!h._lazyRace){var c,f=ht.test(h.nodeName),g=f&&(h[G](S.sizesAttr)||h[G]("sizes")),v=g=="auto";(v||!fe)&&f&&(h[G]("src")||h.srcset)&&!h.complete&&!re(h,S.errorClass)&&re(h,S.lazyClass)||(c=_e(h,"lazyunveilread").detail,v&&ne.updateElem(h,!0,h.offsetWidth),h._lazyRace=!0,mt++,t(h,c,v,g,f))}},r=he(function(){S.loadMode=3,tt()}),a=function(){S.loadMode==3&&(S.loadMode=2),r()},o=function(){if(!fe){if(y.now()-oe<999){$(o,999);return}fe=!0,S.loadMode=3,tt(),K("scroll",a,!0)}};return{_:function(){oe=y.now(),d.elements=u.getElementsByClassName(S.lazyClass),Ce=u.getElementsByClassName(S.lazyClass+" "+S.preloadClass),K("scroll",tt,!0),K("resize",tt,!0),K("pageshow",function(h){if(h.persisted){var c=u.querySelectorAll("."+S.loadingClass);c.length&&c.forEach&&L(function(){c.forEach(function(f){f.complete&&i(f)})})}}),s.MutationObserver?new MutationObserver(tt).observe(M,{childList:!0,subtree:!0,attributes:!0}):(M[j]("DOMNodeInserted",tt,!0),M[j]("DOMAttrModified",tt,!0),setInterval(tt,999)),K("hashchange",tt,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(h){u[j](h,tt,!0)}),/d$|^c/.test(u.readyState)?o():(K("load",o),u[j]("DOMContentLoaded",tt),$(o,2e4)),d.elements.length?(gn(),me._lsFlush()):tt()},checkElems:tt,unveil:i,_aLSL:a}}(),ne=function(){var Ce,fe=ve(function(we,$e,Ae,Ue){var xt,Ot,at;if(we._lazysizesWidth=Ue,Ue+="px",we.setAttribute("sizes",Ue),H.test($e.nodeName||""))for(xt=$e.getElementsByTagName("source"),Ot=0,at=xt.length;Ot<at;Ot++)xt[Ot].setAttribute("sizes",Ue);Ae.detail.dataAttr||ze(we,Ae.detail)}),ae=function(we,$e,Ae){var Ue,xt=we.parentNode;xt&&(Ae=Ne(we,xt,Ae),Ue=_e(we,"lazybeforesizes",{width:Ae,dataAttr:!!$e}),Ue.defaultPrevented||(Ae=Ue.detail.width,Ae&&Ae!==we._lazysizesWidth&&fe(we,xt,Ue,Ae)))},Ee=function(){var we,$e=Ce.length;if($e)for(we=0;we<$e;we++)ae(Ce[we])},oe=he(Ee);return{_:function(){Ce=u.getElementsByClassName(S.autosizesClass),K("resize",oe)},checkElems:oe,updateElem:ae}}(),Xe=function(){!Xe.i&&u.getElementsByClassName&&(Xe.i=!0,ne._(),et._())};return $(function(){S.init&&Xe()}),d={cfg:S,autoSizer:ne,loader:et,init:Xe,uP:ze,aC:ge,rC:Le,hC:re,fire:_e,gW:Ne,rAF:me},d})})(Ea);var gl={exports:{}};(function(n){(function(l,s){if(!!l){var u=function(){s(l.lazySizes),l.removeEventListener("lazyunveilread",u,!0)};s=s.bind(null,l,l.document),n.exports?s(Ea.exports):l.lazySizes?u():l.addEventListener("lazyunveilread",u,!0)}})(typeof window!="undefined"?window:0,function(l,s,u){var y;(function(){var $,L={blurUpClass:"ls-blur-up-img",blurUpLoadingClass:"ls-blur-up-is-loading",blurUpInviewClass:"ls-inview",blurUpLoadedClass:"ls-blur-up-loaded",blurUpLoadedOriginalClass:"ls-original-loaded"};y=u.cfg||{};for($ in L)$ in y||(y[$]=L[$])})();var d=[].slice,S=/blur-up["']*\s*:\s*["']*(always|auto)/,M=/image\/(jpeg|png|gif|svg\+xml)/,q="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",j=function($){var L=$.getAttribute("data-media")||$.getAttribute("media"),ee=$.getAttribute("type");return(!ee||M.test(ee))&&(!L||l.matchMedia(u.cfg.customMedia[L]||L).matches)},G=function($,L){var ee,H=$?d.call($.querySelectorAll("source, img")):[L];return H.forEach(function(te){if(!ee){var X=te.getAttribute("data-lowsrc");X&&j(te)&&(ee=X)}}),ee},K=function($,L,ee,H){var te,X=!1,J=!1,re=H=="always"?0:Date.now(),ge=0,Le=($||L).parentNode,ce=function(){if(!!ee){var me=function(ve){X=!0,te||(te=ve.target),u.rAF(function(){u.rC(L,u.cfg.blurUpLoadingClass),te&&u.aC(te,u.cfg.blurUpLoadedClass)}),te&&(te.removeEventListener("load",me),te.removeEventListener("error",me))};te=s.createElement("img"),te.addEventListener("load",me),te.addEventListener("error",me),te.className=u.cfg.blurUpClass,te.cssText=L.cssText,te.src=ee,te.alt="",te.setAttribute("aria-hidden","true"),Le.insertBefore(te,($||L).nextSibling),H!="always"&&(te.style.visibility="hidden",u.rAF(function(){te&&setTimeout(function(){te&&u.rAF(function(){!J&&te&&(te.style.visibility="")})},u.cfg.blurupCacheDelay||33)}))}},_e=function(){te&&u.rAF(function(){u.rC(L,u.cfg.blurUpLoadingClass);try{te.parentNode.removeChild(te)}catch(me){}te=null})},ze=function(me){ge++,J=me||J,me?_e():ge>1&&setTimeout(_e,5e3)},xe=function(){L.removeEventListener("load",xe),L.removeEventListener("error",xe),te&&u.rAF(function(){te&&u.aC(te,u.cfg.blurUpLoadedOriginalClass)}),u.fire(L,"blurUpLoaded"),H!="always"&&(!X||Date.now()-re<66)?ze(!0):ze()};ce(),L.addEventListener("load",xe),L.addEventListener("error",xe),u.aC(L,u.cfg.blurUpLoadingClass);var Ne=function(me){Le==me.target&&(u.aC(te||L,u.cfg.blurUpInviewClass),ze(),Le.removeEventListener("lazybeforeunveil",Ne))};Le.getAttribute("data-expand")||Le.setAttribute("data-expand",-1),Le.addEventListener("lazybeforeunveil",Ne),u.aC(Le,u.cfg.lazyClass)};l.addEventListener("lazybeforeunveil",function($){var L=$.detail;if(!(L.instance!=u||!L.blurUp)){var ee=$.target,H=ee.parentNode;H.nodeName!="PICTURE"&&(H=null),K(H,ee,G(H,ee)||q,L.blurUp)}}),l.addEventListener("lazyunveilread",function($){var L=$.detail;if(L.instance==u){var ee=$.target,H=(getComputedStyle(ee,null)||{fontFamily:""}).fontFamily.match(S);!H&&!ee.getAttribute("data-lowsrc")||(L.blurUp=H&&H[1]||u.cfg.blurupMode||"always")}})})})(gl);function ke(n,l,s){return l in n?Object.defineProperty(n,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[l]=s,n}function pl(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function ia(n,l){for(var s=0;s<l.length;s++){var u=l[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function ml(n,l,s){return l&&ia(n.prototype,l),s&&ia(n,s),n}function _l(n,l,s){return l in n?Object.defineProperty(n,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[l]=s,n}function na(n,l){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);l&&(u=u.filter(function(y){return Object.getOwnPropertyDescriptor(n,y).enumerable})),s.push.apply(s,u)}return s}function ra(n){for(var l=1;l<arguments.length;l++){var s=arguments[l]!=null?arguments[l]:{};l%2?na(Object(s),!0).forEach(function(u){_l(n,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):na(Object(s)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(s,u))})}return n}var sa={addCSS:!0,thumbWidth:15,watch:!0};function vl(n,l){return function(){return Array.from(document.querySelectorAll(l)).includes(this)}.call(n,l)}function yl(n,l){if(n&&l){var s=new Event(l,{bubbles:!0});n.dispatchEvent(s)}}var On=function(n){return n!=null?n.constructor:null},ps=function(n,l){return!!(n&&l&&n instanceof l)},Aa=function(n){return n==null},Pa=function(n){return On(n)===Object},bl=function(n){return On(n)===Number&&!Number.isNaN(n)},Ia=function(n){return On(n)===String},wl=function(n){return On(n)===Boolean},xl=function(n){return On(n)===Function},La=function(n){return Array.isArray(n)},Ma=function(n){return ps(n,NodeList)},Cl=function(n){return ps(n,Element)},Sl=function(n){return ps(n,Event)},kl=function(n){return Aa(n)||(Ia(n)||La(n)||Ma(n))&&!n.length||Pa(n)&&!Object.keys(n).length},Rt={nullOrUndefined:Aa,object:Pa,number:bl,string:Ia,boolean:wl,function:xl,array:La,nodeList:Ma,element:Cl,event:Sl,empty:kl};function Tl(n){var l="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return l?Math.max(0,(l[1]?l[1].length:0)-(l[2]?+l[2]:0)):0}function El(n,l){if(1>l){var s=Tl(l);return parseFloat(n.toFixed(s))}return Math.round(n/l)*l}var Al=function(){function n(l,s){pl(this,n),Rt.element(l)?this.element=l:Rt.string(l)&&(this.element=document.querySelector(l)),Rt.element(this.element)&&Rt.empty(this.element.rangeTouch)&&(this.config=ra({},sa,{},s),this.init())}return ml(n,[{key:"init",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(l){var s=this,u=l?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(y){s.element[u](y,function(d){return s.set(d)},!1)})}},{key:"get",value:function(l){if(!n.enabled||!Rt.event(l))return null;var s,u=l.target,y=l.changedTouches[0],d=parseFloat(u.getAttribute("min"))||0,S=parseFloat(u.getAttribute("max"))||100,M=parseFloat(u.getAttribute("step"))||1,q=u.getBoundingClientRect(),j=100/q.width*(this.config.thumbWidth/2)/100;return 0>(s=100/q.width*(y.clientX-q.left))?s=0:100<s&&(s=100),50>s?s-=(100-2*s)*j:50<s&&(s+=2*(s-50)*j),d+El(s/100*(S-d),M)}},{key:"set",value:function(l){n.enabled&&Rt.event(l)&&!l.target.disabled&&(l.preventDefault(),l.target.value=this.get(l),yl(l.target,l.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(l){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},u=null;if(Rt.empty(l)||Rt.string(l)?u=Array.from(document.querySelectorAll(Rt.string(l)?l:'input[type="range"]')):Rt.element(l)?u=[l]:Rt.nodeList(l)?u=Array.from(l):Rt.array(l)&&(u=l.filter(Rt.element)),Rt.empty(u))return null;var y=ra({},sa,{},s);if(Rt.string(l)&&y.watch){var d=new MutationObserver(function(S){Array.from(S).forEach(function(M){Array.from(M.addedNodes).forEach(function(q){Rt.element(q)&&vl(q,l)&&new n(q,y)})})});d.observe(document.body,{childList:!0,subtree:!0})}return u.map(function(S){return new n(S,s)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),n}();const un=n=>n!=null?n.constructor:null,mi=(n,l)=>Boolean(n&&l&&n instanceof l),ms=n=>n==null,za=n=>un(n)===Object,Pl=n=>un(n)===Number&&!Number.isNaN(n),pr=n=>un(n)===String,Il=n=>un(n)===Boolean,Oa=n=>un(n)===Function,Na=n=>Array.isArray(n),Ll=n=>mi(n,WeakMap),Ra=n=>mi(n,NodeList),Ml=n=>un(n)===Text,zl=n=>mi(n,Event),Ol=n=>mi(n,KeyboardEvent),Nl=n=>mi(n,window.TextTrackCue)||mi(n,window.VTTCue),Rl=n=>mi(n,TextTrack)||!ms(n)&&pr(n.kind),Dl=n=>mi(n,Promise)&&Oa(n.then),Bl=n=>n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object",Da=n=>ms(n)||(pr(n)||Na(n)||Ra(n))&&!n.length||za(n)&&!Object.keys(n).length,Fl=n=>{if(mi(n,window.URL))return!0;if(!pr(n))return!1;let l=n;n.startsWith("http://")&&n.startsWith("https://")||(l=`http://${n}`);try{return!Da(new URL(l).hostname)}catch(s){return!1}};var R={nullOrUndefined:ms,object:za,number:Pl,string:pr,boolean:Il,function:Oa,array:Na,weakMap:Ll,nodeList:Ra,element:Bl,textNode:Ml,event:zl,keyboardEvent:Ol,cue:Nl,track:Rl,promise:Dl,url:Fl,empty:Da};const ts=(()=>{const n=document.createElement("span"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=Object.keys(l).find(u=>n.style[u]!==void 0);return!!R.string(s)&&l[s]})();function Ba(n,l){setTimeout(()=>{try{n.hidden=!0,n.offsetHeight,n.hidden=!1}catch(s){}},l)}const zt={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function Vl(n){return JSON.parse(JSON.stringify(n))}function Fa(n,l){return l.split(".").reduce((s,u)=>s&&s[u],n)}function wt(n={},...l){if(!l.length)return n;const s=l.shift();return R.object(s)?(Object.keys(s).forEach(u=>{R.object(s[u])?(Object.keys(n).includes(u)||Object.assign(n,{[u]:{}}),wt(n[u],s[u])):Object.assign(n,{[u]:s[u]})}),wt(n,...l)):n}function Va(n,l){const s=n.length?n:[n];Array.from(s).reverse().forEach((u,y)=>{const d=y>0?l.cloneNode(!0):l,S=u.parentNode,M=u.nextSibling;d.appendChild(u),M?S.insertBefore(d,M):S.appendChild(d)})}function is(n,l){R.element(n)&&!R.empty(l)&&Object.entries(l).filter(([,s])=>!R.nullOrUndefined(s)).forEach(([s,u])=>n.setAttribute(s,u))}function Fe(n,l,s){const u=document.createElement(n);return R.object(l)&&is(u,l),R.string(s)&&(u.innerText=s),u}function ql(n,l){R.element(n)&&R.element(l)&&l.parentNode.insertBefore(n,l.nextSibling)}function aa(n,l,s,u){R.element(l)&&l.appendChild(Fe(n,s,u))}function fi(n){R.nodeList(n)||R.array(n)?Array.from(n).forEach(fi):R.element(n)&&R.element(n.parentNode)&&n.parentNode.removeChild(n)}function er(n){if(!R.element(n))return;let{length:l}=n.childNodes;for(;l>0;)n.removeChild(n.lastChild),l-=1}function or(n,l){return R.element(l)&&R.element(l.parentNode)&&R.element(n)?(l.parentNode.replaceChild(n,l),n):null}function si(n,l){if(!R.string(n)||R.empty(n))return{};const s={},u=wt({},l);return n.split(",").forEach(y=>{const d=y.trim(),S=d.replace(".",""),M=d.replace(/[[\]]/g,"").split("="),[q]=M,j=M.length>1?M[1].replace(/["']/g,""):"";switch(d.charAt(0)){case".":R.string(u.class)?s.class=`${u.class} ${S}`:s.class=S;break;case"#":s.id=d.replace("#","");break;case"[":s[q]=j}}),wt(u,s)}function Di(n,l){if(!R.element(n))return;let s=l;R.boolean(s)||(s=!n.hidden),n.hidden=s}function Qe(n,l,s){if(R.nodeList(n))return Array.from(n).map(u=>Qe(u,l,s));if(R.element(n)){let u="toggle";return s!==void 0&&(u=s?"add":"remove"),n.classList[u](l),n.classList.contains(l)}return!1}function lr(n,l){return R.element(n)&&n.classList.contains(l)}function Bi(n,l){const{prototype:s}=Element;return(s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||function(){return Array.from(document.querySelectorAll(l)).includes(this)}).call(n,l)}function Hl(n,l){const{prototype:s}=Element;return(s.closest||function(){let u=this;do{if(Bi.matches(u,l))return u;u=u.parentElement||u.parentNode}while(u!==null&&u.nodeType===1);return null}).call(n,l)}function Ji(n){return this.elements.container.querySelectorAll(n)}function Et(n){return this.elements.container.querySelector(n)}function Gr(n=null,l=!1){R.element(n)&&(n.focus({preventScroll:!0}),l&&Qe(n,this.config.classNames.tabFocus))}const oa={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},_t={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(n,l,s){const u=zt.isIPhone&&s&&_t.playsinline,y=_t[n]||l!=="html5";return{api:y,ui:y&&_t.rangeInput&&(n!=="video"||!zt.isIPhone||u)}},pip:!(zt.isIPhone||!R.function(Fe("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Fe("video").disablePictureInPicture)),airplay:R.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(n){if(R.empty(n))return!1;const[l]=n.split("/");let s=n;if(!this.isHTML5||l!==this.type)return!1;Object.keys(oa).includes(s)&&(s+=`; codecs="${oa[n]}"`);try{return Boolean(s&&this.media.canPlayType(s).replace(/no/,""))}catch(u){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const n=document.createElement("input");return n.type="range",n.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:ts!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ul=(()=>{let n=!1;try{const l=Object.defineProperty({},"passive",{get:()=>(n=!0,null)});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return n})();function Qi(n,l,s,u=!1,y=!0,d=!1){if(!n||!("addEventListener"in n)||R.empty(l)||!R.function(s))return;const S=l.split(" ");let M=d;Ul&&(M={passive:y,capture:d}),S.forEach(q=>{this&&this.eventListeners&&u&&this.eventListeners.push({element:n,type:q,callback:s,options:M}),n[u?"addEventListener":"removeEventListener"](q,s,M)})}function nt(n,l="",s,u=!0,y=!1){Qi.call(this,n,l,s,!0,u,y)}function mr(n,l="",s,u=!0,y=!1){Qi.call(this,n,l,s,!1,u,y)}function _s(n,l="",s,u=!0,y=!1){const d=(...S)=>{mr(n,l,d,u,y),s.apply(this,S)};Qi.call(this,n,l,d,!0,u,y)}function qe(n,l="",s=!1,u={}){if(!R.element(n)||R.empty(l))return;const y=new CustomEvent(l,{bubbles:s,detail:{...u,plyr:this}});n.dispatchEvent(y)}function jl(){this&&this.eventListeners&&(this.eventListeners.forEach(n=>{const{element:l,type:s,callback:u,options:y}=n;l.removeEventListener(s,u,y)}),this.eventListeners=[])}function Wl(){return new Promise(n=>this.ready?setTimeout(n,0):nt.call(this,this.elements.container,"ready",n)).then(()=>{})}function oi(n){R.promise(n)&&n.then(null,()=>{})}function ns(n){return R.array(n)?n.filter((l,s)=>n.indexOf(l)===s):n}function qa(n,l){return R.array(n)&&n.length?n.reduce((s,u)=>Math.abs(u-l)<Math.abs(s-l)?u:s):null}function Ha(n){return!(!window||!window.CSS)&&window.CSS.supports(n)}const la=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((n,[l,s])=>({...n,[l/s]:[l,s]}),{});function Ua(n){return R.array(n)||R.string(n)&&n.includes(":")?(R.array(n)?n:n.split(":")).map(Number).every(R.number):!1}function ur(n){if(!R.array(n)||!n.every(R.number))return null;const[l,s]=n,u=(d,S)=>S===0?d:u(S,d%S),y=u(l,s);return[l/y,s/y]}function vs(n){const l=u=>Ua(u)?u.split(":").map(Number):null;let s=l(n);if(s===null&&(s=l(this.config.ratio)),s===null&&!R.empty(this.embed)&&R.array(this.embed.ratio)&&({ratio:s}=this.embed),s===null&&this.isHTML5){const{videoWidth:u,videoHeight:y}=this.media;s=[u,y]}return ur(s)}function nn(n){if(!this.isVideo)return{};const{wrapper:l}=this.elements,s=vs.call(this,n);if(!R.array(s))return{};const[u,y]=ur(s),d=100/u*y;if(Ha(`aspect-ratio: ${u}/${y}`)?l.style.aspectRatio=`${u}/${y}`:l.style.paddingBottom=`${d}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const S=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),M=(S-d)/(S/50);this.fullscreen.active?l.style.paddingBottom=null:this.media.style.transform=`translateY(-${M}%)`}else this.isHTML5&&l.classList.add(this.config.classNames.videoFixedRatio);return{padding:d,ratio:s}}function ja(n,l,s=.05){const u=n/l,y=qa(Object.keys(la),u);return Math.abs(y-u)<=s?la[y]:[n,l]}function $l(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Si={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(n=>{const l=n.getAttribute("type");return!!R.empty(l)||_t.mime.call(this,l)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Si.getSources.call(this).map(n=>Number(n.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const n=this;n.options.speed=n.config.speed.options,R.empty(this.config.ratio)||nn.call(n),Object.defineProperty(n.media,"quality",{get(){const l=Si.getSources.call(n).find(s=>s.getAttribute("src")===n.source);return l&&Number(l.getAttribute("size"))},set(l){if(n.quality!==l){if(n.config.quality.forced&&R.function(n.config.quality.onChange))n.config.quality.onChange(l);else{const s=Si.getSources.call(n).find(q=>Number(q.getAttribute("size"))===l);if(!s)return;const{currentTime:u,paused:y,preload:d,readyState:S,playbackRate:M}=n.media;n.media.src=s.getAttribute("src"),(d!=="none"||S)&&(n.once("loadedmetadata",()=>{n.speed=M,n.currentTime=u,y||oi(n.play())}),n.media.load())}qe.call(n,n.media,"qualitychange",!1,{quality:l})}}})},cancelRequests(){this.isHTML5&&(fi(Si.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Gl(n){return`${n}-${Math.floor(1e4*Math.random())}`}function rs(n,...l){return R.empty(n)?n:n.toString().replace(/{(\d+)}/g,(s,u)=>l[u].toString())}function Yl(n,l){return n===0||l===0||Number.isNaN(n)||Number.isNaN(l)?0:(n/l*100).toFixed(2)}const Sn=(n="",l="",s="")=>n.replace(new RegExp(l.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),s.toString()),Wa=(n="")=>n.toString().replace(/\w\S*/g,l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase());function Zl(n=""){let l=n.toString();return l=Sn(l,"-"," "),l=Sn(l,"_"," "),l=Wa(l),Sn(l," ","")}function Kl(n=""){let l=n.toString();return l=Zl(l),l.charAt(0).toLowerCase()+l.slice(1)}function Xl(n){const l=document.createDocumentFragment(),s=document.createElement("div");return l.appendChild(s),s.innerHTML=n,l.firstChild.innerText}function Jl(n){const l=document.createElement("div");return l.appendChild(n),l.innerHTML}const ua={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},It={get(n="",l={}){if(R.empty(n)||R.empty(l))return"";let s=Fa(l.i18n,n);if(R.empty(s))return Object.keys(ua).includes(n)?ua[n]:"";const u={"{seektime}":l.seekTime,"{title}":l.title};return Object.entries(u).forEach(([y,d])=>{s=Sn(s,y,d)}),s}};class En{constructor(l){ke(this,"get",s=>{if(!En.supported||!this.enabled)return null;const u=window.localStorage.getItem(this.key);if(R.empty(u))return null;const y=JSON.parse(u);return R.string(s)&&s.length?y[s]:y}),ke(this,"set",s=>{if(!En.supported||!this.enabled||!R.object(s))return;let u=this.get();R.empty(u)&&(u={}),wt(u,s);try{window.localStorage.setItem(this.key,JSON.stringify(u))}catch(y){}}),this.enabled=l.config.storage.enabled,this.key=l.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const l="___test";return window.localStorage.setItem(l,l),window.localStorage.removeItem(l),!0}catch(l){return!1}}}function Nn(n,l="text"){return new Promise((s,u)=>{try{const y=new XMLHttpRequest;if(!("withCredentials"in y))return;y.addEventListener("load",()=>{if(l==="text")try{s(JSON.parse(y.responseText))}catch(d){s(y.responseText)}else s(y.response)}),y.addEventListener("error",()=>{throw new Error(y.status)}),y.open("GET",n,!0),y.responseType=l,y.send()}catch(y){u(y)}})}function $a(n,l){if(!R.string(n))return;const s=R.string(l);let u=!1;const y=()=>document.getElementById(l)!==null,d=(S,M)=>{S.innerHTML=M,s&&y()||document.body.insertAdjacentElement("afterbegin",S)};if(!s||!y()){const S=En.supported,M=document.createElement("div");if(M.setAttribute("hidden",""),s&&M.setAttribute("id",l),S){const q=window.localStorage.getItem(`cache-${l}`);if(u=q!==null,u){const j=JSON.parse(q);d(M,j.content)}}Nn(n).then(q=>{if(!R.empty(q)){if(S)try{window.localStorage.setItem(`cache-${l}`,JSON.stringify({content:q}))}catch(j){}d(M,q)}}).catch(()=>{})}}const Ga=n=>Math.trunc(n/60/60%60,10),Ql=n=>Math.trunc(n%60,10);function _r(n=0,l=!1,s=!1){if(!R.number(n))return _r(void 0,l,s);const u=q=>`0${q}`.slice(-2);let y=Ga(n);const d=(S=n,Math.trunc(S/60%60,10));var S;const M=Ql(n);return y=l||y>0?`${y}:`:"",`${s&&n>0?"-":""}${y}${u(d)}:${u(M)}`}const Se={getIconUrl(){const n=new URL(this.config.iconUrl,window.location),l=window.location.host?window.location.host:window.top.location.host,s=n.host!==l||zt.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:s}},findElements(){try{return this.elements.controls=Et.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Ji.call(this,this.config.selectors.buttons.play),pause:Et.call(this,this.config.selectors.buttons.pause),restart:Et.call(this,this.config.selectors.buttons.restart),rewind:Et.call(this,this.config.selectors.buttons.rewind),fastForward:Et.call(this,this.config.selectors.buttons.fastForward),mute:Et.call(this,this.config.selectors.buttons.mute),pip:Et.call(this,this.config.selectors.buttons.pip),airplay:Et.call(this,this.config.selectors.buttons.airplay),settings:Et.call(this,this.config.selectors.buttons.settings),captions:Et.call(this,this.config.selectors.buttons.captions),fullscreen:Et.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Et.call(this,this.config.selectors.progress),this.elements.inputs={seek:Et.call(this,this.config.selectors.inputs.seek),volume:Et.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Et.call(this,this.config.selectors.display.buffer),currentTime:Et.call(this,this.config.selectors.display.currentTime),duration:Et.call(this,this.config.selectors.display.duration)},R.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(n){return this.debug.warn("It looks like there is a problem with your custom controls HTML",n),this.toggleNativeControls(!0),!1}},createIcon(n,l){const s="http://www.w3.org/2000/svg",u=Se.getIconUrl.call(this),y=`${u.cors?"":u.url}#${this.config.iconPrefix}`,d=document.createElementNS(s,"svg");is(d,wt(l,{"aria-hidden":"true",focusable:"false"}));const S=document.createElementNS(s,"use"),M=`${y}-${n}`;return"href"in S&&S.setAttributeNS("http://www.w3.org/1999/xlink","href",M),S.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",M),d.appendChild(S),d},createLabel(n,l={}){const s=It.get(n,this.config);return Fe("span",{...l,class:[l.class,this.config.classNames.hidden].filter(Boolean).join(" ")},s)},createBadge(n){if(R.empty(n))return null;const l=Fe("span",{class:this.config.classNames.menu.value});return l.appendChild(Fe("span",{class:this.config.classNames.menu.badge},n)),l},createButton(n,l){const s=wt({},l);let u=Kl(n);const y={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(S=>{Object.keys(s).includes(S)&&(y[S]=s[S],delete s[S])}),y.element!=="button"||Object.keys(s).includes("type")||(s.type="button"),Object.keys(s).includes("class")?s.class.split(" ").some(S=>S===this.config.classNames.control)||wt(s,{class:`${s.class} ${this.config.classNames.control}`}):s.class=this.config.classNames.control,n){case"play":y.toggle=!0,y.label="play",y.labelPressed="pause",y.icon="play",y.iconPressed="pause";break;case"mute":y.toggle=!0,y.label="mute",y.labelPressed="unmute",y.icon="volume",y.iconPressed="muted";break;case"captions":y.toggle=!0,y.label="enableCaptions",y.labelPressed="disableCaptions",y.icon="captions-off",y.iconPressed="captions-on";break;case"fullscreen":y.toggle=!0,y.label="enterFullscreen",y.labelPressed="exitFullscreen",y.icon="enter-fullscreen",y.iconPressed="exit-fullscreen";break;case"play-large":s.class+=` ${this.config.classNames.control}--overlaid`,u="play",y.label="play",y.icon="play";break;default:R.empty(y.label)&&(y.label=u),R.empty(y.icon)&&(y.icon=n)}const d=Fe(y.element);return y.toggle?(d.appendChild(Se.createIcon.call(this,y.iconPressed,{class:"icon--pressed"})),d.appendChild(Se.createIcon.call(this,y.icon,{class:"icon--not-pressed"})),d.appendChild(Se.createLabel.call(this,y.labelPressed,{class:"label--pressed"})),d.appendChild(Se.createLabel.call(this,y.label,{class:"label--not-pressed"}))):(d.appendChild(Se.createIcon.call(this,y.icon)),d.appendChild(Se.createLabel.call(this,y.label))),wt(s,si(this.config.selectors.buttons[u],s)),is(d,s),u==="play"?(R.array(this.elements.buttons[u])||(this.elements.buttons[u]=[]),this.elements.buttons[u].push(d)):this.elements.buttons[u]=d,d},createRange(n,l){const s=Fe("input",wt(si(this.config.selectors.inputs[n]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":It.get(n,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},l));return this.elements.inputs[n]=s,Se.updateRangeFill.call(this,s),Al.setup(s),s},createProgress(n,l){const s=Fe("progress",wt(si(this.config.selectors.display[n]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},l));if(n!=="volume"){s.appendChild(Fe("span",null,"0"));const u={played:"played",buffer:"buffered"}[n],y=u?It.get(u,this.config):"";s.innerText=`% ${y.toLowerCase()}`}return this.elements.display[n]=s,s},createTime(n,l){const s=si(this.config.selectors.display[n],l),u=Fe("div",wt(s,{class:`${s.class?s.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":It.get(n,this.config)}),"00:00");return this.elements.display[n]=u,u},bindMenuItemShortcuts(n,l){nt.call(this,n,"keydown keyup",s=>{if(!["Space","ArrowUp","ArrowDown","ArrowRight"].includes(s.key)||(s.preventDefault(),s.stopPropagation(),s.type==="keydown"))return;const u=Bi(n,'[role="menuitemradio"]');if(!u&&["Space","ArrowRight"].includes(s.key))Se.showMenuPanel.call(this,l,!0);else{let y;s.key!=="Space"&&(s.key==="ArrowDown"||u&&s.key==="ArrowRight"?(y=n.nextElementSibling,R.element(y)||(y=n.parentNode.firstElementChild)):(y=n.previousElementSibling,R.element(y)||(y=n.parentNode.lastElementChild)),Gr.call(this,y,!0))}},!1),nt.call(this,n,"keyup",s=>{s.key==="Return"&&Se.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:n,list:l,type:s,title:u,badge:y=null,checked:d=!1}){const S=si(this.config.selectors.inputs[s]),M=Fe("button",wt(S,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${S.class?S.class:""}`.trim(),"aria-checked":d,value:n})),q=Fe("span");q.innerHTML=u,R.element(y)&&q.appendChild(y),M.appendChild(q),Object.defineProperty(M,"checked",{enumerable:!0,get:()=>M.getAttribute("aria-checked")==="true",set(j){j&&Array.from(M.parentNode.children).filter(G=>Bi(G,'[role="menuitemradio"]')).forEach(G=>G.setAttribute("aria-checked","false")),M.setAttribute("aria-checked",j?"true":"false")}}),this.listeners.bind(M,"click keyup",j=>{if(!R.keyboardEvent(j)||j.key==="Space"){switch(j.preventDefault(),j.stopPropagation(),M.checked=!0,s){case"language":this.currentTrack=Number(n);break;case"quality":this.quality=n;break;case"speed":this.speed=parseFloat(n)}Se.showMenuPanel.call(this,"home",R.keyboardEvent(j))}},s,!1),Se.bindMenuItemShortcuts.call(this,M,s),l.appendChild(M)},formatTime(n=0,l=!1){return R.number(n)?_r(n,Ga(this.duration)>0,l):n},updateTimeDisplay(n=null,l=0,s=!1){R.element(n)&&R.number(l)&&(n.innerText=Se.formatTime(l,s))},updateVolume(){this.supported.ui&&(R.element(this.elements.inputs.volume)&&Se.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),R.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(n,l=0){R.element(n)&&(n.value=l,Se.updateRangeFill.call(this,n))},updateProgress(n){if(!this.supported.ui||!R.event(n))return;let l=0;const s=(u,y)=>{const d=R.number(y)?y:0,S=R.element(u)?u:this.elements.display.buffer;if(R.element(S)){S.value=d;const M=S.getElementsByTagName("span")[0];R.element(M)&&(M.childNodes[0].nodeValue=d)}};if(n)switch(n.type){case"timeupdate":case"seeking":case"seeked":l=Yl(this.currentTime,this.duration),n.type==="timeupdate"&&Se.setRange.call(this,this.elements.inputs.seek,l);break;case"playing":case"progress":s(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(n){const l=R.event(n)?n.target:n;if(R.element(l)&&l.getAttribute("type")==="range"){if(Bi(l,this.config.selectors.inputs.seek)){l.setAttribute("aria-valuenow",this.currentTime);const s=Se.formatTime(this.currentTime),u=Se.formatTime(this.duration),y=It.get("seekLabel",this.config);l.setAttribute("aria-valuetext",y.replace("{currentTime}",s).replace("{duration}",u))}else if(Bi(l,this.config.selectors.inputs.volume)){const s=100*l.value;l.setAttribute("aria-valuenow",s),l.setAttribute("aria-valuetext",`${s.toFixed(1)}%`)}else l.setAttribute("aria-valuenow",l.value);zt.isWebkit&&l.style.setProperty("--value",l.value/l.max*100+"%")}},updateSeekTooltip(n){var l,s;if(!this.config.tooltips.seek||!R.element(this.elements.inputs.seek)||!R.element(this.elements.display.seekTooltip)||this.duration===0)return;const u=this.elements.display.seekTooltip,y=`${this.config.classNames.tooltip}--visible`,d=G=>Qe(u,y,G);if(this.touch)return void d(!1);let S=0;const M=this.elements.progress.getBoundingClientRect();if(R.event(n))S=100/M.width*(n.pageX-M.left);else{if(!lr(u,y))return;S=parseFloat(u.style.left,10)}S<0?S=0:S>100&&(S=100);const q=this.duration/100*S;u.innerText=Se.formatTime(q);const j=(l=this.config.markers)===null||l===void 0||(s=l.points)===null||s===void 0?void 0:s.find(({time:G})=>G===Math.round(q));j&&u.insertAdjacentHTML("afterbegin",`${j.label}<br>`),u.style.left=`${S}%`,R.event(n)&&["mouseenter","mouseleave"].includes(n.type)&&d(n.type==="mouseenter")},timeUpdate(n){const l=!R.element(this.elements.display.duration)&&this.config.invertTime;Se.updateTimeDisplay.call(this,this.elements.display.currentTime,l?this.duration-this.currentTime:this.currentTime,l),n&&n.type==="timeupdate"&&this.media.seeking||Se.updateProgress.call(this,n)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Di(this.elements.display.currentTime,!0),void Di(this.elements.progress,!0);R.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const n=R.element(this.elements.display.duration);!n&&this.config.displayDuration&&this.paused&&Se.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),n&&Se.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Se.setMarkers.call(this),Se.updateSeekTooltip.call(this)},toggleMenuButton(n,l){Di(this.elements.settings.buttons[n],!l)},updateSetting(n,l,s){const u=this.elements.settings.panels[n];let y=null,d=l;if(n==="captions")y=this.currentTrack;else{if(y=R.empty(s)?this[n]:s,R.empty(y)&&(y=this.config[n].default),!R.empty(this.options[n])&&!this.options[n].includes(y))return void this.debug.warn(`Unsupported value of '${y}' for ${n}`);if(!this.config[n].options.includes(y))return void this.debug.warn(`Disabled value of '${y}' for ${n}`)}if(R.element(d)||(d=u&&u.querySelector('[role="menu"]')),!R.element(d))return;this.elements.settings.buttons[n].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Se.getLabel.call(this,n,y);const S=d&&d.querySelector(`[value="${y}"]`);R.element(S)&&(S.checked=!0)},getLabel(n,l){switch(n){case"speed":return l===1?It.get("normal",this.config):`${l}&times;`;case"quality":if(R.number(l)){const s=It.get(`qualityLabel.${l}`,this.config);return s.length?s:`${l}p`}return Wa(l);case"captions":return st.getLabel.call(this);default:return null}},setQualityMenu(n){if(!R.element(this.elements.settings.panels.quality))return;const l="quality",s=this.elements.settings.panels.quality.querySelector('[role="menu"]');R.array(n)&&(this.options.quality=ns(n).filter(d=>this.config.quality.options.includes(d)));const u=!R.empty(this.options.quality)&&this.options.quality.length>1;if(Se.toggleMenuButton.call(this,l,u),er(s),Se.checkMenu.call(this),!u)return;const y=d=>{const S=It.get(`qualityBadge.${d}`,this.config);return S.length?Se.createBadge.call(this,S):null};this.options.quality.sort((d,S)=>{const M=this.config.quality.options;return M.indexOf(d)>M.indexOf(S)?1:-1}).forEach(d=>{Se.createMenuItem.call(this,{value:d,list:s,type:l,title:Se.getLabel.call(this,"quality",d),badge:y(d)})}),Se.updateSetting.call(this,l,s)},setCaptionsMenu(){if(!R.element(this.elements.settings.panels.captions))return;const n="captions",l=this.elements.settings.panels.captions.querySelector('[role="menu"]'),s=st.getTracks.call(this),u=Boolean(s.length);if(Se.toggleMenuButton.call(this,n,u),er(l),Se.checkMenu.call(this),!u)return;const y=s.map((d,S)=>({value:S,checked:this.captions.toggled&&this.currentTrack===S,title:st.getLabel.call(this,d),badge:d.language&&Se.createBadge.call(this,d.language.toUpperCase()),list:l,type:"language"}));y.unshift({value:-1,checked:!this.captions.toggled,title:It.get("disabled",this.config),list:l,type:"language"}),y.forEach(Se.createMenuItem.bind(this)),Se.updateSetting.call(this,n,l)},setSpeedMenu(){if(!R.element(this.elements.settings.panels.speed))return;const n="speed",l=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(u=>u>=this.minimumSpeed&&u<=this.maximumSpeed);const s=!R.empty(this.options.speed)&&this.options.speed.length>1;Se.toggleMenuButton.call(this,n,s),er(l),Se.checkMenu.call(this),s&&(this.options.speed.forEach(u=>{Se.createMenuItem.call(this,{value:u,list:l,type:n,title:Se.getLabel.call(this,"speed",u)})}),Se.updateSetting.call(this,n,l))},checkMenu(){const{buttons:n}=this.elements.settings,l=!R.empty(n)&&Object.values(n).some(s=>!s.hidden);Di(this.elements.settings.menu,!l)},focusFirstMenuItem(n,l=!1){if(this.elements.settings.popup.hidden)return;let s=n;R.element(s)||(s=Object.values(this.elements.settings.panels).find(y=>!y.hidden));const u=s.querySelector('[role^="menuitem"]');Gr.call(this,u,l)},toggleMenu(n){const{popup:l}=this.elements.settings,s=this.elements.buttons.settings;if(!R.element(l)||!R.element(s))return;const{hidden:u}=l;let y=u;if(R.boolean(n))y=n;else if(R.keyboardEvent(n)&&n.key==="Escape")y=!1;else if(R.event(n)){const d=R.function(n.composedPath)?n.composedPath()[0]:n.target,S=l.contains(d);if(S||!S&&n.target!==s&&y)return}s.setAttribute("aria-expanded",y),Di(l,!y),Qe(this.elements.container,this.config.classNames.menu.open,y),y&&R.keyboardEvent(n)?Se.focusFirstMenuItem.call(this,null,!0):y||u||Gr.call(this,s,R.keyboardEvent(n))},getMenuSize(n){const l=n.cloneNode(!0);l.style.position="absolute",l.style.opacity=0,l.removeAttribute("hidden"),n.parentNode.appendChild(l);const s=l.scrollWidth,u=l.scrollHeight;return fi(l),{width:s,height:u}},showMenuPanel(n="",l=!1){const s=this.elements.container.querySelector(`#plyr-settings-${this.id}-${n}`);if(!R.element(s))return;const u=s.parentNode,y=Array.from(u.children).find(d=>!d.hidden);if(_t.transitions&&!_t.reducedMotion){u.style.width=`${y.scrollWidth}px`,u.style.height=`${y.scrollHeight}px`;const d=Se.getMenuSize.call(this,s),S=M=>{M.target===u&&["width","height"].includes(M.propertyName)&&(u.style.width="",u.style.height="",mr.call(this,u,ts,S))};nt.call(this,u,ts,S),u.style.width=`${d.width}px`,u.style.height=`${d.height}px`}Di(y,!0),Di(s,!1),Se.focusFirstMenuItem.call(this,s,l)},setDownloadUrl(){const n=this.elements.buttons.download;R.element(n)&&n.setAttribute("href",this.download)},create(n){const{bindMenuItemShortcuts:l,createButton:s,createProgress:u,createRange:y,createTime:d,setQualityMenu:S,setSpeedMenu:M,showMenuPanel:q}=Se;this.elements.controls=null,R.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(s.call(this,"play-large"));const j=Fe("div",si(this.config.selectors.controls.wrapper));this.elements.controls=j;const G={class:"plyr__controls__item"};return ns(R.array(this.config.controls)?this.config.controls:[]).forEach(K=>{if(K==="restart"&&j.appendChild(s.call(this,"restart",G)),K==="rewind"&&j.appendChild(s.call(this,"rewind",G)),K==="play"&&j.appendChild(s.call(this,"play",G)),K==="fast-forward"&&j.appendChild(s.call(this,"fast-forward",G)),K==="progress"){const $=Fe("div",{class:`${G.class} plyr__progress__container`}),L=Fe("div",si(this.config.selectors.progress));if(L.appendChild(y.call(this,"seek",{id:`plyr-seek-${n.id}`})),L.appendChild(u.call(this,"buffer")),this.config.tooltips.seek){const ee=Fe("span",{class:this.config.classNames.tooltip},"00:00");L.appendChild(ee),this.elements.display.seekTooltip=ee}this.elements.progress=L,$.appendChild(this.elements.progress),j.appendChild($)}if(K==="current-time"&&j.appendChild(d.call(this,"currentTime",G)),K==="duration"&&j.appendChild(d.call(this,"duration",G)),K==="mute"||K==="volume"){let{volume:$}=this.elements;if(R.element($)&&j.contains($)||($=Fe("div",wt({},G,{class:`${G.class} plyr__volume`.trim()})),this.elements.volume=$,j.appendChild($)),K==="mute"&&$.appendChild(s.call(this,"mute")),K==="volume"&&!zt.isIos){const L={max:1,step:.05,value:this.config.volume};$.appendChild(y.call(this,"volume",wt(L,{id:`plyr-volume-${n.id}`})))}}if(K==="captions"&&j.appendChild(s.call(this,"captions",G)),K==="settings"&&!R.empty(this.config.settings)){const $=Fe("div",wt({},G,{class:`${G.class} plyr__menu`.trim(),hidden:""}));$.appendChild(s.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${n.id}`,"aria-expanded":!1}));const L=Fe("div",{class:"plyr__menu__container",id:`plyr-settings-${n.id}`,hidden:""}),ee=Fe("div"),H=Fe("div",{id:`plyr-settings-${n.id}-home`}),te=Fe("div",{role:"menu"});H.appendChild(te),ee.appendChild(H),this.elements.settings.panels.home=H,this.config.settings.forEach(X=>{const J=Fe("button",wt(si(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));l.call(this,J,X),nt.call(this,J,"click",()=>{q.call(this,X,!1)});const re=Fe("span",null,It.get(X,this.config)),ge=Fe("span",{class:this.config.classNames.menu.value});ge.innerHTML=n[X],re.appendChild(ge),J.appendChild(re),te.appendChild(J);const Le=Fe("div",{id:`plyr-settings-${n.id}-${X}`,hidden:""}),ce=Fe("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});ce.appendChild(Fe("span",{"aria-hidden":!0},It.get(X,this.config))),ce.appendChild(Fe("span",{class:this.config.classNames.hidden},It.get("menuBack",this.config))),nt.call(this,Le,"keydown",_e=>{_e.key==="ArrowLeft"&&(_e.preventDefault(),_e.stopPropagation(),q.call(this,"home",!0))},!1),nt.call(this,ce,"click",()=>{q.call(this,"home",!1)}),Le.appendChild(ce),Le.appendChild(Fe("div",{role:"menu"})),ee.appendChild(Le),this.elements.settings.buttons[X]=J,this.elements.settings.panels[X]=Le}),L.appendChild(ee),$.appendChild(L),j.appendChild($),this.elements.settings.popup=L,this.elements.settings.menu=$}if(K==="pip"&&_t.pip&&j.appendChild(s.call(this,"pip",G)),K==="airplay"&&_t.airplay&&j.appendChild(s.call(this,"airplay",G)),K==="download"){const $=wt({},G,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&($.download="");const{download:L}=this.config.urls;!R.url(L)&&this.isEmbed&&wt($,{icon:`logo-${this.provider}`,label:this.provider}),j.appendChild(s.call(this,"download",$))}K==="fullscreen"&&j.appendChild(s.call(this,"fullscreen",G))}),this.isHTML5&&S.call(this,Si.getQualityOptions.call(this)),M.call(this),j},inject(){if(this.config.loadSprite){const y=Se.getIconUrl.call(this);y.cors&&$a(y.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let n=null;this.elements.controls=null;const l={id:this.id,seektime:this.config.seekTime,title:this.config.title};let s=!0;R.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,l)),this.config.controls||(this.config.controls=[]),R.element(this.config.controls)||R.string(this.config.controls)?n=this.config.controls:(n=Se.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:st.getLabel.call(this)}),s=!1);let u;if(s&&R.string(this.config.controls)&&(n=(y=>{let d=y;return Object.entries(l).forEach(([S,M])=>{d=Sn(d,`{${S}}`,M)}),d})(n)),R.string(this.config.selectors.controls.container)&&(u=document.querySelector(this.config.selectors.controls.container)),R.element(u)||(u=this.elements.container),u[R.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),R.element(this.elements.controls)||Se.findElements.call(this),!R.empty(this.elements.buttons)){const y=d=>{const S=this.config.classNames.controlPressed;Object.defineProperty(d,"pressed",{enumerable:!0,get:()=>lr(d,S),set(M=!1){Qe(d,S,M)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(d=>{R.array(d)||R.nodeList(d)?Array.from(d).filter(Boolean).forEach(y):y(d)})}if(zt.isEdge&&Ba(u),this.config.tooltips.controls){const{classNames:y,selectors:d}=this.config,S=`${d.controls.wrapper} ${d.labels} .${y.hidden}`,M=Ji.call(this,S);Array.from(M).forEach(q=>{Qe(q,this.config.classNames.hidden,!1),Qe(q,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(n){}},setMarkers(){var n,l;if(!this.duration||this.elements.markers)return;const s=(n=this.config.markers)===null||n===void 0||(l=n.points)===null||l===void 0?void 0:l.filter(({time:q})=>q>0&&q<this.duration);if(s==null||!s.length)return;const u=document.createDocumentFragment(),y=document.createDocumentFragment();let d=null;const S=`${this.config.classNames.tooltip}--visible`,M=q=>Qe(d,S,q);s.forEach(q=>{const j=Fe("span",{class:this.config.classNames.marker},""),G=q.time/this.duration*100+"%";d&&(j.addEventListener("mouseenter",()=>{q.label||(d.style.left=G,d.innerHTML=q.label,M(!0))}),j.addEventListener("mouseleave",()=>{M(!1)})),j.addEventListener("click",()=>{this.currentTime=q.time}),j.style.left=G,y.appendChild(j)}),u.appendChild(y),this.config.tooltips.seek||(d=Fe("span",{class:this.config.classNames.tooltip},""),u.appendChild(d)),this.elements.markers={points:y,tip:d},this.elements.progress.appendChild(u)}};function Ya(n,l=!0){let s=n;if(l){const u=document.createElement("a");u.href=s,s=u.href}try{return new URL(s)}catch(u){return null}}function Za(n){const l=new URLSearchParams;return R.object(n)&&Object.entries(n).forEach(([s,u])=>{l.set(s,u)}),l}const st={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!_t.textTracks)return void(R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Se.setCaptionsMenu.call(this));if(R.element(this.elements.captions)||(this.elements.captions=Fe("div",si(this.config.selectors.captions)),ql(this.elements.captions,this.elements.wrapper)),zt.isIE&&window.URL){const u=this.media.querySelectorAll("track");Array.from(u).forEach(y=>{const d=y.getAttribute("src"),S=Ya(d);S!==null&&S.hostname!==window.location.href.hostname&&["http:","https:"].includes(S.protocol)&&Nn(d,"blob").then(M=>{y.setAttribute("src",window.URL.createObjectURL(M))}).catch(()=>{fi(y)})})}const n=ns((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(u=>u.split("-")[0]));let l=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();l==="auto"&&([l]=n);let s=this.storage.get("captions");if(R.boolean(s)||({active:s}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:s,language:l,languages:n}),this.isHTML5){const u=this.config.captions.update?"addtrack removetrack":"removetrack";nt.call(this,this.media.textTracks,u,st.update.bind(this))}setTimeout(st.update.bind(this),0)},update(){const n=st.getTracks.call(this,!0),{active:l,language:s,meta:u,currentTrackNode:y}=this.captions,d=Boolean(n.find(S=>S.language===s));this.isHTML5&&this.isVideo&&n.filter(S=>!u.get(S)).forEach(S=>{this.debug.log("Track added",S),u.set(S,{default:S.mode==="showing"}),S.mode==="showing"&&(S.mode="hidden"),nt.call(this,S,"cuechange",()=>st.updateCues.call(this))}),(d&&this.language!==s||!n.includes(y))&&(st.setLanguage.call(this,s),st.toggle.call(this,l&&d)),this.elements&&Qe(this.elements.container,this.config.classNames.captions.enabled,!R.empty(n)),R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Se.setCaptionsMenu.call(this)},toggle(n,l=!0){if(!this.supported.ui)return;const{toggled:s}=this.captions,u=this.config.classNames.captions.active,y=R.nullOrUndefined(n)?!s:n;if(y!==s){if(l||(this.captions.active=y,this.storage.set({captions:y})),!this.language&&y&&!l){const d=st.getTracks.call(this),S=st.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=S.language,void st.set.call(this,d.indexOf(S))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=y),Qe(this.elements.container,u,y),this.captions.toggled=y,Se.updateSetting.call(this,"captions"),qe.call(this,this.media,y?"captionsenabled":"captionsdisabled")}setTimeout(()=>{y&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(n,l=!0){const s=st.getTracks.call(this);if(n!==-1)if(R.number(n))if(n in s){if(this.captions.currentTrack!==n){this.captions.currentTrack=n;const u=s[n],{language:y}=u||{};this.captions.currentTrackNode=u,Se.updateSetting.call(this,"captions"),l||(this.captions.language=y,this.storage.set({language:y})),this.isVimeo&&this.embed.enableTextTrack(y),qe.call(this,this.media,"languagechange")}st.toggle.call(this,!0,l),this.isHTML5&&this.isVideo&&st.updateCues.call(this)}else this.debug.warn("Track not found",n);else this.debug.warn("Invalid caption argument",n);else st.toggle.call(this,!1,l)},setLanguage(n,l=!0){if(!R.string(n))return void this.debug.warn("Invalid language argument",n);const s=n.toLowerCase();this.captions.language=s;const u=st.getTracks.call(this),y=st.findTrack.call(this,[s]);st.set.call(this,u.indexOf(y),l)},getTracks(n=!1){return Array.from((this.media||{}).textTracks||[]).filter(l=>!this.isHTML5||n||this.captions.meta.has(l)).filter(l=>["captions","subtitles"].includes(l.kind))},findTrack(n,l=!1){const s=st.getTracks.call(this),u=S=>Number((this.captions.meta.get(S)||{}).default),y=Array.from(s).sort((S,M)=>u(M)-u(S));let d;return n.every(S=>(d=y.find(M=>M.language===S),!d)),d||(l?y[0]:void 0)},getCurrentTrack(){return st.getTracks.call(this)[this.currentTrack]},getLabel(n){let l=n;return!R.track(l)&&_t.textTracks&&this.captions.toggled&&(l=st.getCurrentTrack.call(this)),R.track(l)?R.empty(l.label)?R.empty(l.language)?It.get("enabled",this.config):n.language.toUpperCase():l.label:It.get("disabled",this.config)},updateCues(n){if(!this.supported.ui)return;if(!R.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!R.nullOrUndefined(n)&&!Array.isArray(n))return void this.debug.warn("updateCues: Invalid input",n);let l=n;if(!l){const u=st.getCurrentTrack.call(this);l=Array.from((u||{}).activeCues||[]).map(y=>y.getCueAsHTML()).map(Jl)}const s=l.map(u=>u.trim()).join(`
`);if(s!==this.elements.captions.innerHTML){er(this.elements.captions);const u=Fe("span",si(this.config.selectors.caption));u.innerHTML=s,this.elements.captions.appendChild(u),qe.call(this,this.media,"cuechange")}}},Ka={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Yr={active:"picture-in-picture",inactive:"inline"},Ci={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Zr={audio:"audio",video:"video"};function eu(n){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(n)?Ci.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?Ci.vimeo:null}const Kr=()=>{};class tu{constructor(l=!1){this.enabled=window.console&&l,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Kr}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Kr}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Kr}}class ai{constructor(l){ke(this,"onChange",()=>{if(!this.enabled)return;const s=this.player.elements.buttons.fullscreen;R.element(s)&&(s.pressed=this.active);const u=this.target===this.player.media?this.target:this.player.elements.container;qe.call(this.player,u,this.active?"enterfullscreen":"exitfullscreen",!0)}),ke(this,"toggleFallback",(s=!1)=>{if(s?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=s?"hidden":"",Qe(this.target,this.player.config.classNames.fullscreen.fallback,s),zt.isIos){let u=document.head.querySelector('meta[name="viewport"]');const y="viewport-fit=cover";u||(u=document.createElement("meta"),u.setAttribute("name","viewport"));const d=R.string(u.content)&&u.content.includes(y);s?(this.cleanupViewport=!d,d||(u.content+=`,${y}`)):this.cleanupViewport&&(u.content=u.content.split(",").filter(S=>S.trim()!==y).join(","))}this.onChange()}),ke(this,"trapFocus",s=>{if(zt.isIos||!this.active||s.key!=="Tab")return;const u=document.activeElement,y=Ji.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[d]=y,S=y[y.length-1];u!==S||s.shiftKey?u===d&&s.shiftKey&&(S.focus(),s.preventDefault()):(d.focus(),s.preventDefault())}),ke(this,"update",()=>{if(this.enabled){let s;s=this.forceFallback?"Fallback (forced)":ai.native?"Native":"Fallback",this.player.debug.log(`${s} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Qe(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}),ke(this,"enter",()=>{this.enabled&&(zt.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!ai.native||this.forceFallback?this.toggleFallback(!0):this.prefix?R.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),ke(this,"exit",()=>{if(this.enabled)if(zt.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),oi(this.player.play());else if(!ai.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!R.empty(this.prefix)){const s=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${s}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),ke(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=l,this.prefix=ai.prefix,this.property=ai.property,this.scrollPosition={x:0,y:0},this.forceFallback=l.config.fullscreen.fallback==="force",this.player.elements.fullscreen=l.config.fullscreen.container&&Hl(this.player.elements.container,l.config.fullscreen.container),nt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),nt.call(this.player,this.player.elements.container,"dblclick",s=>{R.element(this.player.elements.controls)&&this.player.elements.controls.contains(s.target)||this.player.listeners.proxy(s,this.toggle,"fullscreen")}),nt.call(this,this.player.elements.container,"keydown",s=>this.trapFocus(s)),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return ai.native&&!this.forceFallback}static get prefix(){if(R.function(document.exitFullscreen))return"";let l="";return["webkit","moz","ms"].some(s=>!(!R.function(document[`${s}ExitFullscreen`])&&!R.function(document[`${s}CancelFullScreen`]))&&(l=s,!0)),l}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get enabled(){return(ai.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!ai.native||this.forceFallback)return lr(this.target,this.player.config.classNames.fullscreen.fallback);const l=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return l&&l.shadowRoot?l===this.target.getRootNode().host:l===this.target}get target(){return zt.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function tr(n,l=1){return new Promise((s,u)=>{const y=new Image,d=()=>{delete y.onload,delete y.onerror,(y.naturalWidth>=l?s:u)(y)};Object.assign(y,{onload:d,onerror:d,src:n})})}const ut={addStyleHook(){Qe(this.elements.container,this.config.selectors.container.replace(".",""),!0),Qe(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(n=!1){n&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void ut.toggleNativeControls.call(this,!0);R.element(this.elements.controls)||(Se.inject.call(this),this.listeners.controls()),ut.toggleNativeControls.call(this),this.isHTML5&&st.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Se.updateVolume.call(this),Se.timeUpdate.call(this),Se.durationUpdate.call(this),ut.checkPlaying.call(this),Qe(this.elements.container,this.config.classNames.pip.supported,_t.pip&&this.isHTML5&&this.isVideo),Qe(this.elements.container,this.config.classNames.airplay.supported,_t.airplay&&this.isHTML5),Qe(this.elements.container,this.config.classNames.isIos,zt.isIos),Qe(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{qe.call(this,this.media,"ready")},0),ut.setTitle.call(this),this.poster&&ut.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Se.durationUpdate.call(this),this.config.mediaMetadata&&Se.setMediaMetadata.call(this)},setTitle(){let n=It.get("play",this.config);if(R.string(this.config.title)&&!R.empty(this.config.title)&&(n+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(l=>{l.setAttribute("aria-label",n)}),this.isEmbed){const l=Et.call(this,"iframe");if(!R.element(l))return;const s=R.empty(this.config.title)?"video":this.config.title,u=It.get("frameTitle",this.config);l.setAttribute("title",u.replace("{title}",s))}},togglePoster(n){Qe(this.elements.container,this.config.classNames.posterEnabled,n)},setPoster(n,l=!0){return l&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",n),this.elements.poster.removeAttribute("hidden"),Wl.call(this).then(()=>tr(n)).catch(s=>{throw n===this.poster&&ut.togglePoster.call(this,!1),s}).then(()=>{if(n!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${n}')`,backgroundSize:""}),ut.togglePoster.call(this,!0),n)))},checkPlaying(n){Qe(this.elements.container,this.config.classNames.playing,this.playing),Qe(this.elements.container,this.config.classNames.paused,this.paused),Qe(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(l=>{Object.assign(l,{pressed:this.playing}),l.setAttribute("aria-label",It.get(this.playing?"pause":"play",this.config))}),R.event(n)&&n.type==="timeupdate"||ut.toggleControls.call(this)},checkLoading(n){this.loading=["stalled","waiting"].includes(n.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Qe(this.elements.container,this.config.classNames.loading,this.loading),ut.toggleControls.call(this)},this.loading?250:0)},toggleControls(n){const{controls:l}=this.elements;if(l&&this.config.hideControls){const s=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(n||this.loading||this.paused||l.pressed||l.hover||s))}},migrateStyles(){Object.values({...this.media.style}).filter(n=>!R.empty(n)&&R.string(n)&&n.startsWith("--plyr")).forEach(n=>{this.elements.container.style.setProperty(n,this.media.style.getPropertyValue(n)),this.media.style.removeProperty(n)}),R.empty(this.media.style)&&this.media.removeAttribute("style")}};class iu{constructor(l){ke(this,"firstTouch",()=>{const{player:s}=this,{elements:u}=s;s.touch=!0,Qe(u.container,s.config.classNames.isTouch,!0)}),ke(this,"setTabFocus",s=>{const{player:u}=this,{elements:y}=u,{key:d,type:S,timeStamp:M}=s;if(clearTimeout(this.focusTimer),S==="keydown"&&d!=="Tab")return;S==="keydown"&&(this.lastKeyDown=M);const q=M-this.lastKeyDown<=20;(S!=="focus"||q)&&((()=>{const j=u.config.classNames.tabFocus;Qe(Ji.call(u,`.${j}`),j,!1)})(),S!=="focusout"&&(this.focusTimer=setTimeout(()=>{const j=document.activeElement;y.container.contains(j)&&Qe(document.activeElement,u.config.classNames.tabFocus,!0)},10)))}),ke(this,"global",(s=!0)=>{const{player:u}=this;u.config.keyboard.global&&Qi.call(u,window,"keydown keyup",this.handleKey,s,!1),Qi.call(u,document.body,"click",this.toggleMenu,s),_s.call(u,document.body,"touchstart",this.firstTouch),Qi.call(u,document.body,"keydown focus blur focusout",this.setTabFocus,s,!1,!0)}),ke(this,"container",()=>{const{player:s}=this,{config:u,elements:y,timers:d}=s;!u.keyboard.global&&u.keyboard.focused&&nt.call(s,y.container,"keydown keyup",this.handleKey,!1),nt.call(s,y.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",q=>{const{controls:j}=y;j&&q.type==="enterfullscreen"&&(j.pressed=!1,j.hover=!1);let G=0;["touchstart","touchmove","mousemove"].includes(q.type)&&(ut.toggleControls.call(s,!0),G=s.touch?3e3:2e3),clearTimeout(d.controls),d.controls=setTimeout(()=>ut.toggleControls.call(s,!1),G)});const S=()=>{if(!s.isVimeo||s.config.vimeo.premium)return;const q=y.wrapper,{active:j}=s.fullscreen,[G,K]=vs.call(s),$=Ha(`aspect-ratio: ${G} / ${K}`);if(!j)return void($?(q.style.width=null,q.style.height=null):(q.style.maxWidth=null,q.style.margin=null));const[L,ee]=$l(),H=L/ee>G/K;$?(q.style.width=H?"auto":"100%",q.style.height=H?"100%":"auto"):(q.style.maxWidth=H?ee/K*G+"px":null,q.style.margin=H?"0 auto":null)},M=()=>{clearTimeout(d.resized),d.resized=setTimeout(S,50)};nt.call(s,y.container,"enterfullscreen exitfullscreen",q=>{const{target:j}=s.fullscreen;j===y.container&&(!s.isEmbed&&R.empty(s.config.ratio)||(S(),(q.type==="enterfullscreen"?nt:mr).call(s,window,"resize",M)))})}),ke(this,"media",()=>{const{player:s}=this,{elements:u}=s;if(nt.call(s,s.media,"timeupdate seeking seeked",d=>Se.timeUpdate.call(s,d)),nt.call(s,s.media,"durationchange loadeddata loadedmetadata",d=>Se.durationUpdate.call(s,d)),nt.call(s,s.media,"ended",()=>{s.isHTML5&&s.isVideo&&s.config.resetOnEnd&&(s.restart(),s.pause())}),nt.call(s,s.media,"progress playing seeking seeked",d=>Se.updateProgress.call(s,d)),nt.call(s,s.media,"volumechange",d=>Se.updateVolume.call(s,d)),nt.call(s,s.media,"playing play pause ended emptied timeupdate",d=>ut.checkPlaying.call(s,d)),nt.call(s,s.media,"waiting canplay seeked playing",d=>ut.checkLoading.call(s,d)),s.supported.ui&&s.config.clickToPlay&&!s.isAudio){const d=Et.call(s,`.${s.config.classNames.video}`);if(!R.element(d))return;nt.call(s,u.container,"click",S=>{([u.container,d].includes(S.target)||d.contains(S.target))&&(s.touch&&s.config.hideControls||(s.ended?(this.proxy(S,s.restart,"restart"),this.proxy(S,()=>{oi(s.play())},"play")):this.proxy(S,()=>{oi(s.togglePlay())},"play")))})}s.supported.ui&&s.config.disableContextMenu&&nt.call(s,u.wrapper,"contextmenu",d=>{d.preventDefault()},!1),nt.call(s,s.media,"volumechange",()=>{s.storage.set({volume:s.volume,muted:s.muted})}),nt.call(s,s.media,"ratechange",()=>{Se.updateSetting.call(s,"speed"),s.storage.set({speed:s.speed})}),nt.call(s,s.media,"qualitychange",d=>{Se.updateSetting.call(s,"quality",null,d.detail.quality)}),nt.call(s,s.media,"ready qualitychange",()=>{Se.setDownloadUrl.call(s)});const y=s.config.events.concat(["keyup","keydown"]).join(" ");nt.call(s,s.media,y,d=>{let{detail:S={}}=d;d.type==="error"&&(S=s.media.error),qe.call(s,u.container,d.type,!0,S)})}),ke(this,"proxy",(s,u,y)=>{const{player:d}=this,S=d.config.listeners[y];let M=!0;R.function(S)&&(M=S.call(d,s)),M!==!1&&R.function(u)&&u.call(d,s)}),ke(this,"bind",(s,u,y,d,S=!0)=>{const{player:M}=this,q=M.config.listeners[d],j=R.function(q);nt.call(M,s,u,G=>this.proxy(G,y,d),S&&!j)}),ke(this,"controls",()=>{const{player:s}=this,{elements:u}=s,y=zt.isIE?"change":"input";if(u.buttons.play&&Array.from(u.buttons.play).forEach(d=>{this.bind(d,"click",()=>{oi(s.togglePlay())},"play")}),this.bind(u.buttons.restart,"click",s.restart,"restart"),this.bind(u.buttons.rewind,"click",()=>{s.lastSeekTime=Date.now(),s.rewind()},"rewind"),this.bind(u.buttons.fastForward,"click",()=>{s.lastSeekTime=Date.now(),s.forward()},"fastForward"),this.bind(u.buttons.mute,"click",()=>{s.muted=!s.muted},"mute"),this.bind(u.buttons.captions,"click",()=>s.toggleCaptions()),this.bind(u.buttons.download,"click",()=>{qe.call(s,s.media,"download")},"download"),this.bind(u.buttons.fullscreen,"click",()=>{s.fullscreen.toggle()},"fullscreen"),this.bind(u.buttons.pip,"click",()=>{s.pip="toggle"},"pip"),this.bind(u.buttons.airplay,"click",s.airplay,"airplay"),this.bind(u.buttons.settings,"click",d=>{d.stopPropagation(),d.preventDefault(),Se.toggleMenu.call(s,d)},null,!1),this.bind(u.buttons.settings,"keyup",d=>{["Space","Enter"].includes(d.key)&&(d.key!=="Enter"?(d.preventDefault(),d.stopPropagation(),Se.toggleMenu.call(s,d)):Se.focusFirstMenuItem.call(s,null,!0))},null,!1),this.bind(u.settings.menu,"keydown",d=>{d.key==="Escape"&&Se.toggleMenu.call(s,d)}),this.bind(u.inputs.seek,"mousedown mousemove",d=>{const S=u.progress.getBoundingClientRect(),M=100/S.width*(d.pageX-S.left);d.currentTarget.setAttribute("seek-value",M)}),this.bind(u.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",d=>{const S=d.currentTarget,M="play-on-seeked";if(R.keyboardEvent(d)&&!["ArrowLeft","ArrowRight"].includes(d.key))return;s.lastSeekTime=Date.now();const q=S.hasAttribute(M),j=["mouseup","touchend","keyup"].includes(d.type);q&&j?(S.removeAttribute(M),oi(s.play())):!j&&s.playing&&(S.setAttribute(M,""),s.pause())}),zt.isIos){const d=Ji.call(s,'input[type="range"]');Array.from(d).forEach(S=>this.bind(S,y,M=>Ba(M.target)))}this.bind(u.inputs.seek,y,d=>{const S=d.currentTarget;let M=S.getAttribute("seek-value");R.empty(M)&&(M=S.value),S.removeAttribute("seek-value"),s.currentTime=M/S.max*s.duration},"seek"),this.bind(u.progress,"mouseenter mouseleave mousemove",d=>Se.updateSeekTooltip.call(s,d)),this.bind(u.progress,"mousemove touchmove",d=>{const{previewThumbnails:S}=s;S&&S.loaded&&S.startMove(d)}),this.bind(u.progress,"mouseleave touchend click",()=>{const{previewThumbnails:d}=s;d&&d.loaded&&d.endMove(!1,!0)}),this.bind(u.progress,"mousedown touchstart",d=>{const{previewThumbnails:S}=s;S&&S.loaded&&S.startScrubbing(d)}),this.bind(u.progress,"mouseup touchend",d=>{const{previewThumbnails:S}=s;S&&S.loaded&&S.endScrubbing(d)}),zt.isWebkit&&Array.from(Ji.call(s,'input[type="range"]')).forEach(d=>{this.bind(d,"input",S=>Se.updateRangeFill.call(s,S.target))}),s.config.toggleInvert&&!R.element(u.display.duration)&&this.bind(u.display.currentTime,"click",()=>{s.currentTime!==0&&(s.config.invertTime=!s.config.invertTime,Se.timeUpdate.call(s))}),this.bind(u.inputs.volume,y,d=>{s.volume=d.target.value},"volume"),this.bind(u.controls,"mouseenter mouseleave",d=>{u.controls.hover=!s.touch&&d.type==="mouseenter"}),u.fullscreen&&Array.from(u.fullscreen.children).filter(d=>!d.contains(u.container)).forEach(d=>{this.bind(d,"mouseenter mouseleave",S=>{u.controls&&(u.controls.hover=!s.touch&&S.type==="mouseenter")})}),this.bind(u.controls,"mousedown mouseup touchstart touchend touchcancel",d=>{u.controls.pressed=["mousedown","touchstart"].includes(d.type)}),this.bind(u.controls,"focusin",()=>{const{config:d,timers:S}=s;Qe(u.controls,d.classNames.noTransition,!0),ut.toggleControls.call(s,!0),setTimeout(()=>{Qe(u.controls,d.classNames.noTransition,!1)},0);const M=this.touch?3e3:4e3;clearTimeout(S.controls),S.controls=setTimeout(()=>ut.toggleControls.call(s,!1),M)}),this.bind(u.inputs.volume,"wheel",d=>{const S=d.webkitDirectionInvertedFromDevice,[M,q]=[d.deltaX,-d.deltaY].map(K=>S?-K:K),j=Math.sign(Math.abs(M)>Math.abs(q)?M:q);s.increaseVolume(j/50);const{volume:G}=s.media;(j===1&&G<1||j===-1&&G>0)&&d.preventDefault()},"volume",!1)}),this.player=l,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(l){const{player:s}=this,{elements:u}=s,{key:y,type:d,altKey:S,ctrlKey:M,metaKey:q,shiftKey:j}=l,G=d==="keydown",K=G&&y===this.lastKey;if(!(S||M||q||j)&&!!y){if(G){const L=document.activeElement;if(R.element(L)){const{editable:ee}=s.config.selectors,{seek:H}=u.inputs;if(L!==H&&Bi(L,ee)||l.key==="Space"&&Bi(L,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(y)&&(l.preventDefault(),l.stopPropagation()),y){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":K||($=parseInt(y,10),s.currentTime=s.duration/10*$);break;case"Space":case"k":K||oi(s.togglePlay());break;case"ArrowUp":s.increaseVolume(.1);break;case"ArrowDown":s.decreaseVolume(.1);break;case"m":K||(s.muted=!s.muted);break;case"ArrowRight":s.forward();break;case"ArrowLeft":s.rewind();break;case"f":s.fullscreen.toggle();break;case"c":K||s.toggleCaptions();break;case"l":s.loop=!s.loop}y==="Escape"&&!s.fullscreen.usingNative&&s.fullscreen.active&&s.fullscreen.toggle(),this.lastKey=y}else this.lastKey=null;var $}}toggleMenu(l){Se.toggleMenu.call(this.player,l)}}function nu(n,l){return n(l={exports:{}},l.exports),l.exports}var ru=nu(function(n,l){n.exports=function(){var s=function(){},u={},y={},d={};function S($,L){$=$.push?$:[$];var ee,H,te,X=[],J=$.length,re=J;for(ee=function(ge,Le){Le.length&&X.push(ge),--re||L(X)};J--;)H=$[J],(te=y[H])?ee(H,te):(d[H]=d[H]||[]).push(ee)}function M($,L){if($){var ee=d[$];if(y[$]=L,ee)for(;ee.length;)ee[0]($,L),ee.splice(0,1)}}function q($,L){$.call&&($={success:$}),L.length?($.error||s)(L):($.success||s)($)}function j($,L,ee,H){var te,X,J=document,re=ee.async,ge=(ee.numRetries||0)+1,Le=ee.before||s,ce=$.replace(/[\?|#].*$/,""),_e=$.replace(/^(css|img)!/,"");H=H||0,/(^css!|\.css$)/.test(ce)?((X=J.createElement("link")).rel="stylesheet",X.href=_e,(te="hideFocus"in X)&&X.relList&&(te=0,X.rel="preload",X.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(ce)?(X=J.createElement("img")).src=_e:((X=J.createElement("script")).src=$,X.async=re===void 0||re),X.onload=X.onerror=X.onbeforeload=function(ze){var xe=ze.type[0];if(te)try{X.sheet.cssText.length||(xe="e")}catch(Ne){Ne.code!=18&&(xe="e")}if(xe=="e"){if((H+=1)<ge)return j($,L,ee,H)}else if(X.rel=="preload"&&X.as=="style")return X.rel="stylesheet";L($,xe,ze.defaultPrevented)},Le($,X)!==!1&&J.head.appendChild(X)}function G($,L,ee){var H,te,X=($=$.push?$:[$]).length,J=X,re=[];for(H=function(ge,Le,ce){if(Le=="e"&&re.push(ge),Le=="b"){if(!ce)return;re.push(ge)}--X||L(re)},te=0;te<J;te++)j($[te],H,ee)}function K($,L,ee){var H,te;if(L&&L.trim&&(H=L),te=(H?ee:L)||{},H){if(H in u)throw"LoadJS";u[H]=!0}function X(J,re){G($,function(ge){q(te,ge),J&&q({success:J,error:re},ge),M(H,ge)},te)}if(te.returnPromise)return new Promise(X);X()}return K.ready=function($,L){return S($,function(ee){q(L,ee)}),K},K.done=function($){M($,[])},K.reset=function(){u={},y={},d={}},K.isDefined=function($){return $ in u},K}()});function ys(n){return new Promise((l,s)=>{ru(n,{success:l,error:s})})}function su(n){return R.empty(n)?null:R.number(Number(n))?n:n.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:n}function au(n){const l=n.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return l&&l.length===5?l[4]:null}function wn(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,qe.call(this,this.media,n?"play":"pause"))}const ss={setup(){const n=this;Qe(n.elements.wrapper,n.config.classNames.embed,!0),n.options.speed=n.config.speed.options,nn.call(n),R.object(window.Vimeo)?ss.ready.call(n):ys(n.config.urls.vimeo.sdk).then(()=>{ss.ready.call(n)}).catch(l=>{n.debug.warn("Vimeo SDK (player.js) failed to load",l)})},ready(){const n=this,l=n.config.vimeo,{premium:s,referrerPolicy:u,...y}=l;let d=n.media.getAttribute("src"),S="";R.empty(d)?(d=n.media.getAttribute(n.config.attributes.embed.id),S=n.media.getAttribute(n.config.attributes.embed.hash)):S=au(d);const M=S?{h:S}:{};s&&Object.assign(y,{controls:!1,sidedock:!1});const q=Za({loop:n.config.loop.active,autoplay:n.autoplay,muted:n.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...M,...y}),j=su(d),G=Fe("iframe"),K=rs(n.config.urls.vimeo.iframe,j,q);if(G.setAttribute("src",K),G.setAttribute("allowfullscreen",""),G.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),R.empty(u)||G.setAttribute("referrerPolicy",u),s||!l.customControls)G.setAttribute("data-poster",n.poster),n.media=or(G,n.media);else{const J=Fe("div",{class:n.config.classNames.embedContainer,"data-poster":n.poster});J.appendChild(G),n.media=or(J,n.media)}l.customControls||Nn(rs(n.config.urls.vimeo.api,K)).then(J=>{!R.empty(J)&&J.thumbnail_url&&ut.setPoster.call(n,J.thumbnail_url).catch(()=>{})}),n.embed=new window.Vimeo.Player(G,{autopause:n.config.autopause,muted:n.muted}),n.media.paused=!0,n.media.currentTime=0,n.supported.ui&&n.embed.disableTextTrack(),n.media.play=()=>(wn.call(n,!0),n.embed.play()),n.media.pause=()=>(wn.call(n,!1),n.embed.pause()),n.media.stop=()=>{n.pause(),n.currentTime=0};let{currentTime:$}=n.media;Object.defineProperty(n.media,"currentTime",{get:()=>$,set(J){const{embed:re,media:ge,paused:Le,volume:ce}=n,_e=Le&&!re.hasPlayed;ge.seeking=!0,qe.call(n,ge,"seeking"),Promise.resolve(_e&&re.setVolume(0)).then(()=>re.setCurrentTime(J)).then(()=>_e&&re.pause()).then(()=>_e&&re.setVolume(ce)).catch(()=>{})}});let L=n.config.speed.selected;Object.defineProperty(n.media,"playbackRate",{get:()=>L,set(J){n.embed.setPlaybackRate(J).then(()=>{L=J,qe.call(n,n.media,"ratechange")}).catch(()=>{n.options.speed=[1]})}});let{volume:ee}=n.config;Object.defineProperty(n.media,"volume",{get:()=>ee,set(J){n.embed.setVolume(J).then(()=>{ee=J,qe.call(n,n.media,"volumechange")})}});let{muted:H}=n.config;Object.defineProperty(n.media,"muted",{get:()=>H,set(J){const re=!!R.boolean(J)&&J;n.embed.setVolume(re?0:n.config.volume).then(()=>{H=re,qe.call(n,n.media,"volumechange")})}});let te,{loop:X}=n.config;Object.defineProperty(n.media,"loop",{get:()=>X,set(J){const re=R.boolean(J)?J:n.config.loop.active;n.embed.setLoop(re).then(()=>{X=re})}}),n.embed.getVideoUrl().then(J=>{te=J,Se.setDownloadUrl.call(n)}).catch(J=>{this.debug.warn(J)}),Object.defineProperty(n.media,"currentSrc",{get:()=>te}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration}),Promise.all([n.embed.getVideoWidth(),n.embed.getVideoHeight()]).then(J=>{const[re,ge]=J;n.embed.ratio=ja(re,ge),nn.call(this)}),n.embed.setAutopause(n.config.autopause).then(J=>{n.config.autopause=J}),n.embed.getVideoTitle().then(J=>{n.config.title=J,ut.setTitle.call(this)}),n.embed.getCurrentTime().then(J=>{$=J,qe.call(n,n.media,"timeupdate")}),n.embed.getDuration().then(J=>{n.media.duration=J,qe.call(n,n.media,"durationchange")}),n.embed.getTextTracks().then(J=>{n.media.textTracks=J,st.setup.call(n)}),n.embed.on("cuechange",({cues:J=[]})=>{const re=J.map(ge=>Xl(ge.text));st.updateCues.call(n,re)}),n.embed.on("loaded",()=>{n.embed.getPaused().then(J=>{wn.call(n,!J),J||qe.call(n,n.media,"playing")}),R.element(n.embed.element)&&n.supported.ui&&n.embed.element.setAttribute("tabindex",-1)}),n.embed.on("bufferstart",()=>{qe.call(n,n.media,"waiting")}),n.embed.on("bufferend",()=>{qe.call(n,n.media,"playing")}),n.embed.on("play",()=>{wn.call(n,!0),qe.call(n,n.media,"playing")}),n.embed.on("pause",()=>{wn.call(n,!1)}),n.embed.on("timeupdate",J=>{n.media.seeking=!1,$=J.seconds,qe.call(n,n.media,"timeupdate")}),n.embed.on("progress",J=>{n.media.buffered=J.percent,qe.call(n,n.media,"progress"),parseInt(J.percent,10)===1&&qe.call(n,n.media,"canplaythrough"),n.embed.getDuration().then(re=>{re!==n.media.duration&&(n.media.duration=re,qe.call(n,n.media,"durationchange"))})}),n.embed.on("seeked",()=>{n.media.seeking=!1,qe.call(n,n.media,"seeked")}),n.embed.on("ended",()=>{n.media.paused=!0,qe.call(n,n.media,"ended")}),n.embed.on("error",J=>{n.media.error=J,qe.call(n,n.media,"error")}),l.customControls&&setTimeout(()=>ut.build.call(n),0)}};function ou(n){return R.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n}function xn(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,qe.call(this,this.media,n?"play":"pause"))}function lu(n){return n.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const ir={setup(){if(Qe(this.elements.wrapper,this.config.classNames.embed,!0),R.object(window.YT)&&R.function(window.YT.Player))ir.ready.call(this);else{const n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{R.function(n)&&n(),ir.ready.call(this)},ys(this.config.urls.youtube.sdk).catch(l=>{this.debug.warn("YouTube API failed to load",l)})}},getTitle(n){Nn(rs(this.config.urls.youtube.api,n)).then(l=>{if(R.object(l)){const{title:s,height:u,width:y}=l;this.config.title=s,ut.setTitle.call(this),this.embed.ratio=ja(y,u)}nn.call(this)}).catch(()=>{nn.call(this)})},ready(){const n=this,l=n.config.youtube,s=n.media&&n.media.getAttribute("id");if(!R.empty(s)&&s.startsWith("youtube-"))return;let u=n.media.getAttribute("src");R.empty(u)&&(u=n.media.getAttribute(this.config.attributes.embed.id));const y=ou(u),d=Fe("div",{id:Gl(n.provider),"data-poster":l.customControls?n.poster:void 0});if(n.media=or(d,n.media),l.customControls){const S=M=>`https://i.ytimg.com/vi/${y}/${M}default.jpg`;tr(S("maxres"),121).catch(()=>tr(S("sd"),121)).catch(()=>tr(S("hq"))).then(M=>ut.setPoster.call(n,M.src)).then(M=>{M.includes("maxres")||(n.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}n.embed=new window.YT.Player(n.media,{videoId:y,host:lu(l),playerVars:wt({},{autoplay:n.config.autoplay?1:0,hl:n.config.hl,controls:n.supported.ui&&l.customControls?0:1,disablekb:1,playsinline:n.config.fullscreen.iosNative?0:1,cc_load_policy:n.captions.active?1:0,cc_lang_pref:n.config.captions.language,widget_referrer:window?window.location.href:null},l),events:{onError(S){if(!n.media.error){const M=S.data,q={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[M]||"An unknown error occured";n.media.error={code:M,message:q},qe.call(n,n.media,"error")}},onPlaybackRateChange(S){const M=S.target;n.media.playbackRate=M.getPlaybackRate(),qe.call(n,n.media,"ratechange")},onReady(S){if(R.function(n.media.play))return;const M=S.target;ir.getTitle.call(n,y),n.media.play=()=>{xn.call(n,!0),M.playVideo()},n.media.pause=()=>{xn.call(n,!1),M.pauseVideo()},n.media.stop=()=>{M.stopVideo()},n.media.duration=M.getDuration(),n.media.paused=!0,n.media.currentTime=0,Object.defineProperty(n.media,"currentTime",{get:()=>Number(M.getCurrentTime()),set(K){n.paused&&!n.embed.hasPlayed&&n.embed.mute(),n.media.seeking=!0,qe.call(n,n.media,"seeking"),M.seekTo(K)}}),Object.defineProperty(n.media,"playbackRate",{get:()=>M.getPlaybackRate(),set(K){M.setPlaybackRate(K)}});let{volume:q}=n.config;Object.defineProperty(n.media,"volume",{get:()=>q,set(K){q=K,M.setVolume(100*q),qe.call(n,n.media,"volumechange")}});let{muted:j}=n.config;Object.defineProperty(n.media,"muted",{get:()=>j,set(K){const $=R.boolean(K)?K:j;j=$,M[$?"mute":"unMute"](),M.setVolume(100*q),qe.call(n,n.media,"volumechange")}}),Object.defineProperty(n.media,"currentSrc",{get:()=>M.getVideoUrl()}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration});const G=M.getAvailablePlaybackRates();n.options.speed=G.filter(K=>n.config.speed.options.includes(K)),n.supported.ui&&l.customControls&&n.media.setAttribute("tabindex",-1),qe.call(n,n.media,"timeupdate"),qe.call(n,n.media,"durationchange"),clearInterval(n.timers.buffering),n.timers.buffering=setInterval(()=>{n.media.buffered=M.getVideoLoadedFraction(),(n.media.lastBuffered===null||n.media.lastBuffered<n.media.buffered)&&qe.call(n,n.media,"progress"),n.media.lastBuffered=n.media.buffered,n.media.buffered===1&&(clearInterval(n.timers.buffering),qe.call(n,n.media,"canplaythrough"))},200),l.customControls&&setTimeout(()=>ut.build.call(n),50)},onStateChange(S){const M=S.target;switch(clearInterval(n.timers.playing),n.media.seeking&&[1,2].includes(S.data)&&(n.media.seeking=!1,qe.call(n,n.media,"seeked")),S.data){case-1:qe.call(n,n.media,"timeupdate"),n.media.buffered=M.getVideoLoadedFraction(),qe.call(n,n.media,"progress");break;case 0:xn.call(n,!1),n.media.loop?(M.stopVideo(),M.playVideo()):qe.call(n,n.media,"ended");break;case 1:l.customControls&&!n.config.autoplay&&n.media.paused&&!n.embed.hasPlayed?n.media.pause():(xn.call(n,!0),qe.call(n,n.media,"playing"),n.timers.playing=setInterval(()=>{qe.call(n,n.media,"timeupdate")},50),n.media.duration!==M.getDuration()&&(n.media.duration=M.getDuration(),qe.call(n,n.media,"durationchange")));break;case 2:n.muted||n.embed.unMute(),xn.call(n,!1);break;case 3:qe.call(n,n.media,"waiting")}qe.call(n,n.elements.container,"statechange",!1,{code:S.data})}}})}},Xa={setup(){this.media?(Qe(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Qe(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Qe(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Fe("div",{class:this.config.classNames.video}),Va(this.media,this.elements.wrapper),this.elements.poster=Fe("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Si.setup.call(this):this.isYouTube?ir.setup.call(this):this.isVimeo&&ss.setup.call(this)):this.debug.warn("No media element found!")}};class uu{constructor(l){ke(this,"load",()=>{this.enabled&&(R.object(window.google)&&R.object(window.google.ima)?this.ready():ys(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),ke(this,"ready",()=>{var s;this.enabled||((s=this).manager&&s.manager.destroy(),s.elements.displayContainer&&s.elements.displayContainer.destroy(),s.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),ke(this,"setupIMA",()=>{this.elements.container=Fe("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,s=>this.onAdsManagerLoaded(s),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s),!1),this.requestAds()}),ke(this,"requestAds",()=>{const{container:s}=this.player.elements;try{const u=new google.ima.AdsRequest;u.adTagUrl=this.tagUrl,u.linearAdSlotWidth=s.offsetWidth,u.linearAdSlotHeight=s.offsetHeight,u.nonLinearAdSlotWidth=s.offsetWidth,u.nonLinearAdSlotHeight=s.offsetHeight,u.forceNonLinearFullSlot=!1,u.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(u)}catch(u){this.onAdError(u)}}),ke(this,"pollCountdown",(s=!1)=>{if(!s)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const u=_r(Math.max(this.manager.getRemainingTime(),0)),y=`${It.get("advertisement",this.player.config)} - ${u}`;this.elements.container.setAttribute("data-badge-text",y)},100)}),ke(this,"onAdsManagerLoaded",s=>{if(!this.enabled)return;const u=new google.ima.AdsRenderingSettings;u.restoreCustomPlaybackStateOnAdBreakComplete=!0,u.enablePreloading=!0,this.manager=s.getAdsManager(this.player,u),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,y=>this.onAdError(y)),Object.keys(google.ima.AdEvent.Type).forEach(y=>{this.manager.addEventListener(google.ima.AdEvent.Type[y],d=>this.onAdEvent(d))}),this.trigger("loaded")}),ke(this,"addCuePoints",()=>{R.empty(this.cuePoints)||this.cuePoints.forEach(s=>{if(s!==0&&s!==-1&&s<this.player.duration){const u=this.player.elements.progress;if(R.element(u)){const y=100/this.player.duration*s,d=Fe("span",{class:this.player.config.classNames.cues});d.style.left=`${y.toString()}%`,u.appendChild(d)}}})}),ke(this,"onAdEvent",s=>{const{container:u}=this.player.elements,y=s.getAd(),d=s.getAdData();switch((S=>{qe.call(this.player,this.player.media,`ads${S.replace(/_/g,"").toLowerCase()}`)})(s.type),s.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),y.isLinear()||(y.width=u.offsetWidth,y.height=u.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:d.adError&&this.player.debug.warn(`Non-fatal ad error: ${d.adError.getMessage()}`)}}),ke(this,"onAdError",s=>{this.cancel(),this.player.debug.warn("Ads error",s)}),ke(this,"listeners",()=>{const{container:s}=this.player.elements;let u;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{u=this.player.currentTime}),this.player.on("seeked",()=>{const y=this.player.currentTime;R.empty(this.cuePoints)||this.cuePoints.forEach((d,S)=>{u<d&&d<y&&(this.manager.discardAdBreak(),this.cuePoints.splice(S,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(s.offsetWidth,s.offsetHeight,google.ima.ViewMode.NORMAL)})}),ke(this,"play",()=>{const{container:s}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(s.offsetWidth,s.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(u){this.onAdError(u)}}).catch(()=>{})}),ke(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,oi(this.player.media.play())}),ke(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),ke(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),ke(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(s=>{this.on("loaded",s),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),ke(this,"trigger",(s,...u)=>{const y=this.events[s];R.array(y)&&y.forEach(d=>{R.function(d)&&d.apply(this,u)})}),ke(this,"on",(s,u)=>(R.array(this.events[s])||(this.events[s]=[]),this.events[s].push(u),this)),ke(this,"startSafetyTimer",(s,u)=>{this.player.debug.log(`Safety timer invoked from: ${u}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},s)}),ke(this,"clearSafetyTimer",s=>{R.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${s}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=l,this.config=l.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((s,u)=>{this.on("loaded",s),this.on("error",u)}),this.load()}get enabled(){const{config:l}=this;return this.player.isHTML5&&this.player.isVideo&&l.enabled&&(!R.empty(l.publisherId)||R.url(l.tagUrl))}get tagUrl(){const{config:l}=this;return R.url(l.tagUrl)?l.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Za({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:l.publisherId})}`}}function Ja(n=0,l=0,s=255){return Math.min(Math.max(n,l),s)}const cu=n=>{const l=[];return n.split(/\r\n\r\n|\n\n|\r\r/).forEach(s=>{const u={};s.split(/\r\n|\n|\r/).forEach(y=>{if(R.number(u.startTime)){if(!R.empty(y.trim())&&R.empty(u.text)){const d=y.trim().split("#xywh=");[u.text]=d,d[1]&&([u.x,u.y,u.w,u.h]=d[1].split(","))}}else{const d=y.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);d&&(u.startTime=60*Number(d[1]||0)*60+60*Number(d[2])+Number(d[3])+Number(`0.${d[4]}`),u.endTime=60*Number(d[6]||0)*60+60*Number(d[7])+Number(d[8])+Number(`0.${d[9]}`))}}),u.text&&l.push(u)}),l},ca=(n,l)=>{const s={};return n>l.width/l.height?(s.width=l.width,s.height=1/n*l.width):(s.height=l.height,s.width=n*l.height),s};class as{constructor(l){ke(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)})}),ke(this,"getThumbnails",()=>new Promise(s=>{const{src:u}=this.player.config.previewThumbnails;if(R.empty(u))throw new Error("Missing previewThumbnails.src config attribute");const y=()=>{this.thumbnails.sort((d,S)=>d.height-S.height),this.player.debug.log("Preview thumbnails",this.thumbnails),s()};if(R.function(u))u(d=>{this.thumbnails=d,y()});else{const d=(R.string(u)?[u]:u).map(S=>this.getThumbnail(S));Promise.all(d).then(y)}})),ke(this,"getThumbnail",s=>new Promise(u=>{Nn(s).then(y=>{const d={frames:cu(y),height:null,urlPrefix:""};d.frames[0].text.startsWith("/")||d.frames[0].text.startsWith("http://")||d.frames[0].text.startsWith("https://")||(d.urlPrefix=s.substring(0,s.lastIndexOf("/")+1));const S=new Image;S.onload=()=>{d.height=S.naturalHeight,d.width=S.naturalWidth,this.thumbnails.push(d),u()},S.src=d.urlPrefix+d.frames[0].text})})),ke(this,"startMove",s=>{if(this.loaded&&R.event(s)&&["touchmove","mousemove"].includes(s.type)&&this.player.media.duration){if(s.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var u,y;const d=this.player.elements.progress.getBoundingClientRect(),S=100/d.width*(s.pageX-d.left);this.seekTime=this.player.media.duration*(S/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=s.pageX,this.elements.thumb.time.innerText=_r(this.seekTime);const M=(u=this.player.config.markers)===null||u===void 0||(y=u.points)===null||y===void 0?void 0:y.find(({time:q})=>q===Math.round(this.seekTime));M&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${M.label}<br>`)}this.showImageAtCurrentTime()}}),ke(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),ke(this,"startScrubbing",s=>{(R.nullOrUndefined(s.button)||s.button===!1||s.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),ke(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):_s.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),ke(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),ke(this,"render",()=>{this.elements.thumb.container=Fe("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Fe("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const s=Fe("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Fe("span",{},"00:00"),s.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(s),R.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Fe("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),ke(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),ke(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const s=this.thumbnails[0].frames.findIndex(d=>this.seekTime>=d.startTime&&this.seekTime<=d.endTime),u=s>=0;let y=0;this.mouseDown||this.toggleThumbContainer(u),u&&(this.thumbnails.forEach((d,S)=>{this.loadedImages.includes(d.frames[s].text)&&(y=S)}),s!==this.showingThumb&&(this.showingThumb=s,this.loadImage(y)))}),ke(this,"loadImage",(s=0)=>{const u=this.showingThumb,y=this.thumbnails[s],{urlPrefix:d}=y,S=y.frames[u],M=y.frames[u].text,q=d+M;if(this.currentImageElement&&this.currentImageElement.dataset.filename===M)this.showImage(this.currentImageElement,S,s,u,M,!1),this.currentImageElement.dataset.index=u,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const j=new Image;j.src=q,j.dataset.index=u,j.dataset.filename=M,this.showingThumbFilename=M,this.player.debug.log(`Loading image: ${q}`),j.onload=()=>this.showImage(j,S,s,u,M,!0),this.loadingImage=j,this.removeOldImages(j)}}),ke(this,"showImage",(s,u,y,d,S,M=!0)=>{this.player.debug.log(`Showing thumb: ${S}. num: ${d}. qual: ${y}. newimg: ${M}`),this.setImageSizeAndOffset(s,u),M&&(this.currentImageContainer.appendChild(s),this.currentImageElement=s,this.loadedImages.includes(S)||this.loadedImages.push(S)),this.preloadNearby(d,!0).then(this.preloadNearby(d,!1)).then(this.getHigherQuality(y,s,u,S))}),ke(this,"removeOldImages",s=>{Array.from(this.currentImageContainer.children).forEach(u=>{if(u.tagName.toLowerCase()!=="img")return;const y=this.usingSprites?500:1e3;if(u.dataset.index!==s.dataset.index&&!u.dataset.deleting){u.dataset.deleting=!0;const{currentImageContainer:d}=this;setTimeout(()=>{d.removeChild(u),this.player.debug.log(`Removing thumb: ${u.dataset.filename}`)},y)}})}),ke(this,"preloadNearby",(s,u=!0)=>new Promise(y=>{setTimeout(()=>{const d=this.thumbnails[0].frames[s].text;if(this.showingThumbFilename===d){let S;S=u?this.thumbnails[0].frames.slice(s):this.thumbnails[0].frames.slice(0,s).reverse();let M=!1;S.forEach(q=>{const j=q.text;if(j!==d&&!this.loadedImages.includes(j)){M=!0,this.player.debug.log(`Preloading thumb filename: ${j}`);const{urlPrefix:G}=this.thumbnails[0],K=G+j,$=new Image;$.src=K,$.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${j}`),this.loadedImages.includes(j)||this.loadedImages.push(j),y()}}}),M||y()}},300)})),ke(this,"getHigherQuality",(s,u,y,d)=>{if(s<this.thumbnails.length-1){let S=u.naturalHeight;this.usingSprites&&(S=y.h),S<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===d&&(this.player.debug.log(`Showing higher quality thumb for: ${d}`),this.loadImage(s+1))},300)}}),ke(this,"toggleThumbContainer",(s=!1,u=!1)=>{const y=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(y,s),!s&&u&&(this.showingThumb=null,this.showingThumbFilename=null)}),ke(this,"toggleScrubbingContainer",(s=!1)=>{const u=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(u,s),s||(this.showingThumb=null,this.showingThumbFilename=null)}),ke(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),ke(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:s}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(s.clientHeight>20&&s.clientWidth<20){const u=Math.floor(s.clientHeight*this.thumbAspectRatio);s.style.width=`${u}px`}else if(s.clientHeight<20&&s.clientWidth>20){const u=Math.floor(s.clientWidth/this.thumbAspectRatio);s.style.height=`${u}px`}}else{const u=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);s.style.height=`${this.thumbContainerHeight}px`,s.style.width=`${u}px`}this.setThumbContainerPos()}),ke(this,"setThumbContainerPos",()=>{const s=this.player.elements.progress.getBoundingClientRect(),u=this.player.elements.container.getBoundingClientRect(),{container:y}=this.elements.thumb,d=u.left-s.left+10,S=u.right-s.left-y.clientWidth-10,M=this.mousePosX-s.left-y.clientWidth/2,q=Ja(M,d,S);y.style.left=`${q}px`,y.style.setProperty("--preview-arrow-offset",M-q+"px")}),ke(this,"setScrubbingContainerSize",()=>{const{width:s,height:u}=ca(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${s}px`,this.elements.scrubbing.container.style.height=`${u}px`}),ke(this,"setImageSizeAndOffset",(s,u)=>{if(!this.usingSprites)return;const y=this.thumbContainerHeight/u.h;s.style.height=s.naturalHeight*y+"px",s.style.width=s.naturalWidth*y+"px",s.style.left=`-${u.x*y}px`,s.style.top=`-${u.y*y}px`}),this.player=l,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:l}=ca(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return l}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(l){this.mouseDown?this.currentScrubbingImageElement=l:this.currentThumbnailImageElement=l}}const os={insertElements(n,l){R.string(l)?aa(n,this.media,{src:l}):R.array(l)&&l.forEach(s=>{aa(n,this.media,s)})},change(n){Fa(n,"sources.length")?(Si.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],fi(this.media),this.media=null,R.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:l,type:s}=n,[{provider:u=Ci.html5,src:y}]=l,d=u==="html5"?s:"div",S=u==="html5"?{}:{src:y};Object.assign(this,{provider:u,type:s,supported:_t.check(s,u,this.config.playsinline),media:Fe(d,S)}),this.elements.container.appendChild(this.media),R.boolean(n.autoplay)&&(this.config.autoplay=n.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),R.empty(n.poster)||(this.poster=n.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),ut.addStyleHook.call(this),this.isHTML5&&os.insertElements.call(this,"source",l),this.config.title=n.title,Xa.setup.call(this),this.isHTML5&&Object.keys(n).includes("tracks")&&os.insertElements.call(this,"track",n.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ut.build.call(this),this.isHTML5&&this.media.load(),R.empty(n.previewThumbnails)||(Object.assign(this.config.previewThumbnails,n.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new as(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class rn{constructor(l,s){if(ke(this,"play",()=>R.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>oi(this.media.play())),this.media.play()):null),ke(this,"pause",()=>this.playing&&R.function(this.media.pause)?this.media.pause():null),ke(this,"togglePlay",M=>(R.boolean(M)?M:!this.playing)?this.play():this.pause()),ke(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):R.function(this.media.stop)&&this.media.stop()}),ke(this,"restart",()=>{this.currentTime=0}),ke(this,"rewind",M=>{this.currentTime-=R.number(M)?M:this.config.seekTime}),ke(this,"forward",M=>{this.currentTime+=R.number(M)?M:this.config.seekTime}),ke(this,"increaseVolume",M=>{const q=this.media.muted?0:this.volume;this.volume=q+(R.number(M)?M:0)}),ke(this,"decreaseVolume",M=>{this.increaseVolume(-M)}),ke(this,"airplay",()=>{_t.airplay&&this.media.webkitShowPlaybackTargetPicker()}),ke(this,"toggleControls",M=>{if(this.supported.ui&&!this.isAudio){const q=lr(this.elements.container,this.config.classNames.hideControls),j=M===void 0?void 0:!M,G=Qe(this.elements.container,this.config.classNames.hideControls,j);if(G&&R.array(this.config.controls)&&this.config.controls.includes("settings")&&!R.empty(this.config.settings)&&Se.toggleMenu.call(this,!1),G!==q){const K=G?"controlshidden":"controlsshown";qe.call(this,this.media,K)}return!G}return!1}),ke(this,"on",(M,q)=>{nt.call(this,this.elements.container,M,q)}),ke(this,"once",(M,q)=>{_s.call(this,this.elements.container,M,q)}),ke(this,"off",(M,q)=>{mr(this.elements.container,M,q)}),ke(this,"destroy",(M,q=!1)=>{if(!this.ready)return;const j=()=>{document.body.style.overflow="",this.embed=null,q?(Object.keys(this.elements).length&&(fi(this.elements.buttons.play),fi(this.elements.captions),fi(this.elements.controls),fi(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),R.function(M)&&M()):(jl.call(this),Si.cancelRequests.call(this),or(this.elements.original,this.elements.container),qe.call(this,this.elements.original,"destroyed",!0),R.function(M)&&M.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(ut.toggleNativeControls.call(this,!0),j()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&R.function(this.embed.destroy)&&this.embed.destroy(),j()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(j),setTimeout(j,200))}),ke(this,"supports",M=>_t.mime.call(this,M)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=_t.touch,this.media=l,R.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||R.nodeList(this.media)||R.array(this.media))&&(this.media=this.media[0]),this.config=wt({},Ka,rn.defaults,s||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(M){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new tu(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",_t),R.nullOrUndefined(this.media)||!R.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!_t.check().api)return void this.debug.error("Setup failed: no support");const u=this.media.cloneNode(!0);u.autoplay=!1,this.elements.original=u;const y=this.media.tagName.toLowerCase();let d=null,S=null;switch(y){case"div":if(d=this.media.querySelector("iframe"),R.element(d)){if(S=Ya(d.getAttribute("src")),this.provider=eu(S.toString()),this.elements.container=this.media,this.media=d,this.elements.container.className="",S.search.length){const M=["1","true"];M.includes(S.searchParams.get("autoplay"))&&(this.config.autoplay=!0),M.includes(S.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=M.includes(S.searchParams.get("playsinline")),this.config.youtube.hl=S.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(R.empty(this.provider)||!Object.values(Ci).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Zr.video;break;case"video":case"audio":this.type=y,this.provider=Ci.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=_t.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new iu(this),this.storage=new En(this),this.media.plyr=this,R.element(this.elements.container)||(this.elements.container=Fe("div",{tabindex:0}),Va(this.media,this.elements.container)),ut.migrateStyles.call(this),ut.addStyleHook.call(this),Xa.setup.call(this),this.config.debug&&nt.call(this,this.elements.container,this.config.events.join(" "),M=>{this.debug.log(`event: ${M.type}`)}),this.fullscreen=new ai(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ut.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new uu(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>oi(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new as(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ci.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ci.youtube}get isVimeo(){return this.provider===Ci.vimeo}get isVideo(){return this.type===Zr.video}get isAudio(){return this.type===Zr.audio}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&this.currentTime===0)}get ended(){return Boolean(this.media.ended)}set currentTime(l){if(!this.duration)return;const s=R.number(l)&&l>0;this.media.currentTime=s?Math.min(l,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:l}=this.media;return R.number(l)?l:l&&l.length&&this.duration>0?l.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const l=parseFloat(this.config.duration),s=(this.media||{}).duration,u=R.number(s)&&s!==1/0?s:0;return l||u}set volume(l){let s=l;R.string(s)&&(s=Number(s)),R.number(s)||(s=this.storage.get("volume")),R.number(s)||({volume:s}=this.config),s>1&&(s=1),s<0&&(s=0),this.config.volume=s,this.media.volume=s,!R.empty(l)&&this.muted&&s>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(l){let s=l;R.boolean(s)||(s=this.storage.get("muted")),R.boolean(s)||(s=this.config.muted),this.config.muted=s,this.media.muted=s}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(l){let s=null;R.number(l)&&(s=l),R.number(s)||(s=this.storage.get("speed")),R.number(s)||(s=this.config.speed.selected);const{minimumSpeed:u,maximumSpeed:y}=this;s=Ja(s,u,y),this.config.speed.selected=s,setTimeout(()=>{this.media&&(this.media.playbackRate=s)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(l){const s=this.config.quality,u=this.options.quality;if(!u.length)return;let y=[!R.empty(l)&&Number(l),this.storage.get("quality"),s.selected,s.default].find(R.number),d=!0;if(!u.includes(y)){const S=qa(u,y);this.debug.warn(`Unsupported quality option: ${y}, using ${S} instead`),y=S,d=!1}s.selected=y,this.media.quality=y,d&&this.storage.set({quality:y})}get quality(){return this.media.quality}set loop(l){const s=R.boolean(l)?l:this.config.loop.active;this.config.loop.active=s,this.media.loop=s}get loop(){return Boolean(this.media.loop)}set source(l){os.change.call(this,l)}get source(){return this.media.currentSrc}get download(){const{download:l}=this.config.urls;return R.url(l)?l:this.source}set download(l){R.url(l)&&(this.config.urls.download=l,Se.setDownloadUrl.call(this))}set poster(l){this.isVideo?ut.setPoster.call(this,l,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const l=ur(vs.call(this));return R.array(l)?l.join(":"):l}set ratio(l){this.isVideo?R.string(l)&&Ua(l)?(this.config.ratio=ur(l),nn.call(this)):this.debug.error(`Invalid aspect ratio specified (${l})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(l){this.config.autoplay=R.boolean(l)?l:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(l){st.toggle.call(this,l,!1)}set currentTrack(l){st.set.call(this,l,!1),st.setup.call(this)}get currentTrack(){const{toggled:l,currentTrack:s}=this.captions;return l?s:-1}set language(l){st.setLanguage.call(this,l,!1)}get language(){return(st.getCurrentTrack.call(this)||{}).language}set pip(l){if(!_t.pip)return;const s=R.boolean(l)?l:!this.pip;R.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(s?Yr.active:Yr.inactive),R.function(this.media.requestPictureInPicture)&&(!this.pip&&s?this.media.requestPictureInPicture():this.pip&&!s&&document.exitPictureInPicture())}get pip(){return _t.pip?R.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Yr.active:null}setPreviewThumbnails(l){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,l),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new as(this))}static supported(l,s,u){return _t.check(l,s,u)}static loadSprite(l,s){return $a(l,s)}static setup(l,s={}){let u=null;return R.string(l)?u=Array.from(document.querySelectorAll(l)):R.nodeList(l)?u=Array.from(l):R.array(l)&&(u=l.filter(R.element)),R.empty(u)?null:u.map(y=>new rn(y,s))}}rn.defaults=Vl(Ka);function ha(n,l){for(var s=0;s<l.length;s++){var u=l[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function hu(n,l,s){return l&&ha(n.prototype,l),s&&ha(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n}/*!
 * Splide.js
 * Version  : 4.0.7
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var da="(prefers-reduced-motion: reduce)",Xi=1,du=2,sn=3,cn=4,Rn=5,nr=6,cr=7,fu={CREATED:Xi,MOUNTED:du,IDLE:sn,MOVING:cn,SCROLLING:Rn,DRAGGING:nr,DESTROYED:cr};function _i(n){n.length=0}function Pi(n,l,s){return Array.prototype.slice.call(n,l,s)}function dt(n){return n.bind.apply(n,[null].concat(Pi(arguments,1)))}var ls=setTimeout,us=function(){};function fa(n){return requestAnimationFrame(n)}function vr(n,l){return typeof l===n}function An(n){return!ws(n)&&vr("object",n)}var bs=Array.isArray,Qa=dt(vr,"function"),Ei=dt(vr,"string"),yr=dt(vr,"undefined");function ws(n){return n===null}function eo(n){return n instanceof HTMLElement}function hn(n){return bs(n)?n:[n]}function ti(n,l){hn(n).forEach(l)}function xs(n,l){return n.indexOf(l)>-1}function rr(n,l){return n.push.apply(n,hn(l)),n}function ki(n,l,s){n&&ti(l,function(u){u&&n.classList[s?"add":"remove"](u)})}function li(n,l){ki(n,Ei(l)?l.split(" "):l,!0)}function Dn(n,l){ti(l,n.appendChild.bind(n))}function Cs(n,l){ti(n,function(s){var u=(l||s).parentNode;u&&u.insertBefore(s,l)})}function Pn(n,l){return eo(n)&&(n.msMatchesSelector||n.matches).call(n,l)}function to(n,l){var s=n?Pi(n.children):[];return l?s.filter(function(u){return Pn(u,l)}):s}function Bn(n,l){return l?to(n,l)[0]:n.firstElementChild}var hr=Object.keys;function Fi(n,l,s){if(n){var u=hr(n);u=s?u.reverse():u;for(var y=0;y<u.length;y++){var d=u[y];if(d!=="__proto__"&&l(n[d],d)===!1)break}}return n}function In(n){return Pi(arguments,1).forEach(function(l){Fi(l,function(s,u){n[u]=l[u]})}),n}function Ti(n){return Pi(arguments,1).forEach(function(l){Fi(l,function(s,u){bs(s)?n[u]=s.slice():An(s)?n[u]=Ti({},An(n[u])?n[u]:{},s):n[u]=s})}),n}function ga(n,l){hn(l||hr(n)).forEach(function(s){delete n[s]})}function ui(n,l){ti(n,function(s){ti(l,function(u){s&&s.removeAttribute(u)})})}function Ze(n,l,s){An(l)?Fi(l,function(u,y){Ze(n,y,u)}):ti(n,function(u){ws(s)||s===""?ui(u,l):u.setAttribute(l,String(s))})}function en(n,l,s){var u=document.createElement(n);return l&&(Ei(l)?li(u,l):Ze(u,l)),s&&Dn(s,u),u}function jt(n,l,s){if(yr(s))return getComputedStyle(n)[l];ws(s)||(n.style[l]=""+s)}function dr(n,l){jt(n,"display",l)}function io(n){n.setActive&&n.setActive()||n.focus({preventScroll:!0})}function ei(n,l){return n.getAttribute(l)}function pa(n,l){return n&&n.classList.contains(l)}function Wt(n){return n.getBoundingClientRect()}function Vi(n){ti(n,function(l){l&&l.parentNode&&l.parentNode.removeChild(l)})}function no(n){return Bn(new DOMParser().parseFromString(n,"text/html").body)}function di(n,l){n.preventDefault(),l&&(n.stopPropagation(),n.stopImmediatePropagation())}function ro(n,l){return n&&n.querySelector(l)}function Ss(n,l){return l?Pi(n.querySelectorAll(l)):[]}function gi(n,l){ki(n,l,!1)}function cs(n){return n.timeStamp}function xi(n){return Ei(n)?n:n?n+"px":""}var Ht="splide",ks="data-"+Ht;function kn(n,l){if(!n)throw new Error("["+Ht+"] "+(l||""))}var an=Math.min,Ln=Math.max,fr=Math.floor,Mn=Math.ceil,Vt=Math.abs;function so(n,l,s){return Vt(n-l)<s}function sr(n,l,s,u){var y=an(l,s),d=Ln(l,s);return u?y<n&&n<d:y<=n&&n<=d}function Cn(n,l,s){var u=an(l,s),y=Ln(l,s);return an(Ln(u,n),y)}function hs(n){return+(n>0)-+(n<0)}function ds(n,l){return ti(l,function(s){n=n.replace("%s",""+s)}),n}function Ts(n){return n<10?"0"+n:""+n}var ma={};function gu(n){return""+n+Ts(ma[n]=(ma[n]||0)+1)}function ao(){var n=[];function l(S,M,q,j){y(S,M,function(G,K,$){var L="addEventListener"in G,ee=L?G.removeEventListener.bind(G,K,q,j):G.removeListener.bind(G,q);L?G.addEventListener(K,q,j):G.addListener(q),n.push([G,K,$,q,ee])})}function s(S,M,q){y(S,M,function(j,G,K){n=n.filter(function($){return $[0]===j&&$[1]===G&&$[2]===K&&(!q||$[3]===q)?($[4](),!1):!0})})}function u(S,M,q){var j,G=!0;return typeof CustomEvent=="function"?j=new CustomEvent(M,{bubbles:G,detail:q}):(j=document.createEvent("CustomEvent"),j.initCustomEvent(M,G,!1,q)),S.dispatchEvent(j),j}function y(S,M,q){ti(S,function(j){j&&ti(M,function(G){G.split(" ").forEach(function(K){var $=K.split(".");q(j,$[0],$[1])})})})}function d(){n.forEach(function(S){S[4]()}),_i(n)}return{bind:l,unbind:s,dispatch:u,destroy:d}}var Ii="mounted",_a="ready",Ai="move",Fn="moved",oo="shifted",lo="click",pu="active",mu="inactive",_u="visible",vu="hidden",uo="slide:keydown",vt="refresh",qt="updated",on="resize",co="resized",yu="drag",bu="dragging",wu="dragged",Es="scroll",dn="scrolled",ho="destroy",xu="arrows:mounted",Cu="arrows:updated",Su="pagination:mounted",ku="pagination:updated",fo="navigation:mounted",go="autoplay:play",Tu="autoplay:playing",po="autoplay:pause",mo="lazyload:loaded";function pt(n){var l=n?n.event.bus:document.createDocumentFragment(),s=ao();function u(d,S){s.bind(l,hn(d).join(" "),function(M){S.apply(S,bs(M.detail)?M.detail:[])})}function y(d){s.dispatch(l,d,Pi(arguments,1))}return n&&n.event.on(ho,s.destroy),In(s,{bus:l,on:u,off:dt(s.unbind,l),emit:y})}function br(n,l,s,u){var y=Date.now,d,S=0,M,q=!0,j=0;function G(){if(!q){if(S=n?an((y()-d)/n,1):1,s&&s(S),S>=1&&(l(),d=y(),u&&++j>=u))return $();fa(G)}}function K(X){!X&&ee(),d=y()-(X?S*n:0),q=!1,fa(G)}function $(){q=!0}function L(){d=y(),S=0,s&&s(S)}function ee(){M&&cancelAnimationFrame(M),S=0,M=0,q=!0}function H(X){n=X}function te(){return q}return{start:K,rewind:L,pause:$,cancel:ee,set:H,isPaused:te}}function Eu(n){var l=n;function s(y){l=y}function u(y){return xs(hn(y),l)}return{set:s,is:u}}function Au(n,l){var s;function u(){s||(s=br(l||0,function(){n(),s=null},null,1),s.start())}return u}function Pu(n,l,s){var u=n.state,y=s.breakpoints||{},d=s.reducedMotion||{},S=ao(),M=[];function q(){var ee=s.mediaQuery==="min";hr(y).sort(function(H,te){return ee?+H-+te:+te-+H}).forEach(function(H){G(y[H],"("+(ee?"min":"max")+"-width:"+H+"px)")}),G(d,da),K()}function j(ee){ee&&S.destroy()}function G(ee,H){var te=matchMedia(H);S.bind(te,"change",K),M.push([ee,te])}function K(){var ee=u.is(cr),H=s.direction,te=M.reduce(function(X,J){return Ti(X,J[1].matches?J[0]:{})},{});ga(s),L(te),s.destroy?n.destroy(s.destroy==="completely"):ee?(j(!0),n.mount()):H!==s.direction&&n.refresh()}function $(ee){matchMedia(da).matches&&(ee?Ti(s,d):ga(s,hr(d)))}function L(ee,H){Ti(s,ee),H&&Ti(Object.getPrototypeOf(s),ee),u.is(Xi)||n.emit(qt,s)}return{setup:q,destroy:j,reduce:$,set:L}}var wr="Arrow",xr=wr+"Left",Cr=wr+"Right",_o=wr+"Up",vo=wr+"Down",va="rtl",Sr="ttb",Xr={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[_o,Cr],ArrowRight:[vo,xr]};function Iu(n,l,s){function u(d,S,M){M=M||s.direction;var q=M===va&&!S?1:M===Sr?0:-1;return Xr[d]&&Xr[d][q]||d.replace(/width|left|right/i,function(j,G){var K=Xr[j.toLowerCase()][q]||j;return G>0?K.charAt(0).toUpperCase()+K.slice(1):K})}function y(d){return d*(s.direction===va?1:-1)}return{resolve:u,orient:y}}var pi="role",tn="tabindex",Lu="disabled",ii="aria-",Vn=ii+"controls",yo=ii+"current",ya=ii+"selected",Gt=ii+"label",As=ii+"labelledby",bo=ii+"hidden",Ps=ii+"orientation",zn=ii+"roledescription",ba=ii+"live",wa=ii+"busy",xa=ii+"atomic",Is=[pi,tn,Lu,Vn,yo,Gt,As,bo,Ps,zn],Jr=Ht,Ca=Ht+"__track",Mu=Ht+"__list",kr=Ht+"__slide",wo=kr+"--clone",zu=kr+"__container",Ls=Ht+"__arrows",Tr=Ht+"__arrow",xo=Tr+"--prev",Co=Tr+"--next",Er=Ht+"__pagination",So=Er+"__page",Ou=Ht+"__progress",Nu=Ou+"__bar",Ru=Ht+"__toggle",Du=Ht+"__spinner",Bu=Ht+"__sr",Fu="is-initialized",qi="is-active",ko="is-prev",To="is-next",fs="is-visible",gs="is-loading",Eo="is-focus-in",Vu=[qi,fs,ko,To,gs,Eo],qu={slide:kr,clone:wo,arrows:Ls,arrow:Tr,prev:xo,next:Co,pagination:Er,page:So,spinner:Du};function Hu(n,l){if(Qa(n.closest))return n.closest(l);for(var s=n;s&&s.nodeType===1&&!Pn(s,l);)s=s.parentElement;return s}var Uu=5,Sa=200,Ao="touchstart mousedown",Qr="touchmove mousemove",es="touchend touchcancel mouseup click";function ju(n,l,s){var u=pt(n),y=u.on,d=u.bind,S=n.root,M=s.i18n,q={},j=[],G=[],K=[],$,L,ee;function H(){re(),ge(),J()}function te(){y(vt,X),y(vt,H),y(qt,J),d(document,Ao+" keydown",function(_e){ee=_e.type==="keydown"},{capture:!0}),d(S,"focusin",function(){ki(S,Eo,!!ee)})}function X(_e){var ze=Is.concat("style");_i(j),gi(S,G),gi($,K),ui([$,L],ze),ui(S,_e?ze:["style",zn])}function J(){gi(S,G),gi($,K),G=ce(Jr),K=ce(Ca),li(S,G),li($,K),Ze(S,Gt,s.label),Ze(S,As,s.labelledby)}function re(){$=Le("."+Ca),L=Bn($,"."+Mu),kn($&&L,"A track/list element is missing."),rr(j,to(L,"."+kr+":not(."+wo+")")),Fi({arrows:Ls,pagination:Er,prev:xo,next:Co,bar:Nu,toggle:Ru},function(_e,ze){q[ze]=Le("."+_e)}),In(q,{root:S,track:$,list:L,slides:j})}function ge(){var _e=S.id||gu(Ht),ze=s.role;S.id=_e,$.id=$.id||_e+"-track",L.id=L.id||_e+"-list",!ei(S,pi)&&S.tagName!=="SECTION"&&ze&&Ze(S,pi,ze),Ze(S,zn,M.carousel),Ze(L,pi,"presentation")}function Le(_e){var ze=ro(S,_e);return ze&&Hu(ze,"."+Jr)===S?ze:void 0}function ce(_e){return[_e+"--"+s.type,_e+"--"+s.direction,s.drag&&_e+"--draggable",s.isNavigation&&_e+"--nav",_e===Jr&&qi]}return In(q,{setup:H,mount:te,destroy:X})}var ln="slide",fn="loop",Ar="fade";function Wu(n,l,s,u){var y=pt(n),d=y.on,S=y.emit,M=y.bind,q=n.Components,j=n.root,G=n.options,K=G.isNavigation,$=G.updateOnMove,L=G.i18n,ee=G.pagination,H=G.slideFocus,te=q.Direction.resolve,X=ei(u,"style"),J=ei(u,Gt),re=s>-1,ge=Bn(u,"."+zu),Le=Ss(u,G.focusableNodes||""),ce;function _e(){re||(u.id=j.id+"-slide"+Ts(l+1),Ze(u,pi,ee?"tabpanel":"group"),Ze(u,zn,L.slide),Ze(u,Gt,J||ds(L.slideLabel,[l+1,n.length]))),ze()}function ze(){M(u,"click",dt(S,lo,fe)),M(u,"keydown",dt(S,uo,fe)),d([Fn,oo,dn],ve),d(fo,Ne),$&&d(Ai,me)}function xe(){ce=!0,y.destroy(),gi(u,Vu),ui(u,Is),Ze(u,"style",X),Ze(u,Gt,J||"")}function Ne(){var ae=n.splides.map(function(Ee){var oe=Ee.splide.Components.Slides.getAt(l);return oe?oe.slide.id:""}).join(" ");Ze(u,Gt,ds(L.slideX,(re?s:l)+1)),Ze(u,Vn,ae),Ze(u,pi,H?"button":""),H&&ui(u,zn)}function me(){ce||ve()}function ve(){if(!ce){var ae=n.index;Oe(),he(),ki(u,ko,l===ae-1),ki(u,To,l===ae+1)}}function Oe(){var ae=ne();ae!==pa(u,qi)&&(ki(u,qi,ae),Ze(u,yo,K&&ae||""),S(ae?pu:mu,fe))}function he(){var ae=Xe(),Ee=!ae&&(!ne()||re);if(n.state.is([cn,Rn])||Ze(u,bo,Ee||""),Ze(Le,tn,Ee?-1:""),H&&Ze(u,tn,Ee?-1:0),ae!==pa(u,fs)&&(ki(u,fs,ae),S(ae?_u:vu,fe)),!ae&&document.activeElement===u){var oe=q.Slides.getAt(n.index);oe&&io(oe.slide)}}function et(ae,Ee,oe){jt(oe&&ge||u,ae,Ee)}function ne(){var ae=n.index;return ae===l||G.cloneStatus&&ae===s}function Xe(){if(n.is(Ar))return ne();var ae=Wt(q.Elements.track),Ee=Wt(u),oe=te("left",!0),we=te("right",!0);return fr(ae[oe])<=Mn(Ee[oe])&&fr(Ee[we])<=Mn(ae[we])}function Ce(ae,Ee){var oe=Vt(ae-l);return!re&&(G.rewind||n.is(fn))&&(oe=an(oe,n.length-oe)),oe<=Ee}var fe={index:l,slideIndex:s,slide:u,container:ge,isClone:re,mount:_e,destroy:xe,update:ve,style:et,isWithin:Ce};return fe}function $u(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=u.bind,M=l.Elements,q=M.slides,j=M.list,G=[];function K(){$(),y(vt,L),y(vt,$),y([Ii,vt],function(){G.sort(function(me,ve){return me.index-ve.index})})}function $(){q.forEach(function(me,ve){H(me,ve,-1)})}function L(){Le(function(me){me.destroy()}),_i(G)}function ee(){Le(function(me){me.update()})}function H(me,ve,Oe){var he=Wu(n,ve,Oe,me);he.mount(),G.push(he)}function te(me){return me?ce(function(ve){return!ve.isClone}):G}function X(me){var ve=l.Controller,Oe=ve.toIndex(me),he=ve.hasFocus()?1:s.perPage;return ce(function(et){return sr(et.index,Oe,Oe+he-1)})}function J(me){return ce(me)[0]}function re(me,ve){ti(me,function(Oe){if(Ei(Oe)&&(Oe=no(Oe)),eo(Oe)){var he=q[ve];he?Cs(Oe,he):Dn(j,Oe),li(Oe,s.classes.slide),ze(Oe,dt(d,on))}}),d(vt)}function ge(me){Vi(ce(me).map(function(ve){return ve.slide})),d(vt)}function Le(me,ve){te(ve).forEach(me)}function ce(me){return G.filter(Qa(me)?me:function(ve){return Ei(me)?Pn(ve.slide,me):xs(hn(me),ve.index)})}function _e(me,ve,Oe){Le(function(he){he.style(me,ve,Oe)})}function ze(me,ve){var Oe=Ss(me,"img"),he=Oe.length;he?Oe.forEach(function(et){S(et,"load error",function(){--he||ve()})}):ve()}function xe(me){return me?q.length:G.length}function Ne(){return G.length>s.perPage}return{mount:K,destroy:L,update:ee,register:H,get:te,getIn:X,getAt:J,add:re,remove:ge,forEach:Le,filter:ce,style:_e,getLength:xe,isEnough:Ne}}function Gu(n,l,s){var u=pt(n),y=u.on,d=u.bind,S=u.emit,M=l.Slides,q=l.Direction.resolve,j=l.Elements,G=j.root,K=j.track,$=j.list,L=M.getAt,ee=M.style,H,te;function X(){J(),d(window,"resize load",Au(dt(S,on))),y([qt,vt],J),y(on,re)}function J(){te=null,H=s.direction===Sr,jt(G,"maxWidth",xi(s.width)),jt(K,q("paddingLeft"),ge(!1)),jt(K,q("paddingRight"),ge(!0)),re()}function re(){var ne=Wt(G);(!te||te.width!==ne.width||te.height!==ne.height)&&(jt(K,"height",Le()),ee(q("marginRight"),xi(s.gap)),ee("width",_e()),ee("height",ze(),!0),te=ne,S(co))}function ge(ne){var Xe=s.padding,Ce=q(ne?"right":"left");return Xe&&xi(Xe[Ce]||(An(Xe)?0:Xe))||"0px"}function Le(){var ne="";return H&&(ne=ce(),kn(ne,"height or heightRatio is missing."),ne="calc("+ne+" - "+ge(!1)+" - "+ge(!0)+")"),ne}function ce(){return xi(s.height||Wt($).width*s.heightRatio)}function _e(){return s.autoWidth?null:xi(s.fixedWidth)||(H?"":xe())}function ze(){return xi(s.fixedHeight)||(H?s.autoHeight?null:xe():ce())}function xe(){var ne=xi(s.gap);return"calc((100%"+(ne&&" + "+ne)+")/"+(s.perPage||1)+(ne&&" - "+ne)+")"}function Ne(){return Wt($)[q("width")]}function me(ne,Xe){var Ce=L(ne||0);return Ce?Wt(Ce.slide)[q("width")]+(Xe?0:he()):0}function ve(ne,Xe){var Ce=L(ne);if(Ce){var fe=Wt(Ce.slide)[q("right")],ae=Wt($)[q("left")];return Vt(fe-ae)+(Xe?0:he())}return 0}function Oe(){return ve(n.length-1,!0)-ve(-1,!0)}function he(){var ne=L(0);return ne&&parseFloat(jt(ne.slide,q("marginRight")))||0}function et(ne){return parseFloat(jt(K,q("padding"+(ne?"Right":"Left"))))||0}return{mount:X,listSize:Ne,slideSize:me,sliderSize:Oe,totalSize:ve,getPadding:et}}var Yu=2;function Zu(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=l.Elements,M=l.Slides,q=l.Direction.resolve,j=[],G;function K(){$(),y(vt,L),y(vt,$),y([qt,on],ee)}function $(){(G=X())&&(H(G),d(on))}function L(){Vi(j),_i(j)}function ee(){G<X()&&d(vt)}function H(J){var re=M.get().slice(),ge=re.length;if(ge){for(;re.length<J;)rr(re,re);rr(re.slice(-J),re.slice(0,J)).forEach(function(Le,ce){var _e=ce<J,ze=te(Le.slide,ce);_e?Cs(ze,re[0].slide):Dn(S.list,ze),rr(j,ze),M.register(ze,ce-J+(_e?0:ge),Le.index)})}}function te(J,re){var ge=J.cloneNode(!0);return li(ge,s.classes.clone),ge.id=n.root.id+"-clone"+Ts(re+1),ge}function X(){var J=s.clones;if(!n.is(fn))J=0;else if(!J){var re=s[q("fixedWidth")]&&l.Layout.slideSize(0),ge=re&&Mn(Wt(S.track)[q("width")]/re);J=ge||s[q("autoWidth")]&&n.length||s.perPage*Yu}return J}return{mount:K,destroy:L}}function Ku(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=n.state.set,M=l.Layout,q=M.slideSize,j=M.getPadding,G=M.totalSize,K=M.listSize,$=M.sliderSize,L=l.Direction,ee=L.resolve,H=L.orient,te=l.Elements,X=te.list,J=te.track,re;function ge(){re=l.Transition,y([Ii,co,qt,vt],Le)}function Le(){l.Controller.isBusy()||(l.Scroll.cancel(),_e(n.index),l.Slides.update())}function ce(ae,Ee,oe,we){ae!==Ee&&Ce(ae>oe)&&(me(),ze(Ne(he(),ae>oe),!0)),S(cn),d(Ai,Ee,oe,ae),re.start(Ee,function(){S(sn),d(Fn,Ee,oe,ae),we&&we()})}function _e(ae){ze(Oe(ae,!0))}function ze(ae,Ee){if(!n.is(Ar)){var oe=Ee?ae:xe(ae);jt(X,"transform","translate"+ee("X")+"("+oe+"px)"),ae!==oe&&d(oo)}}function xe(ae){if(n.is(fn)){var Ee=ve(ae),oe=Ee>l.Controller.getEnd(),we=Ee<0;(we||oe)&&(ae=Ne(ae,oe))}return ae}function Ne(ae,Ee){var oe=ae-Xe(Ee),we=$();return ae-=H(we*(Mn(Vt(oe)/we)||1))*(Ee?1:-1),ae}function me(){ze(he()),re.cancel()}function ve(ae){for(var Ee=l.Slides.get(),oe=0,we=1/0,$e=0;$e<Ee.length;$e++){var Ae=Ee[$e].index,Ue=Vt(Oe(Ae,!0)-ae);if(Ue<=we)we=Ue,oe=Ae;else break}return oe}function Oe(ae,Ee){var oe=H(G(ae-1)-ne(ae));return Ee?et(oe):oe}function he(){var ae=ee("left");return Wt(X)[ae]-Wt(J)[ae]+H(j(!1))}function et(ae){return s.trimSpace&&n.is(ln)&&(ae=Cn(ae,0,H($()-K()))),ae}function ne(ae){var Ee=s.focus;return Ee==="center"?(K()-q(ae,!0))/2:+Ee*q(ae)||0}function Xe(ae){return Oe(ae?l.Controller.getEnd():0,!!s.trimSpace)}function Ce(ae){var Ee=H(Ne(he(),ae));return ae?Ee>=0:Ee<=X[ee("scrollWidth")]-Wt(J)[ee("width")]}function fe(ae,Ee){Ee=yr(Ee)?he():Ee;var oe=ae!==!0&&H(Ee)<H(Xe(!1)),we=ae!==!1&&H(Ee)>H(Xe(!0));return oe||we}return{mount:ge,move:ce,jump:_e,translate:ze,shift:Ne,cancel:me,toIndex:ve,toPosition:Oe,getPosition:he,getLimit:Xe,exceededLimit:fe,reposition:Le}}function Xu(n,l,s){var u=pt(n),y=u.on,d=l.Move,S=d.getPosition,M=d.getLimit,q=d.toPosition,j=l.Slides,G=j.isEnough,K=j.getLength,$=n.is(fn),L=n.is(ln),ee=dt(Ne,!1),H=dt(Ne,!0),te=s.start||0,X=te,J,re,ge;function Le(){ce(),y([qt,vt],ce)}function ce(){J=K(!0),re=s.perMove,ge=s.perPage;var oe=Cn(te,0,J-1);oe!==te&&(te=oe,d.reposition())}function _e(oe,we,$e){if(!Ee()){var Ae=xe(oe),Ue=Oe(Ae);Ue>-1&&(we||Ue!==te)&&(Ce(Ue),d.move(Ae,Ue,X,$e))}}function ze(oe,we,$e,Ae){l.Scroll.scroll(oe,we,$e,function(){Ce(Oe(d.toIndex(S()))),Ae&&Ae()})}function xe(oe){var we=te;if(Ei(oe)){var $e=oe.match(/([+\-<>])(\d+)?/)||[],Ae=$e[1],Ue=$e[2];Ae==="+"||Ae==="-"?we=me(te+ +(""+Ae+(+Ue||1)),te):Ae===">"?we=Ue?et(+Ue):ee(!0):Ae==="<"&&(we=H(!0))}else we=$?oe:Cn(oe,0,he());return we}function Ne(oe,we){var $e=re||(ae()?1:ge),Ae=me(te+$e*(oe?-1:1),te,!(re||ae()));return Ae===-1&&L&&!so(S(),M(!oe),1)?oe?0:he():we?Ae:Oe(Ae)}function me(oe,we,$e){if(G()){var Ae=he(),Ue=ve(oe);Ue!==oe&&(we=oe,oe=Ue,$e=!1),oe<0||oe>Ae?!re&&(sr(0,oe,we,!0)||sr(Ae,we,oe,!0))?oe=et(ne(oe)):$?oe=$e?oe<0?-(J%ge||ge):J:oe:s.rewind?oe=oe<0?Ae:0:oe=-1:$e&&oe!==we&&(oe=et(ne(we)+(oe<we?-1:1)))}else oe=-1;return oe}function ve(oe){if(L&&s.trimSpace==="move"&&oe!==te)for(var we=S();we===q(oe,!0)&&sr(oe,0,n.length-1,!s.rewind);)oe<te?--oe:++oe;return oe}function Oe(oe){return $?(oe+J)%J||0:oe}function he(){return Ln(J-(ae()||$&&re?1:ge),0)}function et(oe){return Cn(ae()?oe:ge*oe,0,he())}function ne(oe){return ae()?oe:fr((oe>=he()?J-1:oe)/ge)}function Xe(oe){var we=d.toIndex(oe);return L?Cn(we,0,he()):we}function Ce(oe){oe!==te&&(X=te,te=oe)}function fe(oe){return oe?X:te}function ae(){return!yr(s.focus)||s.isNavigation}function Ee(){return n.state.is([cn,Rn])&&!!s.waitForTransition}return{mount:Le,go:_e,scroll:ze,getNext:ee,getPrev:H,getAdjacent:Ne,getEnd:he,setIndex:Ce,getIndex:fe,toIndex:et,toPage:ne,toDest:Xe,hasFocus:ae,isBusy:Ee}}var Ju="http://www.w3.org/2000/svg",Qu="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Qn=40;function ec(n,l,s){var u=pt(n),y=u.on,d=u.bind,S=u.emit,M=s.classes,q=s.i18n,j=l.Elements,G=l.Controller,K=j.arrows,$=j.track,L=K,ee=j.prev,H=j.next,te,X,J={};function re(){Le(),y(qt,ge)}function ge(){ce(),re()}function Le(){var ve=s.arrows;ve&&!(ee&&H)&&xe(),ee&&H&&(In(J,{prev:ee,next:H}),dr(L,ve?"":"none"),li(L,X=Ls+"--"+s.direction),ve&&(_e(),me(),Ze([ee,H],Vn,$.id),S(xu,ee,H)))}function ce(){u.destroy(),gi(L,X),te?(Vi(K?[ee,H]:L),ee=H=null):ui([ee,H],Is)}function _e(){y([Fn,vt,dn],me),d(H,"click",dt(ze,">")),d(ee,"click",dt(ze,"<"))}function ze(ve){G.go(ve,!0)}function xe(){L=K||en("div",M.arrows),ee=Ne(!0),H=Ne(!1),te=!0,Dn(L,[ee,H]),!K&&Cs(L,$)}function Ne(ve){var Oe='<button class="'+M.arrow+" "+(ve?M.prev:M.next)+'" type="button"><svg xmlns="'+Ju+'" viewBox="0 0 '+Qn+" "+Qn+'" width="'+Qn+'" height="'+Qn+'" focusable="false"><path d="'+(s.arrowPath||Qu)+'" />';return no(Oe)}function me(){var ve=n.index,Oe=G.getPrev(),he=G.getNext(),et=Oe>-1&&ve<Oe?q.last:q.prev,ne=he>-1&&ve>he?q.first:q.next;ee.disabled=Oe<0,H.disabled=he<0,Ze(ee,Gt,et),Ze(H,Gt,ne),S(Cu,ee,H,Oe,he)}return{arrows:J,mount:re,destroy:ce}}var tc=ks+"-interval";function ic(n,l,s){var u=pt(n),y=u.on,d=u.bind,S=u.emit,M=br(s.interval,n.go.bind(n,">"),_e),q=M.isPaused,j=l.Elements,G=l.Elements,K=G.root,$=G.toggle,L=s.autoplay,ee,H,te=L==="pause";function X(){L&&(J(),$&&Ze($,Vn,j.track.id),te||re(),ce())}function J(){s.pauseOnHover&&d(K,"mouseenter mouseleave",function(xe){ee=xe.type==="mouseenter",Le()}),s.pauseOnFocus&&d(K,"focusin focusout",function(xe){H=xe.type==="focusin",Le()}),$&&d($,"click",function(){te?re():ge(!0)}),y([Ai,Es,vt],M.rewind),y(Ai,ze)}function re(){q()&&l.Slides.isEnough()&&(M.start(!s.resetProgress),H=ee=te=!1,ce(),S(go))}function ge(xe){xe===void 0&&(xe=!0),te=!!xe,ce(),q()||(M.pause(),S(po))}function Le(){te||(ee||H?ge(!1):re())}function ce(){$&&(ki($,qi,!te),Ze($,Gt,s.i18n[te?"play":"pause"]))}function _e(xe){var Ne=j.bar;Ne&&jt(Ne,"width",xe*100+"%"),S(Tu,xe)}function ze(xe){var Ne=l.Slides.getAt(xe);M.set(Ne&&+ei(Ne.slide,tc)||s.interval)}return{mount:X,destroy:M.cancel,play:re,pause:ge,isPaused:q}}function nc(n,l,s){var u=pt(n),y=u.on;function d(){s.cover&&(y(mo,dt(M,!0)),y([Ii,qt,vt],dt(S,!0)))}function S(q){l.Slides.forEach(function(j){var G=Bn(j.container||j.slide,"img");G&&G.src&&M(q,G,j)})}function M(q,j,G){G.style("background",q?'center/cover no-repeat url("'+j.src+'")':"",!0),dr(j,q?"none":"")}return{mount:d,destroy:dt(S,!1)}}var rc=10,sc=600,ac=.6,oc=1.5,lc=800;function uc(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=n.state.set,M=l.Move,q=M.getPosition,j=M.getLimit,G=M.exceededLimit,K=M.translate,$,L,ee=1;function H(){y(Ai,re),y([qt,vt],ge)}function te(ce,_e,ze,xe,Ne){var me=q();if(re(),ze){var ve=l.Layout.sliderSize(),Oe=hs(ce)*ve*fr(Vt(ce)/ve)||0;ce=M.toPosition(l.Controller.toDest(ce%ve))+Oe}var he=so(me,ce,1);ee=1,_e=he?0:_e||Ln(Vt(ce-me)/oc,lc),L=xe,$=br(_e,X,dt(J,me,ce,Ne),1),S(Rn),d(Es),$.start()}function X(){S(sn),L&&L(),d(dn)}function J(ce,_e,ze,xe){var Ne=q(),me=ce+(_e-ce)*Le(xe),ve=(me-Ne)*ee;K(Ne+ve),n.is(ln)&&!ze&&G()&&(ee*=ac,Vt(ve)<rc&&te(j(G(!0)),sc,!1,L,!0))}function re(){$&&$.cancel()}function ge(){$&&!$.isPaused()&&(re(),X())}function Le(ce){var _e=s.easingFunc;return _e?_e(ce):1-Math.pow(1-ce,4)}return{mount:H,destroy:re,scroll:te,cancel:ge}}var Ki={passive:!1,capture:!0};function cc(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=u.bind,M=u.unbind,q=n.state,j=l.Move,G=l.Scroll,K=l.Controller,$=l.Elements.track,L=l.Media.reduce,ee=l.Direction,H=ee.resolve,te=ee.orient,X=j.getPosition,J=j.exceededLimit,re,ge,Le,ce,_e,ze=!1,xe,Ne,me;function ve(){S($,Qr,us,Ki),S($,es,us,Ki),S($,Ao,he,Ki),S($,"click",Xe,{capture:!0}),S($,"dragstart",di),y([Ii,qt],Oe)}function Oe(){var Me=s.drag;Hi(!Me),ce=Me==="free"}function he(Me){if(xe=!1,!Ne){var rt=ht(Me);at(Me.target)&&(rt||!Me.button)&&(K.isBusy()?di(Me,!0):(me=rt?$:window,_e=q.is([cn,Rn]),Le=null,S(me,Qr,et,Ki),S(me,es,ne,Ki),j.cancel(),G.cancel(),Ce(Me)))}}function et(Me){if(q.is(nr)||(q.set(nr),d(yu)),Me.cancelable)if(_e){j.translate(re+Ot($e(Me)));var rt=Ae(Me)>Sa,mt=ze!==(ze=J());(rt||mt)&&Ce(Me),xe=!0,d(bu),di(Me)}else Ee(Me)&&(_e=ae(Me),di(Me))}function ne(Me){q.is(nr)&&(q.set(sn),d(wu)),_e&&(fe(Me),di(Me)),M(me,Qr,et),M(me,es,ne),_e=!1}function Xe(Me){!Ne&&xe&&di(Me,!0)}function Ce(Me){Le=ge,ge=Me,re=X()}function fe(Me){var rt=oe(Me),mt=we(rt),Dt=s.rewind&&s.rewindByDrag;L(!1),ce?K.scroll(mt,0,s.snap):n.is(Ar)?K.go(te(hs(rt))<0?Dt?"<":"-":Dt?">":"+"):n.is(ln)&&ze&&Dt?K.go(J(!0)?">":"<"):K.go(K.toDest(mt),!0),L(!0)}function ae(Me){var rt=s.dragMinThreshold,mt=An(rt),Dt=mt&&rt.mouse||0,Ui=(mt?rt.touch:+rt)||10;return Vt($e(Me))>(ht(Me)?Ui:Dt)}function Ee(Me){return Vt($e(Me))>Vt($e(Me,!0))}function oe(Me){if(n.is(fn)||!ze){var rt=Ae(Me);if(rt&&rt<Sa)return $e(Me)/rt}return 0}function we(Me){return X()+hs(Me)*an(Vt(Me)*(s.flickPower||600),ce?1/0:l.Layout.listSize()*(s.flickMaxPages||1))}function $e(Me,rt){return xt(Me,rt)-xt(Ue(Me),rt)}function Ae(Me){return cs(Me)-cs(Ue(Me))}function Ue(Me){return ge===Me&&Le||ge}function xt(Me,rt){return(ht(Me)?Me.changedTouches[0]:Me)["page"+H(rt?"Y":"X")]}function Ot(Me){return Me/(ze&&n.is(ln)?Uu:1)}function at(Me){var rt=s.noDrag;return!Pn(Me,"."+So+", ."+Tr)&&(!rt||!Pn(Me,rt))}function ht(Me){return typeof TouchEvent!="undefined"&&Me instanceof TouchEvent}function ct(){return _e}function Hi(Me){Ne=Me}return{mount:ve,disable:Hi,isDragging:ct}}var hc={Spacebar:" ",Right:Cr,Left:xr,Up:_o,Down:vo};function Ms(n){return n=Ei(n)?n:n.key,hc[n]||n}var ka="keydown";function dc(n,l,s){var u=pt(n),y=u.on,d=u.bind,S=u.unbind,M=n.root,q=l.Direction.resolve,j,G;function K(){$(),y(qt,L),y(qt,$),y(Ai,H)}function $(){var X=s.keyboard;X&&(j=X==="global"?window:M,d(j,ka,te))}function L(){S(j,ka)}function ee(X){G=X}function H(){var X=G;G=!0,ls(function(){G=X})}function te(X){if(!G){var J=Ms(X);J===q(xr)?n.go("<"):J===q(Cr)&&n.go(">")}}return{mount:K,destroy:L,disable:ee}}var Tn=ks+"-lazy",ar=Tn+"-srcset",fc="["+Tn+"], ["+ar+"]";function gc(n,l,s){var u=pt(n),y=u.on,d=u.off,S=u.bind,M=u.emit,q=s.lazyLoad==="sequential",j=[Ii,vt,Fn,dn],G=[];function K(){s.lazyLoad&&($(),y(vt,$),q||y(j,L))}function $(){_i(G),l.Slides.forEach(function(X){Ss(X.slide,fc).forEach(function(J){var re=ei(J,Tn),ge=ei(J,ar);if(re!==J.src||ge!==J.srcset){var Le=s.classes.spinner,ce=J.parentElement,_e=Bn(ce,"."+Le)||en("span",Le,ce);G.push([J,X,_e]),J.src||dr(J,"none")}})}),q&&te()}function L(){G=G.filter(function(X){var J=s.perPage*((s.preloadPages||1)+1)-1;return X[1].isWithin(n.index,J)?ee(X):!0}),G.length||d(j)}function ee(X){var J=X[0];li(X[1].slide,gs),S(J,"load error",dt(H,X)),Ze(J,"src",ei(J,Tn)),Ze(J,"srcset",ei(J,ar)),ui(J,Tn),ui(J,ar)}function H(X,J){var re=X[0],ge=X[1];gi(ge.slide,gs),J.type!=="error"&&(Vi(X[2]),dr(re,""),M(mo,re,ge),M(on)),q&&te()}function te(){G.length&&ee(G.shift())}return{mount:K,destroy:dt(_i,G)}}function pc(n,l,s){var u=pt(n),y=u.on,d=u.emit,S=u.bind,M=l.Slides,q=l.Elements,j=l.Controller,G=j.hasFocus,K=j.getIndex,$=j.go,L=l.Direction.resolve,ee=[],H,te;function X(){J(),y([qt,vt],X),s.pagination&&M.isEnough()&&(y([Ai,Es,dn],ze),re(),ze(),d(Su,{list:H,items:ee},_e(n.index)))}function J(){H&&(Vi(q.pagination?Pi(H.children):H),gi(H,te),_i(ee),H=null),u.destroy()}function re(){var xe=n.length,Ne=s.classes,me=s.i18n,ve=s.perPage,Oe=G()?xe:Mn(xe/ve);H=q.pagination||en("ul",Ne.pagination,q.track.parentElement),li(H,te=Er+"--"+ce()),Ze(H,pi,"tablist"),Ze(H,Gt,me.select),Ze(H,Ps,ce()===Sr?"vertical":"");for(var he=0;he<Oe;he++){var et=en("li",null,H),ne=en("button",{class:Ne.page,type:"button"},et),Xe=M.getIn(he).map(function(fe){return fe.slide.id}),Ce=!G()&&ve>1?me.pageX:me.slideX;S(ne,"click",dt(ge,he)),s.paginationKeyboard&&S(ne,"keydown",dt(Le,he)),Ze(et,pi,"presentation"),Ze(ne,pi,"tab"),Ze(ne,Vn,Xe.join(" ")),Ze(ne,Gt,ds(Ce,he+1)),Ze(ne,tn,-1),ee.push({li:et,button:ne,page:he})}}function ge(xe){$(">"+xe,!0)}function Le(xe,Ne){var me=ee.length,ve=Ms(Ne),Oe=ce(),he=-1;ve===L(Cr,!1,Oe)?he=++xe%me:ve===L(xr,!1,Oe)?he=(--xe+me)%me:ve==="Home"?he=0:ve==="End"&&(he=me-1);var et=ee[he];et&&(io(et.button),$(">"+he),di(Ne,!0))}function ce(){return s.paginationDirection||s.direction}function _e(xe){return ee[j.toPage(xe)]}function ze(){var xe=_e(K(!0)),Ne=_e(K());if(xe){var me=xe.button;gi(me,qi),ui(me,ya),Ze(me,tn,-1)}if(Ne){var ve=Ne.button;li(ve,qi),Ze(ve,ya,!0),Ze(ve,tn,"")}d(ku,{list:H,items:ee},xe,Ne)}return{items:ee,mount:X,destroy:J,getAt:_e,update:ze}}var mc=[" ","Enter"];function _c(n,l,s){var u=s.isNavigation,y=s.slideFocus,d=[];function S(){n.options={slideFocus:yr(y)?u:y}}function M(){n.splides.forEach(function(H){H.isParent||(G(n,H.splide),G(H.splide,n))}),u&&K()}function q(){d.forEach(function(H){H.destroy()}),_i(d)}function j(){q(),M()}function G(H,te){var X=pt(H);X.on(Ai,function(J,re,ge){te.go(te.is(fn)?ge:J)}),d.push(X)}function K(){var H=pt(n),te=H.on;te(lo,L),te(uo,ee),te([Ii,qt],$),d.push(H),H.emit(fo,n.splides)}function $(){Ze(l.Elements.list,Ps,s.direction===Sr?"vertical":"")}function L(H){n.go(H.index)}function ee(H,te){xs(mc,Ms(te))&&(L(H),di(te))}return{setup:S,mount:M,destroy:q,remount:j}}function vc(n,l,s){var u=pt(n),y=u.bind,d=0;function S(){s.wheel&&y(l.Elements.track,"wheel",M,Ki)}function M(j){if(j.cancelable){var G=j.deltaY,K=G<0,$=cs(j),L=s.wheelMinThreshold||0,ee=s.wheelSleep||0;Vt(G)>L&&$-d>ee&&(n.go(K?"<":">"),d=$),q(K)&&di(j)}}function q(j){return!s.releaseWheel||n.state.is(cn)||l.Controller.getAdjacent(j)!==-1}return{mount:S}}var yc=90;function bc(n,l,s){var u=pt(n),y=u.on,d=l.Elements.track,S=s.live&&!s.isNavigation,M=en("span",Bu),q=br(yc,dt(G,!1));function j(){S&&($(!l.Autoplay.isPaused()),Ze(d,xa,!0),M.textContent="\u2026",y(go,dt($,!0)),y(po,dt($,!1)),y([Fn,dn],dt(G,!0)))}function G(L){Ze(d,wa,L),L?(Dn(d,M),q.start()):Vi(M)}function K(){ui(d,[ba,xa,wa]),Vi(M)}function $(L){S&&Ze(d,ba,L?"off":"polite")}return{mount:j,disable:$,destroy:K}}var wc=Object.freeze({__proto__:null,Media:Pu,Direction:Iu,Elements:ju,Slides:$u,Layout:Gu,Clones:Zu,Move:Ku,Controller:Xu,Arrows:ec,Autoplay:ic,Cover:nc,Scroll:uc,Drag:cc,Keyboard:dc,LazyLoad:gc,Pagination:pc,Sync:_c,Wheel:vc,Live:bc}),xc={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},Cc={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:qu,i18n:xc,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Sc(n,l,s){var u=pt(n),y=u.on;function d(){y([Ii,vt],function(){ls(function(){l.Slides.style("transition","opacity "+s.speed+"ms "+s.easing)})})}function S(M,q){var j=l.Elements.track;jt(j,"height",xi(Wt(j).height)),ls(function(){q(),jt(j,"height","")})}return{mount:d,start:S,cancel:us}}function kc(n,l,s){var u=pt(n),y=u.bind,d=l.Move,S=l.Controller,M=l.Scroll,q=l.Elements.list,j=dt(jt,q,"transition"),G;function K(){y(q,"transitionend",function(H){H.target===q&&G&&(L(),G())})}function $(H,te){var X=d.toPosition(H,!0),J=d.getPosition(),re=ee(H);Vt(X-J)>=1&&re>=1?s.useScroll?M.scroll(X,re,!1,te):(j("transform "+re+"ms "+s.easing),d.translate(X,!0),G=te):(d.jump(H),te())}function L(){j(""),M.cancel()}function ee(H){var te=s.rewindSpeed;if(n.is(ln)&&te){var X=S.getIndex(!0),J=S.getEnd();if(X===0&&H>=J||X>=J&&H===0)return te}return s.speed}return{mount:K,start:$,cancel:L}}var Tc=function(){function n(s,u){this.event=pt(),this.Components={},this.state=Eu(Xi),this.splides=[],this._o={},this._E={};var y=Ei(s)?ro(document,s):s;kn(y,y+" is invalid."),this.root=y,u=Ti({label:ei(y,Gt)||"",labelledby:ei(y,As)||""},Cc,n.defaults,u||{});try{Ti(u,JSON.parse(ei(y,ks)))}catch(d){kn(!1,"Invalid JSON")}this._o=Object.create(Ti({},u))}var l=n.prototype;return l.mount=function(u,y){var d=this,S=this.state,M=this.Components;kn(S.is([Xi,cr]),"Already mounted!"),S.set(Xi),this._C=M,this._T=y||this._T||(this.is(Ar)?Sc:kc),this._E=u||this._E;var q=In({},wc,this._E,{Transition:this._T});return Fi(q,function(j,G){var K=j(d,M,d._o);M[G]=K,K.setup&&K.setup()}),Fi(M,function(j){j.mount&&j.mount()}),this.emit(Ii),li(this.root,Fu),S.set(sn),this.emit(_a),this},l.sync=function(u){return this.splides.push({splide:u}),u.splides.push({splide:this,isParent:!0}),this.state.is(sn)&&(this._C.Sync.remount(),u.Components.Sync.remount()),this},l.go=function(u){return this._C.Controller.go(u),this},l.on=function(u,y){return this.event.on(u,y),this},l.off=function(u){return this.event.off(u),this},l.emit=function(u){var y;return(y=this.event).emit.apply(y,[u].concat(Pi(arguments,1))),this},l.add=function(u,y){return this._C.Slides.add(u,y),this},l.remove=function(u){return this._C.Slides.remove(u),this},l.is=function(u){return this._o.type===u},l.refresh=function(){return this.emit(vt),this},l.destroy=function(u){u===void 0&&(u=!0);var y=this.event,d=this.state;return d.is(Xi)?pt(this).on(_a,this.destroy.bind(this,u)):(Fi(this._C,function(S){S.destroy&&S.destroy(u)},!0),y.emit(ho),y.destroy(),u&&_i(this.splides),d.set(cr)),this},hu(n,[{key:"options",get:function(){return this._o},set:function(u){this._C.Media.set(u,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),n}(),gr=Tc;gr.defaults={};gr.STATES=fu;var Po={exports:{}},Ec={},Ac=Object.freeze(Object.defineProperty({__proto__:null,default:Ec},Symbol.toStringTag,{value:"Module"})),Ta=dl(Ac);/*!
 * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Mar 17 10:49:48 2021 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(l,s){l=l||Ta;var u=l.window,y=l.document,d=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],i=t.slice,r=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,h=t.forEach||function(_,m){for(var T=0,x=this.length;T<x;T++)_.call(m,this[T],T,this)},c=function(_,m){for(var T in this)this.hasOwnProperty(T)&&_.call(m,this[T],T,this)},f=Object.assign||function(_){for(var m=1,T=arguments.length;m<T;m++){var x=arguments[m];for(var E in x)x.hasOwnProperty(E)&&(_[E]=x[E])}return _},g=function(_,m,T){if(_){var x=a(_,"length");(x&&typeof x.value=="number"?h:c).call(_,m,T=T||_)}return T};function v(_,m,T,x,E){var w={};function k(A,z){z=z||(z=a(m,A))&&(z.get?z:z.value),typeof z=="string"&&z[0]==="#"&&(z=_[z.substring(1)]||z);var N=typeof z=="function",D=z,V=E||N&&!z.base?z&&z.get?A in _:_[A]:null,O;(!E||!V)&&(N&&V&&(z.base=V),N&&x!==!1&&(O=A.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(w[O[3].toLowerCase()+O[4]]=O[2]),(!D||N||!D.get||typeof D.get!="function"||!b.isPlainObject(D))&&(D={value:D,writable:!0}),(a(_,A)||{configurable:!0}).configurable&&(D.configurable=!0,D.enumerable=T!=null?T:!O),o(_,A,D))}if(m){for(var p in m)m.hasOwnProperty(p)&&!e.test(p)&&k(p);for(var p in w){var C=w[p],P=_["set"+C],I=_["get"+C]||P&&_["is"+C];I&&(x===!0||I.length===0)&&k(p,{get:I,set:P})}}return _}function b(){for(var _=0,m=arguments.length;_<m;_++){var T=arguments[_];T&&f(this,T)}return this}return v(b,{inject:function(_){if(_){var m=_.statics===!0?_:_.statics,T=_.beans,x=_.preserve;m!==_&&v(this.prototype,_,_.enumerable,T,x),v(this,m,null,T,x)}for(var E=1,w=arguments.length;E<w;E++)this.inject(arguments[E]);return this},extend:function(){for(var _=this,m,T,x=0,E,w=arguments.length;x<w&&!(m&&T);x++)E=arguments[x],m=m||E.initialize,T=T||E.prototype;return m=m||function(){_.apply(this,arguments)},T=m.prototype=T||r(this.prototype),o(T,"constructor",{value:m,writable:!0,configurable:!0}),v(m,this),arguments.length&&this.inject.apply(m,arguments),m.base=_,m}}).inject({enumerable:!1,initialize:b,set:b,inject:function(){for(var _=0,m=arguments.length;_<m;_++){var T=arguments[_];T&&v(this,T,T.enumerable,T.beans,T.preserve)}return this},extend:function(){var _=r(this);return _.inject.apply(_,arguments)},each:function(_,m){return g(this,_,m)},clone:function(){return new this.constructor(this)},statics:{set:f,each:g,create:r,define:o,describe:a,clone:function(_){return f(new _.constructor,_)},isPlainObject:function(_){var m=_!=null&&_.constructor;return m&&(m===Object||m===b||m.name==="Object")},pick:function(_,m){return _!==s?_:m},slice:function(_,m,T){return i.call(_,m,T)}}})};n.exports=d,d.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+d.each(this,function(e,t){if(!/^_/.test(t)){var i=typeof e;this.push(t+": "+(i==="number"?G.instance.number(e):i==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return d.importJSON(e,this)},exportJSON:function(e){return d.exportJSON(this,e)},toJSON:function(){return d.serialize(this)},set:function(e,t){return e&&d.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),i=t.prototype._class;return i&&!d.exports[i]&&(d.exports[i]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(;i--;)if(!d.equals(e[i],t[i]))return!1}else{var r=Object.keys(e),i=r.length;if(i!==Object.keys(t).length)return!1;for(;i--;){var a=r[i];if(!(t.hasOwnProperty(a)&&d.equals(e[a],t[a])))return!1}}return!0}return!1},read:function(e,t,i,r){if(this===d){var a=this.peek(e,t);return e.__index++,a}var o=this.prototype,h=o._readIndex,c=t||h&&e.__index||0,f=e.length,g=e[c];if(r=r||f-c,g instanceof this||i&&i.readNull&&g==null&&r<=1)return h&&(e.__index=c+1),g&&i&&i.clone?g.clone():g;if(g=d.create(o),h&&(g.__read=!0),g=g.initialize.apply(g,c>0||c+r<f?d.slice(e,c,c+r):e)||g,h){e.__index=c+g.__read;var v=g.__filtered;v&&(e.__filtered=v,g.__filtered=s),g.__read=s}return g},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,i,r){for(var a=[],o,h=t||0,c=r?h+r:e.length,f=h;f<c;f++)a.push(Array.isArray(o=e[f])?this.read(o,0,i):this.read(e,f,i,1));return a},readNamed:function(e,t,i,r,a){var o=this.getNamed(e,t),h=o!==s;if(h){var c=e.__filtered;if(!c){var f=this.getSource(e);c=e.__filtered=d.create(f),c.__unfiltered=f}c[t]=s}return this.read(h?[o]:e,i,r,a)},readSupported:function(e,t){var i=this.getSource(e),r=this,a=!1;return i&&Object.keys(i).forEach(function(o){if(o in t){var h=r.readNamed(e,o);h!==s&&(t[o]=h),a=!0}}),a},getSource:function(e){var t=e.__source;if(t===s){var i=e.length===1&&e[0];t=e.__source=i&&d.isPlainObject(i)?i:null}return t},getNamed:function(e,t){var i=this.getSource(e);if(i)return t?i[t]:e.__filtered||i},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,i,r){var a;function o(v){if(!(i&&v in i)&&!(a&&v in a)){var b=t[v];b!==s&&(e[v]=b)}}if(r){for(var h={},c=0,f,g=r.length;c<g;c++)(f=r[c])in t&&(o(f),h[f]=!0);a=h}return Object.keys(t.__unfiltered||t).forEach(o),e},isPlainValue:function(e,t){return d.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,i,r){t=t||{};var a=!r,o;if(a&&(t.formatter=new G(t.precision),r={length:0,definitions:{},references:{},add:function(b,_){var m="#"+b._id,T=this.references[m];if(!T){this.length++;var x=_.call(b),E=b._class;E&&x[0]!==E&&x.unshift(E),this.definitions[m]=x,T=this.references[m]=[m]}return T}}),e&&e._serialize){o=e._serialize(t,r);var h=e._class;h&&!e._compactSerialize&&(a||!i)&&o[0]!==h&&o.unshift(h)}else if(Array.isArray(e)){o=[];for(var c=0,f=e.length;c<f;c++)o[c]=d.serialize(e[c],t,i,r)}else if(d.isPlainObject(e)){o={};for(var g=Object.keys(e),c=0,f=g.length;c<f;c++){var v=g[c];o[v]=d.serialize(e[v],t,i,r)}}else typeof e=="number"?o=t.formatter.number(e,t.precision):o=e;return a&&r.length>0?[["dictionary",r.definitions],o]:o},deserialize:function(e,t,i,r,a){var o=e,h=!i,c=h&&e&&e.length&&e[0][0]==="dictionary";if(i=i||{},Array.isArray(e)){var f=e[0],g=f==="dictionary";if(e.length==1&&/^#/.test(f))return i.dictionary[f];f=d.exports[f],o=[];for(var v=f?1:0,b=e.length;v<b;v++)o.push(d.deserialize(e[v],t,i,g,c));if(f){var _=o;t?o=t(f,_,h||a):o=new f(_)}}else if(d.isPlainObject(e)){o={},r&&(i.dictionary=o);for(var m in e)o[m]=d.deserialize(e[m],t,i)}return c?o[1]:o},exportJSON:function(e,t){var i=d.serialize(e,t);return t&&t.asString==!1?i:JSON.stringify(i)},importJSON:function(e,t){return d.deserialize(typeof e=="string"?JSON.parse(e):e,function(i,r,a){var o=a&&t&&t.constructor===i,h=o?t:d.create(i.prototype);if(r.length===1&&h instanceof ce&&(o||!(h instanceof ze))){var c=r[0];d.isPlainObject(c)&&(c.insert=!1,o&&(r=r.concat([{insert:!0}])))}return(o?h.set:i).apply(h,r),o&&(t=null),h})},push:function(e,t){var i=t.length;if(i<4096)e.push.apply(e,t);else{var r=e.length;e.length+=i;for(var a=0;a<i;a++)e[r+a]=t[a]}return e},splice:function(e,t,i,r){var a=t&&t.length,o=i===s;i=o?e.length:i,i>e.length&&(i=e.length);for(var h=0;h<a;h++)t[h]._index=i+h;if(o)return d.push(e,t),[];var c=[i,r];t&&d.push(c,t);for(var f=e.splice.apply(e,c),h=0,g=f.length;h<g;h++)f[h]._index=s;for(var h=i+a,g=e.length;h<g;h++)e[h]._index=h;return f},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,i){return i.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var S={on:function(e,t){if(typeof e!="string")d.each(e,function(o,h){this.on(h,o)},this);else{var i=this._eventTypes,r=i&&i[e],a=this._callbacks=this._callbacks||{};a=a[e]=a[e]||[],a.indexOf(t)===-1&&(a.push(t),r&&r.install&&a.length===1&&r.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){d.each(e,function(h,c){this.off(c,h)},this);return}var i=this._eventTypes,r=i&&i[e],a=this._callbacks&&this._callbacks[e],o;return a&&(!t||(o=a.indexOf(t))!==-1&&a.length===1?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):o!==-1&&a.splice(o,1)),this},once:function(e,t){return this.on(e,function i(){t.apply(this,arguments),this.off(e,i)})},emit:function(e,t){var i=this._callbacks&&this._callbacks[e];if(!i)return!1;var r=d.slice(arguments,1),a=t&&t.target&&!t.currentTarget;i=i.slice(),a&&(t.currentTarget=this);for(var o=0,h=i.length;o<h;o++)if(i[o].apply(this,r)==!1){t&&t.stop&&t.stop();break}return a&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,i=this._callbacks,r=e?"install":"uninstall";if(t){for(var a in i)if(i[a].length>0){var o=t[a],h=o&&o[r];h&&h.call(this,a)}}},statics:{inject:function e(t){var i=t._events;if(i){var r={};d.each(i,function(a,o){var h=typeof a=="string",c=h?a:o,f=d.capitalize(c),g=c.substring(2).toLowerCase();r[g]=h?{}:a,c="_"+c,t["get"+f]=function(){return this[c]},t["set"+f]=function(v){var b=this[c];b&&this.off(g,b),v&&this.on(g,v),this[c]=v}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},M=d.extend({_class:"PaperScope",initialize:function e(){Ye=this,this.settings=new d({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var i=tt.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:ji.nativeModes},tt.release(i)}if(!this.agent){var r=l.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o=a==="darwin"?"mac":a,h=t.agent=t.browser={platform:o};o&&(h[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(c,f,g,v,b){if(!h.chrome){var _=f==="opera"?v:/^(node|trident)$/.test(f)?b:g;h.version=_,h.versionNumber=parseFloat(_),f={trident:"msie",jsdom:"node"}[f]||f,h.name=f,h[f]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.15",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var i=Ye.PaperScript.execute(e,this,t);return ct.updateFocus(),i},install:function(e){var t=this;d.each(["project","view","tool"],function(r){d.define(e,r,{configurable:!0,get:function(){return t[r]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(e[i]=this[i])},setup:function(e){return Ye=this,this.project=new Le(e),this},createCanvas:function(e,t){return tt.getCanvas(e,t)},activate:function(){Ye=this},clear:function(){for(var e=this.projects,t=this.tools,i=e.length-1;i>=0;i--)e[i].remove();for(var i=t.length-1;i>=0;i--)t[i].remove()},remove:function(){this.clear(),delete M._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(i,r){return i[t](r)||i[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),q=d.extend(S,{initialize:function(e){this._scope=Ye,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(d.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),j={findItemBoundsCollisions:function(e,t,i){function r(h){for(var c=new Array(h.length),f=0;f<h.length;f++){var g=h[f].getBounds();c[f]=[g.left,g.top,g.right,g.bottom]}return c}var a=r(e),o=!t||t===e?a:r(t);return this.findBoundsCollisions(a,o,i||0)},findCurveBoundsCollisions:function(e,t,i,r){function a(_){for(var m=Math.min,T=Math.max,x=new Array(_.length),E=0;E<_.length;E++){var w=_[E];x[E]=[m(w[0],w[2],w[4],w[6]),m(w[1],w[3],w[5],w[7]),T(w[0],w[2],w[4],w[6]),T(w[1],w[3],w[5],w[7])]}return x}var o=a(e),h=!t||t===e?o:a(t);if(r){for(var c=this.findBoundsCollisions(o,h,i||0,!1,!0),f=this.findBoundsCollisions(o,h,i||0,!0,!0),g=[],v=0,b=c.length;v<b;v++)g[v]={hor:c[v],ver:f[v]};return g}return this.findBoundsCollisions(o,h,i||0)},findBoundsCollisions:function(e,t,i,r,a){var o=!t||e===t,h=o?e:e.concat(t),c=e.length,f=h.length;function g(pe,ye,Te){for(var se=0,le=pe.length;se<le;){var be=le+se>>>1;h[pe[be]][ye]<Te?se=be+1:le=be}return se-1}for(var v=r?1:0,b=v+2,_=r?0:1,m=_+2,T=new Array(f),x=0;x<f;x++)T[x]=x;T.sort(function(pe,ye){return h[pe][v]-h[ye][v]});for(var E=[],w=new Array(c),x=0;x<f;x++){var k=T[x],p=h[k],C=o?k:k-c,P=k<c,I=o||!P,A=P?[]:null;if(E.length){var z=g(E,b,p[v]-i)+1;if(E.splice(0,z),o&&a){A=A.concat(E);for(var N=0;N<E.length;N++){var D=E[N];w[D].push(C)}}else for(var V=p[m],O=p[_],N=0;N<E.length;N++){var D=E[N],F=h[D],U=D<c,Y=o||D>=c;(a||(P&&Y||I&&U)&&V>=F[_]-i&&O<=F[m]+i)&&(P&&Y&&A.push(o?D:D-c),I&&U&&w[D].push(C))}}if(P&&(e===t&&A.push(k),w[k]=A),E.length){var Z=p[b],Q=g(E,b,Z);E.splice(Q+1,0,k)}else E.push(k)}for(var x=0;x<w.length;x++){var de=w[x];de&&de.sort(function(ye,Te){return ye-Te})}return w}},G=d.extend({initialize:function(e){this.precision=d.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,i){return this.number(e)+(i||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});G.instance=new G;var K=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,a=Math.pow,o=Math.log2||function(b){return Math.log(b)*Math.LOG2E},h=1e-12,c=112e-18;function f(b,_,m){return b<_?_:b>m?m:b}function g(b,_,m){function T(z){var N=z*134217729,D=z-N,V=D+N,O=z-V;return[V,O]}var x=_*_-b*m,E=_*_+b*m;if(i(x)*3<E){var w=T(b),k=T(_),p=T(m),C=_*_,P=k[0]*k[0]-C+2*k[0]*k[1]+k[1]*k[1],I=b*m,A=w[0]*p[0]-I+w[0]*p[1]+w[1]*p[0]+w[1]*p[1];x=C-I+(P-A)}return x}function v(){var b=Math.max.apply(Math,arguments);return b&&(b<1e-8||b>1e8)?a(2,-Math.round(o(b))):0}return{EPSILON:h,MACHINE_EPSILON:c,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(b){return b>=-h&&b<=h},isMachineZero:function(b){return b>=-c&&b<=c},clamp:f,integrate:function(b,_,m,T){for(var x=e[T-2],E=t[T-2],w=(m-_)*.5,k=w+_,p=0,C=T+1>>1,P=T&1?E[p++]*b(k):0;p<C;){var I=w*x[p];P+=E[p++]*(b(k+I)+b(k-I))}return w*P},findRoot:function(b,_,m,T,x,E,w){for(var k=0;k<E;k++){var p=b(m),C=p/_(m),P=m-C;if(i(C)<w){m=P;break}p>0?(x=m,m=P<=T?(T+x)*.5:P):(T=m,m=P>=x?(T+x)*.5:P)}return f(m,T,x)},solveQuadratic:function(b,_,m,T,x,E){var w,k=1/0;if(i(b)<h){if(i(_)<h)return i(m)<h?-1:0;w=-m/_}else{_*=-.5;var p=g(b,_,m);if(p&&i(p)<c){var C=v(i(b),i(_),i(m));C&&(b*=C,_*=C,m*=C,p=g(b,_,m))}if(p>=-c){var P=p<0?0:r(p),I=_+(_<0?-P:P);I===0?(w=m/b,k=-w):(w=I/b,k=m/I)}}var A=0,z=x==null,N=x-h,D=E+h;return isFinite(w)&&(z||w>N&&w<D)&&(T[A++]=z?w:f(w,x,E)),k!==w&&isFinite(k)&&(z||k>N&&k<D)&&(T[A++]=z?k:f(k,x,E)),A},solveCubic:function(b,_,m,T,x,E,w){var k=v(i(b),i(_),i(m),i(T)),p,C,P,I,A;k&&(b*=k,_*=k,m*=k,T*=k);function z(Q){p=Q;var de=b*p;C=de+_,P=C*p+m,I=(de+C)*p+P,A=P*p+T}if(i(b)<h)b=_,C=m,P=T,p=1/0;else if(i(T)<h)C=_,P=m,p=0;else{z(-(_/b)/3);var N=A/b,D=a(i(N),1/3),V=N<0?-1:1,O=-I/b,F=O>0?1.324717957244746*Math.max(D,r(O)):D,U=p-V*F;if(U!==p){do z(U),U=I===0?p:p-A/I/(1+c);while(V*U>V*p);i(b)*p*p>i(T/p)&&(P=-T/p,C=(P-m)/p)}}var Y=K.solveQuadratic(b,C,P,x,E,w),Z=E==null;return isFinite(p)&&(Y===0||Y>0&&p!==x[0]&&p!==x[1])&&(Z||p>E-h&&p<w+h)&&(x[Y++]=Z?p:f(p,E,w)),Y}}},$={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},L=d.extend({_class:"Point",_readIndex:!0,initialize:function(t,i){var r=typeof t,a=this.__read,o=0;if(r==="number"){var h=typeof i=="number";this._set(t,h?i:t),a&&(o=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),a&&(o=t===null?1:0);else{var c=r==="string"?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(c)?this._set(+c[0],+(c.length>1?c[1]:c[0])):"x"in c?this._set(c.x||0,c.y||0):"width"in c?this._set(c.width||0,c.height||0):"angle"in c?(this._set(c.length||0,0),this.setAngle(c.angle||0)):(this._set(0,0),o=0)}return a&&(this.__read=o),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new L(this.x,this.y)},toString:function(){var e=G.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var i=e/this.getLength();K.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=L.read(arguments),t=this.getLength()*e.getLength();if(K.isZero(t))return NaN;var i=this.dot(e)/t;return Math.acos(i<-1?-1:i>1?1:i)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=L.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=L.read(e),i=t.x-this.x,r=t.y-this.y,a=i*i+r*r,o=d.read(e);return o?a:Math.sqrt(a)},normalize:function(e){e===s&&(e=1);var t=this.getLength(),i=t!==0?e/t:0,r=new L(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var i=t?this.subtract(t):this,r=Math.sin(e),a=Math.cos(e);return i=new L(i.x*a-i.y*r,i.x*r+i.y*a),t?i.add(t):i},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=L.read(arguments);return new L(this.x+e.x,this.y+e.y)},subtract:function(){var e=L.read(arguments);return new L(this.x-e.x,this.y-e.y)},multiply:function(){var e=L.read(arguments);return new L(this.x*e.x,this.y*e.y)},divide:function(){var e=L.read(arguments);return new L(this.x/e.x,this.y/e.y)},modulo:function(){var e=L.read(arguments);return new L(this.x%e.x,this.y%e.y)},negate:function(){return new L(-this.x,-this.y)},isInside:function(){return X.read(arguments).contains(this)},isClose:function(){var e=arguments,t=L.read(e),i=d.read(e);return this.getDistance(t)<=i},isCollinear:function(){var e=L.read(arguments);return L.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=L.read(arguments);return L.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=K.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=L.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=L.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=L.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new L(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=L.read(e),i=L.read(e);return new L(Math.min(t.x,i.x),Math.min(t.y,i.y))},max:function(){var e=arguments,t=L.read(e),i=L.read(e);return new L(Math.max(t.x,i.x),Math.max(t.y,i.y))},random:function(){return new L(Math.random(),Math.random())},isCollinear:function(e,t,i,r){return Math.abs(e*r-t*i)<=Math.sqrt((e*e+t*t)*(i*i+r*r))*1e-8},isOrthogonal:function(e,t,i,r){return Math.abs(e*i+t*r)<=Math.sqrt((e*e+t*t)*(i*i+r*r))*1e-8}}},d.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new L(t(this.x),t(this.y))}},{})),ee=L.extend({initialize:function(t,i,r,a){this._x=t,this._y=i,this._owner=r,this._setter=a},_set:function(e,t,i){return this._x=e,this._y=t,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),H=d.extend({_class:"Size",_readIndex:!0,initialize:function(t,i){var r=typeof t,a=this.__read,o=0;if(r==="number"){var h=typeof i=="number";this._set(t,h?i:t),a&&(o=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),a&&(o=t===null?1:0);else{var c=r==="string"?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(c)?this._set(+c[0],+(c.length>1?c[1]:c[0])):"width"in c?this._set(c.width||0,c.height||0):"x"in c?this._set(c.x||0,c.y||0):(this._set(0,0),o=0)}return a&&(this.__read=o),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new H(this.width,this.height)},toString:function(){var e=G.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=H.read(arguments);return new H(this.width+e.width,this.height+e.height)},subtract:function(){var e=H.read(arguments);return new H(this.width-e.width,this.height-e.height)},multiply:function(){var e=H.read(arguments);return new H(this.width*e.width,this.height*e.height)},divide:function(){var e=H.read(arguments);return new H(this.width/e.width,this.height/e.height)},modulo:function(){var e=H.read(arguments);return new H(this.width%e.width,this.height%e.height)},negate:function(){return new H(-this.width,-this.height)},isZero:function(){var e=K.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new H(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new H(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new H(Math.random(),Math.random())}}},d.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new H(t(this.width),t(this.height))}},{})),te=H.extend({initialize:function(t,i,r,a){this._width=t,this._height=i,this._owner=r,this._setter=a},_set:function(e,t,i){return this._width=e,this._height=t,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),X=d.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,r,a){var o=arguments,h=typeof t,c;if(h==="number"?(this._set(t,i,r,a),c=4):h==="undefined"||t===null?(this._set(0,0,0,0),c=t===null?1:0):o.length===1&&(Array.isArray(t)?(this._set.apply(this,t),c=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),c=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),d.readSupported(o,this)&&(c=1))),c===s){var f=L.readNamed(o,"from"),g=d.peek(o),v=f.x,b=f.y,_,m;if(g&&g.x!==s||d.hasNamed(o,"to")){var T=L.readNamed(o,"to");_=T.x-v,m=T.y-b,_<0&&(v=T.x,_=-_),m<0&&(b=T.y,m=-m)}else{var x=H.read(o);_=x.width,m=x.height}this._set(v,b,_,m),c=o.__index}var E=o.__filtered;return E&&(this.__filtered=E),this.__read&&(this.__read=c),this},set:"#initialize",_set:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},clone:function(){return new X(this.x,this.y,this.width,this.height)},equals:function(e){var t=d.isPlainValue(e)?X.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=G.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?L:ee;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=L.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?H:te;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=H.read(arguments),t=this._sx,i=this._sy,r=e.width,a=e.height;t&&(this.x+=(this.width-r)*t),i&&(this.y+=(this.height-a)*i),this.width=r,this.height=a,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?L:ee;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=L.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==s||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(X.read(arguments)):this._containsPoint(L.read(arguments))},_containsPoint:function(e){var t=e.x,i=e.y;return t>=this.x&&i>=this.y&&t<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(e){var t=e.x,i=e.y;return t>=this.x&&i>=this.y&&t+e.width<=this.x+this.width&&i+e.height<=this.y+this.height},intersects:function(){var e=X.read(arguments),t=d.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=X.read(arguments),t=Math.max(this.x,e.x),i=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),a=Math.min(this.y+this.height,e.y+e.height);return new X(t,i,r-t,a-i)},unite:function(){var e=X.read(arguments),t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),a=Math.max(this.y+this.height,e.y+e.height);return new X(t,i,r-t,a-i)},include:function(){var e=L.read(arguments),t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),a=Math.max(this.y+this.height,e.y);return new X(t,i,r-t,a-i)},expand:function(){var e=H.read(arguments),t=e.width,i=e.height;return new X(this.x-t/2,this.y-i/2,this.width+t,this.height+i)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===s?e:t)-this.height)}},d.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var i=e.join(""),r=/^[RL]/.test(i);t>=4&&(e[1]+=r?"Y":"X");var a=e[r?0:1],o=e[r?1:0],h="get"+a,c="get"+o,f="set"+a,g="set"+o,v="get"+i,b="set"+i;this[v]=function(_){var m=_?L:ee;return new m(this[h](),this[c](),this,b)},this[b]=function(){var _=L.read(arguments);this[f](_.x),this[g](_.y)}},{beans:!0})),J=X.extend({initialize:function(t,i,r,a,o,h){this._set(t,i,r,a,!0),this._owner=o,this._setter=h},_set:function(e,t,i,r,a){return this._x=e,this._y=t,this._width=i,this._height=r,a||this._owner[this._setter](this),this}},new function(){var e=X.prototype;return d.each(["x","y","width","height"],function(t){var i=d.capitalize(t),r="_"+t;this["get"+i]=function(){return this[r]},this["set"+i]=function(a){this[r]=a,this._dontNotify||this._owner[this._setter](this)}},d.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var i="set"+t;this[i]=function(){this._dontNotify=!0,e[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var i=this._owner;i._changeSelection&&i._changeSelection(2,t)}}))}),re=d.extend({_class:"Matrix",initialize:function e(t,i){var r=arguments,a=r.length,o=!0;if(a>=6?this._set.apply(this,r):a===1||a===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,i):Array.isArray(t)?this._set.apply(this,i?t.concat([i]):t):o=!1:a?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,i,r,a,o,h){return this._a=e,this._b=t,this._c=i,this._d=r,this._tx=a,this._ty=o,h||this._changed(),this},_serialize:function(e,t){return d.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new re(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=G.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var i=this._owner;return i?(i.transform(null,d.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=L.read(arguments),t=e.x,i=e.y;return this._tx+=t*this._a+i*this._c,this._ty+=t*this._b+i*this._d,this._changed(),this},scale:function(){var e=arguments,t=L.read(e),i=L.read(e,0,{readNull:!0});return i&&this.translate(i),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,i&&this.translate(i.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=L.read(arguments,1),i=t.x,r=t.y,a=Math.cos(e),o=Math.sin(e),h=i-i*a+r*o,c=r-i*o-r*a,f=this._a,g=this._b,v=this._c,b=this._d;return this._a=a*f+o*v,this._b=a*g+o*b,this._c=-o*f+a*v,this._d=-o*g+a*b,this._tx+=h*f+c*v,this._ty+=h*g+c*b,this._changed(),this},shear:function(){var e=arguments,t=L.read(e),i=L.read(e,0,{readNull:!0});i&&this.translate(i);var r=this._a,a=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*a,i&&this.translate(i.negate()),this._changed(),this},skew:function(){var e=arguments,t=L.read(e),i=L.read(e,0,{readNull:!0}),r=Math.PI/180,a=new L(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(a,i)},append:function(e,t){if(e){var i=this._a,r=this._b,a=this._c,o=this._d,h=e._a,c=e._c,f=e._b,g=e._d,v=e._tx,b=e._ty;this._a=h*i+f*a,this._c=c*i+g*a,this._b=h*r+f*o,this._d=c*r+g*o,this._tx+=v*i+b*a,this._ty+=v*r+b*o,t||this._changed()}return this},prepend:function(e,t){if(e){var i=this._a,r=this._b,a=this._c,o=this._d,h=this._tx,c=this._ty,f=e._a,g=e._c,v=e._b,b=e._d,_=e._tx,m=e._ty;this._a=f*i+g*r,this._c=f*a+g*o,this._b=v*i+b*r,this._d=v*a+b*o,this._tx=f*h+g*c+_,this._ty=v*h+b*c+m,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,i=this._c,r=this._d,a=this._tx,o=this._ty,h=e*r-t*i,c=null;return h&&!isNaN(h)&&isFinite(a)&&isFinite(o)&&(this._a=r/h,this._b=-t/h,this._c=-i/h,this._d=e/h,this._tx=(i*o-r*a)/h,this._ty=(t*a-e*o)/h,c=this),c},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new re(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,i){return arguments.length<3?this._transformPoint(L.read(arguments)):this._transformCoordinates(e,t,i)},_transformPoint:function(e,t,i){var r=e.x,a=e.y;return t||(t=new L),t._set(r*this._a+a*this._c+this._tx,r*this._b+a*this._d+this._ty,i)},_transformCoordinates:function(e,t,i){for(var r=0,a=2*i;r<a;r+=2){var o=e[r],h=e[r+1];t[r]=o*this._a+h*this._c+this._tx,t[r+1]=o*this._b+h*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,i=e.y,r=t+e.width,a=i+e.height,o=[t,i,r,i,r,a,t,a];return this._transformCoordinates(o,o,4)},_transformBounds:function(e,t,i){for(var r=this._transformCorners(e),a=r.slice(0,2),o=a.slice(),h=2;h<8;h++){var c=r[h],f=h&1;c<a[f]?a[f]=c:c>o[f]&&(o[f]=c)}return t||(t=new X),t._set(a[0],a[1],o[0]-a[0],o[1]-a[1],i)},inverseTransform:function(){return this._inverseTransform(L.read(arguments))},_inverseTransform:function(e,t,i){var r=this._a,a=this._b,o=this._c,h=this._d,c=this._tx,f=this._ty,g=r*h-a*o,v=null;if(g&&!isNaN(g)&&isFinite(c)&&isFinite(f)){var b=e.x-this._tx,_=e.y-this._ty;t||(t=new L),v=t._set((b*h-_*o)/g,(_*r-b*a)/g,i)}return v},decompose:function(){var e=this._a,t=this._b,i=this._c,r=this._d,a=e*r-t*i,o=Math.sqrt,h=Math.atan2,c=180/Math.PI,f,g,v;if(e!==0||t!==0){var b=o(e*e+t*t);f=Math.acos(e/b)*(t>0?1:-1),g=[b,a/b],v=[h(e*i+t*r,b*b),0]}else if(i!==0||r!==0){var _=o(i*i+r*r);f=Math.asin(i/_)*(r>0?1:-1),g=[a/_,_],v=[0,h(e*i+t*r,_*_)]}else f=0,v=g=[0,0];return{translation:this.getTranslation(),rotation:f*c,scaling:new L(g),skewing:new L(v[0]*c,v[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new L(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},d.each(["a","b","c","d","tx","ty"],function(e){var t=d.capitalize(e),i="_"+e;this["get"+t]=function(){return this[i]},this["set"+t]=function(r){this[i]=r,this._changed()}},{})),ge=d.extend({_class:"Line",initialize:function(t,i,r,a,o){var h=!1;arguments.length>=4?(this._px=t,this._py=i,this._vx=r,this._vy=a,h=o):(this._px=t.x,this._py=t.y,this._vx=i.x,this._vy=i.y,h=r),h||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new L(this._px,this._py)},getVector:function(){return new L(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return ge.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return ge.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return ge.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return L.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return L.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,i,r,a,o,h,c,f,g){f||(i-=e,r-=t,h-=a,c-=o);var v=i*c-r*h;if(!K.isMachineZero(v)){var b=e-a,_=t-o,m=(h*_-c*b)/v,T=(i*_-r*b)/v,x=1e-12,E=-x,w=1+x;if(g||E<m&&m<w&&E<T&&T<w)return g||(m=m<=0?0:m>=1?1:m),new L(e+m*i,t+m*r)}},getSide:function(e,t,i,r,a,o,h,c){h||(i-=e,r-=t);var f=a-e,g=o-t,v=f*r-g*i;return!c&&K.isMachineZero(v)&&(v=(f*i+f*i)/(i*i+r*r),v>=0&&v<=1&&(v=0)),v<0?-1:v>0?1:0},getSignedDistance:function(e,t,i,r,a,o,h){return h||(i-=e,r-=t),i===0?r>0?a-e:e-a:r===0?i<0?o-t:t-o:((a-e)*r-(o-t)*i)/(r>i?r*Math.sqrt(1+i*i/(r*r)):i*Math.sqrt(1+r*r/(i*i)))},getDistance:function(e,t,i,r,a,o,h){return Math.abs(ge.getSignedDistance(e,t,i,r,a,o,h))}}}),Le=q.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){q.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ot(null,null,this),this._view=ct.create(this,t||tt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return d.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var r=this._changes;if(r&&t){var a=this._changesById,o=t._id,h=a[o];h?h.flags|=e:r.push(a[o]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ze({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:me,match:function(i){var r=i._definition,a=r._id;return t[a]||(t[a]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var i in e){var r=e[i],a=r._selection;a&1&&r.isInserted()?t.push(r):a||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,i=this._selectionItems;e._selection?i[t]!==e&&(this._selectionCount++,i[t]=e):i[t]===e&&(this._selectionCount--,delete i[t])},selectAll:function(){for(var e=this._children,t=0,i=e.length;t<i;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(s,e)},insertLayer:function(e,t){if(t instanceof ze){t._remove(!1,!0),d.splice(this._children,[t],e,0),t._setProject(this,!0);var i=t._name;i&&t.setName(i),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,i){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(s,new ze(ce.NO_INSERT),!0)).insertChild(e,t),i&&t.activate&&t.activate(),t},getItems:function(e){return ce._getItems(this,e)},getItem:function(e){return ce._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return d.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var i=t[e];if(i){for(var r in i){var a=i[r];for(var o in t){var h=t[o];h&&h!=i&&delete h[a._id]}a.remove()}t[e]=null}}},draw:function(e,t,i){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,a=new d({offset:new L(0,0),pixelRatio:i,viewMatrix:t.isIdentity()?null:t,matrices:[new re],updateMatrix:!0}),o=0,h=r.length;o<h;o++)r[o].draw(e,a);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var c=this._selectionItems,f=this._scope.settings.handleSize,g=this._updateVersion;for(var v in c)c[v]._drawSelection(e,t,f,c,g);e.restore()}}}),ce=d.extend(S,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=d.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new re,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return d.each(e,function(t){this._events[t]={install:function(i){this.getView()._countItemEvent(i,1)},uninstall:function(i){this.getView()._countItemEvent(i,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var i=e&&d.isPlainObject(e),r=i&&e.internal===!0,a=this._matrix=new re,o=i&&e.project||Ye.project,h=Ye.settings;return this._id=r?null:$.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,t&&a.translate(t),a._owner=this,this._style=new Ot(o._currentStyle,this,o),r||i&&e.insert==!1||!h.insertItems&&!(i&&e.insert===!0)?this._setProject(o):(i&&e.parent||o)._insertItem(s,this,!0),i&&e!==ce.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(e,t){var i={},r=this;function a(o){for(var h in o){var c=r[h];d.equals(c,h==="leading"?o.fontSize*1.2:o[h])||(i[h]=d.serialize(c,e,h!=="data",t))}}return a(this._serializeFields),this instanceof _e||a(this._style._defaults),[this._class,i]},_changed:function(e){var t=this._symbol,i=this._parent||t,r=this._project;e&8&&(this._bounds=this._position=this._decomposed=s),e&16&&(this._globalMatrix=s),i&&e&72&&ce._clearBoundsCache(i),e&2&&ce._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var i=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in i||(i[e]=this)}this._name=e||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},d.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=d.capitalize(e),i="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[i]},this["set"+t]=function(a){a!=this[i]&&(this[i]=a,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var i=this._selection;this.setSelection(t?i|e:i&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,i=e.length;t<i;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,i=0,r=t.length;i<r;i++)t[i].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var i=0,r=e.length;i<r;i++)if(!e[i].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var i=0,r=t.length;i<r;i++)t[i].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?L:ee,i=this._position||(this._position=this._getPositionFromBounds());return new t(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(L.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new ee(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=L.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},d.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(i){return this.getBounds(i,e)}},{beans:!0,getBounds:function(e,t){var i=t||e instanceof re,r=d.set({},i?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var a=this._getCachedBounds(i&&e,r).rect;return arguments.length?a:new J(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var e=X.read(arguments),t=this.getBounds(),i=this._matrix,r=new re,a=e.getCenter();r.translate(a),(e.width!=t.width||e.height!=t.height)&&(i.isInvertible()||(i.set(i._backup||new re().translate(i.getTranslation())),t=this.getBounds()),r.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),a=t.getCenter(),r.translate(-a.x,-a.y),this.transform(r)},_getBounds:function(e,t){var i=this._children;return!i||!i.length?new X:(ce._updateBoundsCache(this,t.cacheItem),ce._getBounds(i,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,i){e=e&&e._orNullIfIdentity();var r=t.internal&&!i,a=t.cacheItem,o=r?null:this._matrix._orNullIfIdentity(),h=a&&(!e||e.equals(o))&&this._getBoundsCacheKey(t,r),c=this._bounds;if(ce._updateBoundsCache(this._parent||this._symbol,a),h&&c&&h in c){var f=c[h];return{rect:f.rect.clone(),nonscaling:f.nonscaling}}var g=this._getBounds(e||o,t),v=g.rect||g,b=this._style,_=g.nonscaling||b.hasStroke()&&!b.getStrokeScaling();if(h){c||(this._bounds=c={});var f=c[h]={rect:v.clone(),nonscaling:_,internal:r}}return{rect:v,nonscaling:_}},_getStrokeMatrix:function(e,t){var i=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=i?i.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var i=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[i]||(r.list.push(t),r.ids[i]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=s;for(var i=0,r=t.list,a=r.length;i<a;i++){var o=r[i];o!==e&&(o._bounds=o._position=s,o._boundsCache&&ce._clearBoundsCache(o))}}},_getBounds:function(e,t,i){var r=1/0,a=-r,o=r,h=a,c=!1;i=i||{};for(var f=0,g=e.length;f<g;f++){var v=e[f];if(v._visible&&!v.isEmpty(!0)){var b=v._getCachedBounds(t&&t.appended(v._matrix),i,!0),_=b.rect;r=Math.min(_.x,r),o=Math.min(_.y,o),a=Math.max(_.x+_.width,a),h=Math.max(_.y+_.height,h),b.nonscaling&&(c=!0)}}return{rect:isFinite(r)?new X(r,o,a-r,h-o):new X,nonscaling:c}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var i=this._decomposed;this.rotate(e-t),i&&(i.rotation=e,this._decomposed=i)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new ee(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=L.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var i=this.getRotation(),r=this._decomposed,a=new re,o=K.isZero;if(o(e.x)||o(e.y))a.translate(r.translation),i&&a.rotate(i),a.scale(t.x,t.y),this._matrix.set(a);else{var h=this.getPosition(!0);a.translate(h),i&&a.rotate(i),a.scale(t.x/e.x,t.y/e.y),i&&a.rotate(-i),a.translate(h.negate()),this.transform(a)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var i=this._parent,r=[];i;){if(!i._globalMatrix){t=null;for(var a=0,o=r.length;a<o;a++)r[a]._globalMatrix=null;break}r.push(i),i=i._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&t.prepend(i.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var i=this._children,r=0,a=i&&i.length;r<a;r++)i[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var i=this._children,r=0,a=i&&i.length;r<a;r++)i[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof ze)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return d.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(ce.NO_INSERT),i=this._children,r=d.pick(e?e.insert:s,e===s||e===!0),a=d.pick(e?e.deep:s,!0);i&&t.copyAttributes(this),(!i||a)&&t.copyContent(this),i||t.copyAttributes(this),r&&t.insertAbove(this);var o=this._name,h=this._parent;if(o&&h){for(var i=h._children,c=o,f=1;i[o];)o=c+" "+f++;o!==c&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,i=0,r=t&&t.length;i<r;i++)this.addChild(t[i].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,a=i.length;r<a;r++){var o=i[r];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var h=e._data,c=e._name;this._data=h?d.clone(h):null,c&&this.setName(c)},rasterize:function(e,t){var i,r,a;d.isPlainObject(e)?(i=e.resolution,r=e.insert,a=e.raster):(i=e,r=t),a?a.matrix.reset(!0):a=new Ne(ce.NO_INSERT);var o=this.getStrokeBounds(),h=(i||this.getView().getResolution())/72,c=o.getTopLeft().floor(),f=o.getBottomRight().ceil(),g=new H(f.subtract(c)),v=g.multiply(h);if(a.setSize(v,!0),!v.isZero()){var b=a.getContext(!0),_=new re().scale(h).translate(c.negate());b.save(),_.applyToContext(b),this.draw(b,new d({matrices:[_]})),b.restore()}return a.transform(new re().translate(c.add(g.divide(2))).scale(1/h)),(r===s||r)&&a.insertAbove(this),a},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(L.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var i=t.length-1;i>=0;i--)if(t[i].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return X.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new fe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof ce?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var r=arguments;return this._hitTest(L.read(r),Oe.getOptions(r))}function t(){var r=arguments,a=L.read(r),o=Oe.getOptions(r),h=[];return this._hitTest(a,new d({all:h},o)),h}function i(r,a,o,h){var c=this._children;if(c)for(var f=c.length-1;f>=0;f--){var g=c[f],v=g!==h&&g._hitTest(r,a,o);if(v&&!a.all)return v}return null}return Le.inject({hitTest:e,hitTestAll:t,_hitTest:i}),{hitTest:e,hitTestAll:t,_hitTestChildren:i}},{_hitTest:function(e,t,i){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,a=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(t.tolerance,1e-12),h=t._tolerancePadding=new H(fe._getStrokePadding(o,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(e))return null;var c=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==d.hyphenate(this._class)||t.class&&!(this instanceof t.class)),f=t.match,g=this,v,b;function _(p){return p&&f&&!f(p)&&(p=null),p&&t.all&&t.all.push(p),p}function m(p,C){var P=C?v["get"+C]():g.getPosition();if(e.subtract(P).divide(h).length<=1)return new Oe(p,g,{name:C?d.hyphenate(C):p,point:P})}var T=t.position,x=t.center,E=t.bounds;if(c&&this._parent&&(T||x||E)){if((x||E)&&(v=this.getInternalBounds()),b=T&&m("position")||x&&m("center","Center"),!b&&E)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],k=0;k<8&&!b;k++)b=m("bounds",w[k]);b=_(b)}return b||(b=this._hitTestChildren(e,t,a)||c&&_(this._hitTestSelf(e,t,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),b&&b.point&&(b.point=r.transform(b.point)),b},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new Oe("fill",this)},matches:function(e,t){function i(h,c){for(var f in h)if(h.hasOwnProperty(f)){var g=h[f],v=c[f];if(d.isPlainObject(g)&&d.isPlainObject(v)){if(!i(g,v))return!1}else if(!d.equals(g,v))return!1}return!0}var r=typeof e;if(r==="object"){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;return!0}else{if(r==="function")return e(this);if(e==="match")return t(this);var o=/^(empty|editable)$/.test(e)?this["is"+d.capitalize(e)]():e==="type"?d.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;o=this._class}if(typeof t=="function")return!!t(o);if(t){if(t.test)return t.test(o);if(d.isPlainObject(t))return i(t,o)}return d.equals(o,t)}},getItems:function(e){return ce._getItems(this,e,this._matrix)},getItem:function(e){return ce._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,i,r,a,o){if(!a){var h=typeof i=="object"&&i,c=h&&h.overlapping,f=h&&h.inside,g=c||f,_=g&&X.read([g]);a={items:[],recursive:h&&h.recursive!==!1,inside:!!f,overlapping:!!c,rect:_,path:c&&new fe.Rectangle({rectangle:_,insert:!1})},h&&(i=d.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var v=t._children,b=a.items,_=a.rect;r=_&&(r||new re);for(var m=0,T=v&&v.length;m<T;m++){var x=v[m],E=r&&r.appended(x._matrix),w=!0;if(_){var g=x.getBounds(E);if(!_.intersects(g))continue;_.contains(g)||a.overlapping&&(g.contains(_)||a.path.intersects(x,E))||(w=!1)}if(w&&x.matches(i)&&(b.push(x),o)||(a.recursive!==!1&&e(x,i,E,a,o),o&&b.length>0))break}return b}}},{importJSON:function(e){var t=d.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(s,e)},insertChild:function(e,t){var i=t?this.insertChildren(e,[t]):null;return i&&i[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var i=this._children;if(i&&t&&t.length>0){t=d.slice(t);for(var r={},a=t.length-1;a>=0;a--){var o=t[a],h=o&&o._id;!o||r[h]?t.splice(a,1):(o._remove(!1,!0),r[h]=!0)}d.splice(i,t,e,0);for(var c=this._project,f=c._changes,a=0,g=t.length;a<g;a++){var o=t[a],v=o._name;o._parent=this,o._setProject(c,!0),v&&o.setName(v),f&&o._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var i=e&&e._getOwner(),r=e!==this&&i?this:null;return r&&(r._remove(!1,!0),i._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(s,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var i=t[0].reduce(e);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,i=e._namedChildren,r=this._name,a=i[r],o=a?a.indexOf(this):-1;o!==-1&&(t[r]==this&&delete t[r],a.splice(o,1),a.length?t[r]=a[0]:delete i[r])}},_remove:function(e,t){var i=this._getOwner(),r=this._project,a=this._index;return this._style&&this._style._dispose(),i?(this._name&&this._removeNamed(),a!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),d.splice(i._children,null,a,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&i._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=d.pick(t,this._children.length);for(var i=d.splice(this._children,null,e,t-e),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,i=t?t.length:0;if(e){for(var r=0;r<i;r++)if(!t[r].isEmpty(e))return!1;return!0}return!i},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(h){var c=[];do c.unshift(h);while(h=h._parent);return c}for(var i=t(this),r=t(e),a=0,o=Math.min(i.length,r.length);a<o;a++)if(i[a]!=r[a])return i[a]._index<r[a]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},d.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var i=arguments,r=(t?d:L).read(i),a=L.read(i,0,{readNull:!0});return this.transform(new re()[e](r,a||this.getPosition(!0)))}},{translate:function(){var e=new re;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,i){var r=this._matrix,a=e&&!e.isIdentity(),o=i&&this._canApplyMatrix||this._applyMatrix&&(a||!r.isIdentity()||t&&this._children);if(!a&&!o)return this;if(a){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var h=this._style,c=h.getFillColor(!0),f=h.getStrokeColor(!0);c&&c.transform(e),f&&f.transform(e)}if(o&&(o=this._transformContent(r,t,i))){var g=this._pivot;g&&r._transformPoint(g,g,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var v=this._bounds,b=this._position;(a||o)&&this._changed(25);var _=a&&v&&e.decompose();if(_&&_.skewing.isZero()&&_.rotation%90===0){for(var m in v){var T=v[m];if(T.nonscaling)delete v[m];else if(o||!T.internal){var x=T.rect;e._transformBounds(x,x)}}this._bounds=v;var E=v[this._getBoundsCacheKey(this._boundsOptions||{})];E&&(this._position=this._getPositionFromBounds(E.rect))}else a&&b&&this._pivot&&(this._position=e._transformPoint(b,b));return this},_transformContent:function(e,t,i){var r=this._children;if(r){for(var a=0,o=r.length;a<o;a++)r[a].transform(e,t,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(L.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(L.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(L.read(arguments))},localToParent:function(){return this._matrix._transformPoint(L.read(arguments))},fitBounds:function(e,t){e=X.read(arguments);var i=this.getBounds(),r=i.height/i.width,a=e.height/e.width,o=(t?r>a:r<a)?e.width/i.width:e.height/i.height,h=new X(new L,new H(i.width*o,i.height*o));h.setCenter(e.getCenter()),this.setBounds(h)}}),{_setStyles:function(e,t,i){var r=this._style,a=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,a)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,a),e.lineWidth=r.getStrokeWidth();var o=r.getStrokeJoin(),h=r.getStrokeCap(),c=r.getMiterLimit();if(o&&(e.lineJoin=o),h&&(e.lineCap=h),c&&(e.miterLimit=c),Ye.support.nativeDash){var f=r.getDashArray(),g=r.getDashOffset();f&&f.length&&("setLineDash"in e?(e.setLineDash(f),e.lineDashOffset=g):(e.mozDash=f,e.mozDashOffset=g))}}if(r.hasShadow()){var v=t.pixelRatio||1,b=i._shiftless().prepend(new re().scale(v,v)),_=b.transform(new L(r.getShadowBlur(),0)),m=b.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=_.getLength(),e.shadowOffsetX=m.x,e.shadowOffsetY=m.y}},draw:function(e,t,i){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=t.matrices,a=t.viewMatrix,o=this._matrix,h=r[r.length-1].appended(o);if(!!h.isInvertible()){a=a?a.appended(h):h,r.push(h),t.updateMatrix&&(this._globalMatrix=h);var c=this._blendMode,f=K.clamp(this._opacity,0,1),g=c==="normal",v=ji.nativeModes[c],b=g&&f===1||t.dontStart||t.clip||(v||g&&f<1)&&this._canComposite(),_=t.pixelRatio||1,m,T,x;if(!b){var E=this.getStrokeBounds(a);if(!E.width||!E.height){r.pop();return}x=t.offset,T=t.offset=E.getTopLeft().floor(),m=e,e=tt.getContext(E.getSize().ceil().add(1).multiply(_)),_!==1&&e.scale(_,_)}e.save();var w=i?i.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,k=!b&&t.clipItem,p=!w||k;if(b?(e.globalAlpha=f,v&&(e.globalCompositeOperation=c)):p&&e.translate(-T.x,-T.y),p&&(b?o:a).applyToContext(e),k&&t.clipItem.draw(e,t.extend({clip:!0})),w){e.setTransform(_,0,0,_,0,0);var C=t.offset;C&&e.translate(-C.x,-C.y)}this._draw(e,t,a,w),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),b||(ji.process(c,e,m,f,T.subtract(x).multiply(_)),tt.release(e),t.offset=x)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof ae)return t._isUpdated(e);var i=this._updateVersion===e;return!i&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,i=!0),i},_drawSelection:function(e,t,i,r,a){var o=this._selection,h=o&1,c=o&2||h&&this._selectBounds,f=o&4;if(this._drawSelected||(h=!1),(h||c||f)&&this._isUpdated(a)){var g,v=this.getSelectedColor(!0)||(g=this.getLayer())&&g.getSelectedColor(!0),b=t.appended(this.getGlobalMatrix(!0)),_=i/2;if(e.strokeStyle=e.fillStyle=v?v.toCanvasStyle(e):"#009dec",h&&this._drawSelected(e,b,r),f){var m=this.getPosition(!0),T=this._parent,x=T?T.localToGlobal(m):m,E=x.x,w=x.y;e.beginPath(),e.arc(E,w,_,0,Math.PI*2,!0),e.stroke();for(var k=[[0,-1],[1,0],[0,1],[-1,0]],p=_,C=i+1,P=0;P<4;P++){var I=k[P],A=I[0],z=I[1];e.moveTo(E+A*p,w+z*p),e.lineTo(E+A*C,w+z*C),e.stroke()}}if(c){var N=b._transformCorners(this.getInternalBounds());e.beginPath();for(var P=0;P<8;P++)e[P?"lineTo":"moveTo"](N[P],N[++P]);e.closePath(),e.stroke();for(var P=0;P<8;P++)e.fillRect(N[P]-_,N[++P]-_,i,i)}}},_canComposite:function(){return!1}},d.each(["down","drag","up","move"],function(e){this["removeOn"+d.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var i="mouse"+t,r=this._project,a=r._removeSets=r._removeSets||{};a[i]=a[i]||{},a[i][this._id]=this}return this}}),{tween:function(e,t,i){i||(i=t,t=e,e=null,i||(i=t,t=null));var r=i&&i.easing,a=i&&i.start,o=i!=null&&(typeof i=="number"?i:i.duration),h=new Pr(this,e,t,o,r,a);function c(f){h._handleFrame(f.time*1e3),h.running||this.off("frame",c)}return o&&this.on("frame",c),h},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),_e=ce.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=s)},_getClipItem:function(){var e=this._clipItem;if(e===s){e=null;for(var t=this._children,i=0,r=t.length;i<r;i++)if(t[i]._clipMask){e=t[i];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,i){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),d.set({},i,{stroke:!1})):e.base.call(this,t,i)},_hitTestChildren:function e(t,i,r){var a=this._getClipItem();return(!a||a.contains(t))&&e.base.call(this,t,i,r,a)},_draw:function(e,t){var i=t.clip,r=!i&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),i?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var a=this._children,o=0,h=a.length;o<h;o++){var c=a[o];c!==r&&c.draw(e,t)}}}),ze=_e.extend({_class:"Layer",initialize:function(){_e.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),xe=ce.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,i){this._initialize(t,i)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&d.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new te(e.width,e.height,this,"setSize")},setSize:function(){var e=H.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,i=e.width,r=e.height;t==="rectangle"?this._radius.set(H.min(this._radius,e.divide(2).abs())):t==="circle"?(i=r=(i+r)/2,this._radius=i/2):t==="ellipse"&&this._radius._set(i/2,r/2),this._size._set(i,r),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new te(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var i=e*2;this._radius=e,this._size._set(i,i)}else if(e=H.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var i=H.max(this._size,e.multiply(2));this._size.set(i)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new fe[d.capitalize(this._type)]({center:new L,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Ye.settings.applyMatrix&&t.setApplyMatrix(!0),(e===s||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,i,r){var a=this._style,o=a.hasFill(),h=a.hasStroke(),c=t.dontFinish||t.clip,f=!r;if(o||h||c){var g=this._type,v=this._radius,b=g==="circle";if(t.dontStart||e.beginPath(),f&&b)e.arc(0,0,v,0,Math.PI*2,!0);else{var _=b?v:v.width,m=b?v:v.height,T=this._size,x=T.width,E=T.height;if(f&&g==="rectangle"&&_===0&&m===0)e.rect(-x/2,-E/2,x,E);else{var w=x/2,k=E/2,p=1-.5522847498307936,C=_*p,P=m*p,I=[-w,-k+m,-w,-k+P,-w+C,-k,-w+_,-k,w-_,-k,w-C,-k,w,-k+P,w,-k+m,w,k-m,w,k-P,w-C,k,w-_,k,-w+_,k,-w+C,k,-w,k-P,-w,k-m];r&&r.transform(I,I,32),e.moveTo(I[0],I[1]),e.bezierCurveTo(I[2],I[3],I[4],I[5],I[6],I[7]),w!==_&&e.lineTo(I[8],I[9]),e.bezierCurveTo(I[10],I[11],I[12],I[13],I[14],I[15]),k!==m&&e.lineTo(I[16],I[17]),e.bezierCurveTo(I[18],I[19],I[20],I[21],I[22],I[23]),w!==_&&e.lineTo(I[24],I[25]),e.bezierCurveTo(I[26],I[27],I[28],I[29],I[30],I[31])}}e.closePath()}!c&&(o||h)&&(this._setStyles(e,t,i),o&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),h&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var i=new X(this._size).setCenter(0,0),r=this._style,a=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(i=e._transformBounds(i)),a?i.expand(fe._getStrokePadding(a,this._getStrokeMatrix(e,t))):i}},new function(){function e(i,r,a){var o=i._radius;if(!o.isZero())for(var h=i._size.divide(2),c=1;c<=4;c++){var f=new L(c>1&&c<4?-1:1,c>2?-1:1),g=f.multiply(h),v=g.subtract(f.multiply(o)),b=new X(a?g.add(f.multiply(a)):g,v);if(b.contains(r))return{point:v,quadrant:c}}}function t(i,r,a,o){var h=i.divide(r);return(!o||h.isInQuadrant(o))&&h.subtract(h.normalize()).multiply(r).divide(a).length<=1}return{_contains:function i(r){if(this._type==="rectangle"){var a=e(this,r);return a?r.subtract(a.point).divide(this._radius).getLength()<=1:i.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function i(r,a,o,h){var c=!1,f=this._style,g=a.stroke&&f.hasStroke(),v=a.fill&&f.hasFill();if(g||v){var b=this._type,_=this._radius,m=g?f.getStrokeWidth()/2:0,T=a._tolerancePadding.add(fe._getStrokePadding(m,!f.getStrokeScaling()&&h));if(b==="rectangle"){var x=T.multiply(2),E=e(this,r,x);if(E)c=t(r.subtract(E.point),_,T,E.quadrant);else{var w=new X(this._size).setCenter(0,0),k=w.expand(x),p=w.expand(x.negate());c=k._containsPoint(r)&&!p._containsPoint(r)}}else c=t(r,_,T)}return c?new Oe(g?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function e(t,i,r,a,o){var h=d.create(xe.prototype);return h._type=t,h._size=r,h._radius=a,h._initialize(d.getNamed(o),i),h}return{Circle:function(){var t=arguments,i=L.readNamed(t,"center"),r=d.readNamed(t,"radius");return e("circle",i,new H(r*2),r,t)},Rectangle:function(){var t=arguments,i=X.readNamed(t,"rectangle"),r=H.min(H.readNamed(t,"radius"),i.getSize(!0).divide(2));return e("rectangle",i.getCenter(!0),i.getSize(!0),r,t)},Ellipse:function(){var t=arguments,i=xe._readEllipse(t),r=i.radius;return e("ellipse",i.center,r.multiply(2),r,t)},_readEllipse:function(t){var i,r;if(d.hasNamed(t,"radius"))i=L.readNamed(t,"center"),r=H.readNamed(t,"radius");else{var a=X.readNamed(t,"rectangle");i=a.getCenter(!0),r=a.getSize(!0).divide(2)}return{center:i,radius:r}}}}}),Ne=ce.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==s&&L.read(arguments))){var r,a=typeof t,o=a==="string"?y.getElementById(t):a==="object"?t:null;if(o&&o!==ce.NO_INSERT){if(o.getContext||o.naturalHeight!=null)r=o;else if(o){var h=H.read(arguments);h.isZero()||(r=tt.getCanvas(h))}}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new H,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,i=e._canvas;if(t)this._setImage(t);else if(i){var r=tt.getCanvas(e._size);r.getContext("2d").drawImage(i,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new te(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var i=H.read(arguments);if(i.equals(this._size))t&&this.clear();else if(i.width>0&&i.height>0){var r=!t&&this.getElement();this._setImage(tt.getCanvas(i)),r&&this.getContext(!0).drawImage(r,0,0,i.width,i.height)}else this._canvas&&tt.release(this._canvas),this._size=i.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new L(0,0).transform(e),i=new L(1,0).transform(e).subtract(t),r=new L(0,1).transform(e).subtract(t);return new H(72/i.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function i(r){var a=t.getView(),o=r&&r.type||"load";a&&t.responds(o)&&(Ye=a._scope,t.emit(o,new Me(r)))}this._setImage(e),this._loaded?setTimeout(i,0):e&&ht.add(e,{load:function(r){t._setImage(e),i(r)},error:i})},_setImage:function(e){this._canvas&&tt.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new H(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=tt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){tt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new l.Image,i=this._crossOrigin;i&&(t.crossOrigin=i),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=X.read(arguments),t=tt.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=X.read(arguments),t=new Ne(ce.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(e){var t=L.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,i;if(e?e instanceof Ce?(i=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new X(e):"x"in e&&(t=new X(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,a=Math.min(t.width,r),o=Math.min(t.height,r),h=Ne._sampleContext;h?h.clearRect(0,0,r+1,r+1):h=Ne._sampleContext=tt.getContext(new H(r)),h.save();var c=new re().scale(a/t.width,o/t.height).translate(-t.x,-t.y);c.applyToContext(h),i&&i.draw(h,new d({clip:!0,matrices:[c]})),this._matrix.applyToContext(h);var f=this.getElement(),g=this._size;f&&h.drawImage(f,-g.width/2,-g.height/2),h.restore();for(var v=h.getImageData(.5,.5,Math.ceil(a),Math.ceil(o)).data,b=[0,0,0],_=0,m=0,T=v.length;m<T;m+=4){var x=v[m+3];_+=x,x/=255,b[0]+=v[m]*x,b[1]+=v[m+1]*x,b[2]+=v[m+2]*x}for(var m=0;m<3;m++)b[m]/=_;return _?Ae.read(b):null},getPixel:function(){var e=L.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new Ae("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=L.read(e),i=Ae.read(e),r=i._convert("rgb"),a=i._alpha,o=this.getContext(!0),h=o.createImageData(1,1),c=h.data;c[0]=r[0]*255,c[1]=r[1]*255,c[2]=r[2]*255,c[3]=a!=null?a*255:255,o.putImageData(h,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=H.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=X.read(arguments);return e.isEmpty()&&(e=new X(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=L.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var i=new X(this._size).setCenter(0,0);return e?e._transformBounds(i):i},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new Oe("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,i){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=K.clamp(this._opacity,0,1),this._setStyles(e,t,i);var a=this._smoothing,o=a==="off";at.setPrefixed(e,o?"imageSmoothingEnabled":"imageSmoothingQuality",o?!1:a),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),me=ce.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==s&&L.read(arguments,1))||this.setDefinition(t instanceof ve?t:new ve(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(e),t)},_hitTestSelf:function(e,t,i){var r=t.extend({all:!1}),a=this._definition._item._hitTest(e,r,i);return a&&(a.item=this),a},_draw:function(e,t){this._definition._item.draw(e,t)}}),ve=d.extend({_class:"SymbolDefinition",initialize:function(t,i){this._id=$.get(),this.project=Ye.project,t&&this.setItem(t,i)},_serialize:function(e,t){return t.add(this,function(){return d.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&ce._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new L),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new me(this,e)},clone:function(){return new ve(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),Oe=d.extend({_class:"HitResult",initialize:function(t,i,r){this.type=t,this.item=i,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&d.read(e);return new d({type:null,tolerance:Ye.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),he=d.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,r,a,o,h){var c=arguments.length,f,g,v,b;c>0&&(t==null||typeof t=="object"?c===1&&t&&"point"in t?(f=t.point,g=t.handleIn,v=t.handleOut,b=t.selection):(f=t,g=i,v=r,b=a):(f=[t,i],g=r!==s?[r,a]:null,v=o!==s?[o,h]:null)),new et(f,this,"_point"),new et(g,this,"_handleIn"),new et(v,this,"_handleOut"),b&&this.setSelection(b)},_serialize:function(e,t){var i=this._point,r=this._selection,a=r||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return r&&a.push(r),d.serialize(a,e,!0,t)},_changed:function(e){var t=this._path;if(!!t){var i=t._curves,r=this._index,a;i&&((!e||e===this._point||e===this._handleIn)&&(a=r>0?i[r-1]:t._closed?i[i.length-1]:null)&&a._changed(),(!e||e===this._point||e===this._handleOut)&&(a=i[r])&&a._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(L.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(L.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(L.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,i=this._path;this._selection=e=e||0,i&&e!==t&&(i._updateSelection(this,t,e),i._changed(257))},_changeSelection:function(e,t){var i=this._selection;this.setSelection(t?i|e:i&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new Xe(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,i){var r=e||{},a=r.type,o=r.factor,h=this.getPrevious(),c=this.getNext(),f=(h||this)._point,g=this._point,v=(c||this)._point,b=f.getDistance(g),_=g.getDistance(v);if(!a||a==="catmull-rom"){var m=o===s?.5:o,T=Math.pow(b,m),x=T*T,E=Math.pow(_,m),w=E*E;if(!t&&h){var k=2*w+3*E*T+x,p=3*E*(E+T);this.setHandleIn(p!==0?new L((w*f._x+k*g._x-x*v._x)/p-g._x,(w*f._y+k*g._y-x*v._y)/p-g._y):new L)}if(!i&&c){var k=2*x+3*T*E+w,p=3*T*(T+E);this.setHandleOut(p!==0?new L((x*v._x+k*g._x-w*f._x)/p-g._x,(x*v._y+k*g._y-w*f._y)/p-g._y):new L)}}else if(a==="geometric"){if(h&&c){var C=f.subtract(v),P=o===s?.4:o,I=P*b/(b+_);t||this.setHandleIn(C.multiply(I)),i||this.setHandleOut(C.multiply(I-P))}}else throw new Error("Smoothing method '"+a+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,i=e.clone();e.set(t),t.set(i)},reversed:function(){return new he(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new he(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,i){var r=1-i,a=i,o=e._point,h=t._point,c=e._handleIn,f=t._handleIn,g=t._handleOut,v=e._handleOut;this._point._set(r*o._x+a*h._x,r*o._y+a*h._y,!0),this._handleIn._set(r*c._x+a*f._x,r*c._y+a*f._y,!0),this._handleOut._set(r*v._x+a*g._x,r*v._y+a*g._y,!0),this._changed()},_transformCoordinates:function(e,t,i){var r=this._point,a=!i||!this._handleIn.isZero()?this._handleIn:null,o=!i||!this._handleOut.isZero()?this._handleOut:null,h=r._x,c=r._y,f=2;return t[0]=h,t[1]=c,a&&(t[f++]=a._x+h,t[f++]=a._y+c),o&&(t[f++]=o._x+h,t[f++]=o._y+c),e&&(e._transformCoordinates(t,t,f/2),h=t[0],c=t[1],i?(r._x=h,r._y=c,f=2,a&&(a._x=t[f++]-h,a._y=t[f++]-c),o&&(o._x=t[f++]-h,o._y=t[f++]-c)):(a||(t[f++]=h,t[f++]=c),o||(t[f++]=h,t[f++]=c))),t}}),et=L.extend({initialize:function(t,i,r){var a,o,h;if(!t)a=o=0;else if((a=t[0])!==s)o=t[1];else{var c=t;(a=c.x)===s&&(c=L.read(arguments),a=c.x),o=c.y,h=c.selected}this._x=a,this._y=o,this._owner=i,i[r]=this,h&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=K.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),ne=d.extend({_class:"Curve",beans:!0,initialize:function(t,i,r,a,o,h,c,f){var g=arguments.length,v,b,_,m,T,x;g===3?(this._path=t,v=i,b=r):g?g===1?"segment1"in t?(v=new he(t.segment1),b=new he(t.segment2)):"point1"in t?(_=t.point1,T=t.handle1,x=t.handle2,m=t.point2):Array.isArray(t)&&(_=[t[0],t[1]],m=[t[6],t[7]],T=[t[2]-t[0],t[3]-t[1]],x=[t[4]-t[6],t[5]-t[7]]):g===2?(v=new he(t),b=new he(i)):g===4?(_=t,T=i,x=r,m=a):g===8&&(_=[t,i],m=[c,f],T=[r-t,a-i],x=[o-c,h-f]):(v=new he,b=new he),this._segment1=v||new he(_,null,T),this._segment2=b||new he(m,x,null)},_serialize:function(e,t){return d.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=s},clone:function(){return new ne(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return ne.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,i=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(i)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(L.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(L.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(L.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(L.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return ne.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],i=0;i<8;i+=2)t.push(new L(e[i],e[i+1]));return t}},{getLength:function(){return this._length==null&&(this._length=ne.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ne.getArea(this.getValues())},getLine:function(){return new ge(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new ne(ne.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return ne.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var i=1e-8,r=1-i,a=null;if(e>=i&&e<=r){var o=ne.subdivide(this.getValues(),e),h=o[0],c=o[1],f=t||this.hasHandles(),g=this._segment1,v=this._segment2,b=this._path;f&&(g._handleOut._set(h[2]-h[0],h[3]-h[1]),v._handleIn._set(c[4]-c[6],c[5]-c[7]));var _=h[6],m=h[7],T=new he(new L(_,m),f&&new L(h[4]-_,h[5]-m),f&&new L(c[2]-_,c[3]-m));b?(b.insert(g._index+1,T),a=this.getNext()):(this._segment2=T,this._changed(),a=new ne(T,v))}return a},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===s?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===s?.5:t?e:this.getTimeAt(e))},reversed:function(){return new ne(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,i,r){var a=e._point,o=e._handleOut,h=t._handleIn,c=t._point,f=a.x,g=a.y,v=c.x,b=c.y,_=r?[f,g,f,g,v,b,v,b]:[f,g,f+o._x,g+o._y,v+h._x,b+h._y,v,b];return i&&i._transformCoordinates(_,_,4),_},subdivide:function(e,t){var i=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],f=e[6],g=e[7];t===s&&(t=.5);var v=1-t,b=v*i+t*a,_=v*r+t*o,m=v*a+t*h,T=v*o+t*c,x=v*h+t*f,E=v*c+t*g,w=v*b+t*m,k=v*_+t*T,p=v*m+t*x,C=v*T+t*E,P=v*w+t*p,I=v*k+t*C;return[[i,r,b,_,w,k,P,I],[P,I,p,C,x,E,f,g]]},getMonoCurves:function(e,t){var i=[],r=t?0:1,a=e[r+0],o=e[r+2],h=e[r+4],c=e[r+6];if(a>=o==o>=h&&o>=h==h>=c||ne.isStraight(e))i.push(e);else{var f=3*(o-h)-a+c,g=2*(a+h)-4*o,v=o-a,b=1e-8,_=1-b,m=[],T=K.solveQuadratic(f,g,v,m,b,_);if(!T)i.push(e);else{m.sort();var x=m[0],E=ne.subdivide(e,x);i.push(E[0]),T>1&&(x=(m[1]-x)/(1-x),E=ne.subdivide(E[1],x),i.push(E[0])),i.push(E[1])}}return i},solveCubic:function(e,t,i,r,a,o){var h=e[t],c=e[t+2],f=e[t+4],g=e[t+6],v=0;if(!(h<i&&g<i&&c<i&&f<i||h>i&&g>i&&c>i&&f>i)){var b=3*(c-h),_=3*(f-c)-b,m=g-h-b-_;v=K.solveCubic(m,_,b,h-i,r,a,o)}return v},getTimeOf:function(e,t){var i=new L(e[0],e[1]),r=new L(e[6],e[7]),a=1e-12,o=1e-7,h=t.isClose(i,a)?0:t.isClose(r,a)?1:null;if(h===null)for(var c=[t.x,t.y],f=[],g=0;g<2;g++)for(var v=ne.solveCubic(e,g,c[g],f,0,1),b=0;b<v;b++){var _=f[b];if(t.isClose(ne.getPoint(e,_),o))return _}return t.isClose(i,o)?0:t.isClose(r,o)?1:null},getNearestTime:function(e,t){if(ne.isStraight(e)){var i=e[0],r=e[1],a=e[6],o=e[7],h=a-i,c=o-r,f=h*h+c*c;if(f===0)return 0;var g=((t.x-i)*h+(t.y-r)*c)/f;return g<1e-12?0:g>.999999999999?1:ne.getTimeOf(e,new L(i+g*h,r+g*c))}var v=100,b=1/0,_=0;function m(E){if(E>=0&&E<=1){var w=t.getDistance(ne.getPoint(e,E),!0);if(w<b)return b=w,_=E,!0}}for(var T=0;T<=v;T++)m(T/v);for(var x=1/(v*2);x>1e-8;)!m(_-x)&&!m(_+x)&&(x/=2);return _},getPart:function(e,t,i){var r=t>i;if(r){var a=t;t=i,i=a}return t>0&&(e=ne.subdivide(e,t)[1]),i<1&&(e=ne.subdivide(e,(i-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var i=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],f=e[6],g=e[7],v=3*a-2*i-f,b=3*o-2*r-g,_=3*h-2*f-i,m=3*c-2*g-r;return Math.max(v*v,_*_)+Math.max(b*b,m*m)<=16*t*t},getArea:function(e){var t=e[0],i=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],f=e[7];return 3*((f-i)*(r+o)-(c-t)*(a+h)+a*(t-o)-r*(i-h)+f*(o+t/3)-c*(h+i/3))/20},getBounds:function(e){for(var t=e.slice(0,2),i=t.slice(),r=[0,0],a=0;a<2;a++)ne._addBounds(e[a],e[a+2],e[a+4],e[a+6],a,0,t,i,r);return new X(t[0],t[1],i[0]-t[0],i[1]-t[1])},_addBounds:function(e,t,i,r,a,o,h,c,f){function g(P,I){var A=P-I,z=P+I;A<h[a]&&(h[a]=A),z>c[a]&&(c[a]=z)}o/=2;var v=h[a]+o,b=c[a]-o;if(e<v||t<v||i<v||r<v||e>b||t>b||i>b||r>b)if(t<e!=t<r&&i<e!=i<r)g(e,0),g(r,0);else{var _=3*(t-i)-e+r,m=2*(e+i)-4*t,T=t-e,x=K.solveQuadratic(_,m,T,f),E=1e-8,w=1-E;g(r,0);for(var k=0;k<x;k++){var p=f[k],C=1-p;E<=p&&p<=w&&g(C*C*C*e+3*C*C*p*t+3*C*p*p*i+p*p*p*r,o)}}}}},d.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=fe[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),d.each({isStraight:function(e,t,i,r){if(t.isZero()&&i.isZero())return!0;var a=r.subtract(e);if(a.isZero())return!1;if(a.isCollinear(t)&&a.isCollinear(i)){var o=new ge(e,r),h=1e-7;if(o.getDistance(e.add(t))<h&&o.getDistance(r.add(i))<h){var c=a.dot(a),f=a.dot(t)/c,g=a.dot(i)/c;return f>=0&&f<=1&&g<=0&&g>=-1}}return!1},isLinear:function(e,t,i,r){var a=r.subtract(e).divide(3);return t.equals(a)&&i.negate().equals(a)}},function(e,t){this[t]=function(i){var r=this._segment1,a=this._segment2;return e(r._point,r._handleOut,a._handleIn,a._point,i)},this.statics[t]=function(i,r){var a=i[0],o=i[1],h=i[6],c=i[7];return e(new L(a,o),new L(i[2]-a,i[3]-o),new L(i[4]-h,i[5]-c),new L(h,c),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new Xe(this,e):null},getTimeAt:function(e,t){return ne.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=L.read(arguments);return e.isZero()?[]:ne.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(L.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return ne.getTimeOf(this.getValues(),L.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=L.read(arguments),t=this.getValues(),i=ne.getNearestTime(t,e),r=ne.getPoint(t,i);return new Xe(this,i,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return d.each(e,function(t){this[t+"At"]=function(i,r){var a=this.getValues();return ne[t](a,r?i:ne.getTimeAt(a,i))},this[t+"AtTime"]=function(i){return ne[t](this.getValues(),i)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var a=r[0],o=r[1],h=r[2],c=r[3],f=r[4],g=r[5],v=r[6],b=r[7],_=9*(h-f)+3*(v-a),m=6*(a+f)-12*h,T=3*(h-a),x=9*(c-g)+3*(b-o),E=6*(o+g)-12*c,w=3*(c-o);return function(k){var p=(_*k+m)*k+T,C=(x*k+E)*k+w;return Math.sqrt(p*p+C*C)}}function t(r,a){return Math.max(2,Math.min(16,Math.ceil(Math.abs(a-r)*32)))}function i(r,a,o,h){if(a==null||a<0||a>1)return null;var c=r[0],f=r[1],g=r[2],v=r[3],b=r[4],_=r[5],m=r[6],T=r[7],x=K.isZero;x(g-c)&&x(v-f)&&(g=c,v=f),x(b-m)&&x(_-T)&&(b=m,_=T);var E=3*(g-c),w=3*(b-g)-E,k=m-c-E-w,p=3*(v-f),C=3*(_-v)-p,P=T-f-p-C,I,A;if(o===0)I=a===0?c:a===1?m:((k*a+w)*a+E)*a+c,A=a===0?f:a===1?T:((P*a+C)*a+p)*a+f;else{var z=1e-8,N=1-z;if(a<z?(I=E,A=p):a>N?(I=3*(m-b),A=3*(T-_)):(I=(3*k*a+2*w)*a+E,A=(3*P*a+2*C)*a+p),h){I===0&&A===0&&(a<z||a>N)&&(I=b-g,A=_-v);var D=Math.sqrt(I*I+A*A);D&&(I/=D,A/=D)}if(o===3){var b=6*k*a+2*w,_=6*P*a+2*C,V=Math.pow(I*I+A*A,3/2);I=V!==0?(I*_-A*b)/V:0,A=0}}return o===2?new L(A,-I):new L(I,A)}return{statics:{classify:function(r){var a=r[0],o=r[1],h=r[2],c=r[3],f=r[4],g=r[5],v=r[6],b=r[7],_=a*(b-g)+o*(f-v)+v*g-b*f,m=h*(o-b)+c*(v-a)+a*b-o*v,T=f*(c-o)+g*(a-h)+h*o-c*a,x=3*T,E=x-m,w=E-m+_,k=Math.sqrt(w*w+E*E+x*x),p=k!==0?1/k:0,C=K.isZero,P="serpentine";w*=p,E*=p,x*=p;function I(D,V,O){var F=V!==s,U=F&&V>0&&V<1,Y=F&&O>0&&O<1;return F&&(!(U||Y)||D==="loop"&&!(U&&Y))&&(D="arch",U=Y=!1),{type:D,roots:U||Y?U&&Y?V<O?[V,O]:[O,V]:[U?V:O]:null}}if(C(w))return C(E)?I(C(x)?"line":"quadratic"):I(P,x/(3*E));var A=3*E*E-4*w*x;if(C(A))return I("cusp",E/(2*w));var z=A>0?Math.sqrt(A/3):Math.sqrt(-A),N=2*w;return I(A>0?P:"loop",(E+z)/N,(E-z)/N)},getLength:function(r,a,o,h){if(a===s&&(a=0),o===s&&(o=1),ne.isStraight(r)){var c=r;o<1&&(c=ne.subdivide(c,o)[0],a/=o),a>0&&(c=ne.subdivide(c,a)[1]);var f=c[6]-c[0],g=c[7]-c[1];return Math.sqrt(f*f+g*g)}return K.integrate(h||e(r),a,o,t(a,o))},getTimeAt:function(r,a,o){if(o===s&&(o=a<0?1:0),a===0)return o;var h=Math.abs,c=1e-12,f=a>0,g=f?o:0,v=f?1:o,b=e(r),_=ne.getLength(r,g,v,b),m=h(a)-_;if(h(m)<c)return f?v:g;if(m>c)return null;var T=a/_,x=0;function E(w){return x+=K.integrate(b,o,w,t(o,w)),o=w,x-a}return K.findRoot(E,b,o+T,g,v,32,1e-12)},getPoint:function(r,a){return i(r,a,0,!1)},getTangent:function(r,a){return i(r,a,1,!0)},getWeightedTangent:function(r,a){return i(r,a,1,!1)},getNormal:function(r,a){return i(r,a,2,!0)},getWeightedNormal:function(r,a){return i(r,a,2,!1)},getCurvature:function(r,a){return i(r,a,3,!1).x},getPeaks:function(r){var a=r[0],o=r[1],h=r[2],c=r[3],f=r[4],g=r[5],v=r[6],b=r[7],_=-a+3*h-3*f+v,m=3*a-6*h+3*f,T=-3*a+3*h,x=-o+3*c-3*g+b,E=3*o-6*c+3*g,w=-3*o+3*c,k=1e-8,p=1-k,C=[];return K.solveCubic(9*(_*_+x*x),9*(_*m+E*x),2*(m*m+E*E)+3*(T*_+w*x),T*m+E*w,C,k,p),C.sort()}}}},new function(){function e(m,T,x,E,w,k,p){var C=!p&&x.getPrevious()===w,P=!p&&x!==w&&x.getNext()===w,I=1e-8,A=1-I;if(E!==null&&E>=(C?I:0)&&E<=(P?A:1)&&k!==null&&k>=(P?I:0)&&k<=(C?A:1)){var z=new Xe(x,E,null,p),N=new Xe(w,k,null,p);z._intersection=N,N._intersection=z,(!T||T(z))&&Xe.insert(m,z,!0)}}function t(m,T,x,E,w,k,p,C,P,I,A,z,N){if(++P>=4096||++C>=40)return P;var D=1e-9,V=T[0],O=T[1],F=T[6],U=T[7],Y=ge.getSignedDistance,Z=Y(V,O,F,U,T[2],T[3]),Q=Y(V,O,F,U,T[4],T[5]),de=Z*Q>0?3/4:4/9,pe=de*Math.min(0,Z,Q),ye=de*Math.max(0,Z,Q),Te=Y(V,O,F,U,m[0],m[1]),se=Y(V,O,F,U,m[2],m[3]),le=Y(V,O,F,U,m[4],m[5]),be=Y(V,O,F,U,m[6],m[7]),Ie=i(Te,se,le,be),Pe=Ie[0],De=Ie[1],Re,je;if(Z===0&&Q===0&&Te===0&&se===0&&le===0&&be===0||(Re=r(Pe,De,pe,ye))==null||(je=r(Pe.reverse(),De.reverse(),pe,ye))==null)return P;var Ge=I+(A-I)*Re,He=I+(A-I)*je;if(Math.max(N-z,He-Ge)<D){var St=(Ge+He)/2,kt=(z+N)/2;e(w,k,p?E:x,p?kt:St,p?x:E,p?St:kt)}else{m=ne.getPart(m,Re,je);var Lt=N-z;if(je-Re>.8)if(He-Ge>Lt){var yt=ne.subdivide(m,.5),St=(Ge+He)/2;P=t(T,yt[0],E,x,w,k,!p,C,P,z,N,Ge,St),P=t(T,yt[1],E,x,w,k,!p,C,P,z,N,St,He)}else{var yt=ne.subdivide(T,.5),kt=(z+N)/2;P=t(yt[0],m,E,x,w,k,!p,C,P,z,kt,Ge,He),P=t(yt[1],m,E,x,w,k,!p,C,P,kt,N,Ge,He)}else Lt===0||Lt>=D?P=t(T,m,E,x,w,k,!p,C,P,z,N,Ge,He):P=t(m,T,x,E,w,k,p,C,P,Ge,He,z,N)}return P}function i(m,T,x,E){var w=[0,m],k=[1/3,T],p=[2/3,x],C=[1,E],P=T-(2*m+E)/3,I=x-(m+2*E)/3,A;if(P*I<0)A=[[w,k,C],[w,p,C]];else{var z=P/I;A=[z>=2?[w,k,C]:z<=.5?[w,p,C]:[w,k,p,C],[w,C]]}return(P||I)<0?A.reverse():A}function r(m,T,x,E){return m[0][1]<x?a(m,!0,x):T[0][1]>E?a(T,!1,E):m[0][0]}function a(m,T,x){for(var E=m[0][0],w=m[0][1],k=1,p=m.length;k<p;k++){var C=m[k][0],P=m[k][1];if(T?P>=x:P<=x)return P===x?C:E+(x-w)*(C-E)/(P-w);E=C,w=P}return null}function o(m,T,x,E,w){var k=K.isZero;if(k(E)&&k(w)){var p=ne.getTimeOf(m,new L(T,x));return p===null?[]:[p]}for(var C=Math.atan2(-w,E),P=Math.sin(C),I=Math.cos(C),A=[],z=[],N=0;N<8;N+=2){var D=m[N]-T,V=m[N+1]-x;A.push(D*I-V*P,D*P+V*I)}return ne.solveCubic(A,1,0,z,0,1),z}function h(m,T,x,E,w,k,p){for(var C=T[0],P=T[1],I=T[6],A=T[7],z=o(m,C,P,I-C,A-P),N=0,D=z.length;N<D;N++){var V=z[N],O=ne.getPoint(m,V),F=ne.getTimeOf(T,O);F!==null&&e(w,k,p?E:x,p?F:V,p?x:E,p?V:F)}}function c(m,T,x,E,w,k){var p=ge.intersect(m[0],m[1],m[6],m[7],T[0],T[1],T[6],T[7]);p&&e(w,k,x,ne.getTimeOf(m,p),E,ne.getTimeOf(T,p))}function f(m,T,x,E,w,k){var p=1e-12,C=Math.min,P=Math.max;if(P(m[0],m[2],m[4],m[6])+p>C(T[0],T[2],T[4],T[6])&&C(m[0],m[2],m[4],m[6])-p<P(T[0],T[2],T[4],T[6])&&P(m[1],m[3],m[5],m[7])+p>C(T[1],T[3],T[5],T[7])&&C(m[1],m[3],m[5],m[7])-p<P(T[1],T[3],T[5],T[7])){var I=b(m,T);if(I)for(var A=0;A<2;A++){var z=I[A];e(w,k,x,z[0],E,z[1],!0)}else{var N=ne.isStraight(m),D=ne.isStraight(T),V=N&&D,O=N&&!D,F=w.length;if((V?c:N||D?h:t)(O?T:m,O?m:T,O?E:x,O?x:E,w,k,O,0,0,0,1,0,1),!V||w.length===F)for(var A=0;A<4;A++){var U=A>>1,Y=A&1,Z=U*6,Q=Y*6,de=new L(m[Z],m[Z+1]),pe=new L(T[Q],T[Q+1]);de.isClose(pe,p)&&e(w,k,x,U,E,Y)}}}return w}function g(m,T,x,E){var w=ne.classify(m);if(w.type==="loop"){var k=w.roots;e(x,E,T,k[0],T,k[1])}return x}function v(m,T,x,E,w,k){var p=1e-7,C=!T;C&&(T=m);for(var P=m.length,I=T.length,A=new Array(P),z=C?A:new Array(I),N=[],D=0;D<P;D++)A[D]=m[D].getValues(E);if(!C)for(var D=0;D<I;D++)z[D]=T[D].getValues(w);for(var V=j.findCurveBoundsCollisions(A,z,p),O=0;O<P;O++){var F=m[O],U=A[O];C&&g(U,F,N,x);var Y=V[O];if(Y)for(var Z=0;Z<Y.length;Z++){if(k&&N.length)return N;var Q=Y[Z];if(!C||Q>O){var de=T[Q],pe=z[Q];f(U,pe,F,de,N,x)}}}return N}function b(m,T){function x(be){var Ie=be[6]-be[0],Pe=be[7]-be[1];return Ie*Ie+Pe*Pe}var E=Math.abs,w=ge.getDistance,k=1e-8,p=1e-7,C=ne.isStraight(m),P=ne.isStraight(T),I=C&&P,A=x(m)<x(T),z=A?T:m,N=A?m:T,D=z[0],V=z[1],O=z[6]-D,F=z[7]-V;if(w(D,V,O,F,N[0],N[1],!0)<p&&w(D,V,O,F,N[6],N[7],!0)<p)!I&&w(D,V,O,F,z[2],z[3],!0)<p&&w(D,V,O,F,z[4],z[5],!0)<p&&w(D,V,O,F,N[2],N[3],!0)<p&&w(D,V,O,F,N[4],N[5],!0)<p&&(C=P=I=!0);else if(I)return null;if(C^P)return null;for(var U=[m,T],Y=[],Z=0;Z<4&&Y.length<2;Z++){var Q=Z&1,de=Q^1,pe=Z>>1,ye=ne.getTimeOf(U[Q],new L(U[de][pe?6:0],U[de][pe?7:1]));if(ye!=null){var Te=Q?[pe,ye]:[ye,pe];(!Y.length||E(Te[0]-Y[0][0])>k&&E(Te[1]-Y[0][1])>k)&&Y.push(Te)}if(Z>2&&!Y.length)break}if(Y.length!==2)Y=null;else if(!I){var se=ne.getPart(m,Y[0][0],Y[1][0]),le=ne.getPart(T,Y[0][1],Y[1][1]);(E(le[2]-se[2])>p||E(le[3]-se[3])>p||E(le[4]-se[4])>p||E(le[5]-se[5])>p)&&(Y=null)}return Y}function _(m,T){var x=m[0],E=m[1],w=m[2],k=m[3],p=m[4],C=m[5],P=m[6],I=m[7],A=T.normalize(),z=A.x,N=A.y,D=3*P-9*p+9*w-3*x,V=3*I-9*C+9*k-3*E,O=6*p-12*w+6*x,F=6*C-12*k+6*E,U=3*w-3*x,Y=3*k-3*E,Z=2*D*N-2*V*z,Q=[];if(Math.abs(Z)<K.CURVETIME_EPSILON){var de=D*Y-V*U,Z=D*F-V*O;if(Z!=0){var pe=-de/Z;pe>=0&&pe<=1&&Q.push(pe)}}else{var ye=(O*O-4*D*U)*N*N+(-2*O*F+4*V*U+4*D*Y)*z*N+(F*F-4*V*Y)*z*z,Te=O*N-F*z;if(ye>=0&&Z!=0){var se=Math.sqrt(ye),le=-(Te+se)/Z,be=(-Te+se)/Z;le>=0&&le<=1&&Q.push(le),be>=0&&be<=1&&Q.push(be)}}return Q}return{getIntersections:function(m){var T=this.getValues(),x=m&&m!==this&&m.getValues();return x?f(T,x,this,m,[]):g(T,this,[])},statics:{getOverlaps:b,getIntersections:v,getCurveLineIntersections:o,getTimesWithTangent:_}}}),Xe=d.extend({_class:"CurveLocation",initialize:function(t,i,r,a,o){if(i>=.99999999){var h=t.getNext();h&&(i=0,t=h)}this._setCurve(t),this._time=i,this._point=r||t.getPointAtTime(i),this._overlap=a,this._distance=o,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),i=this.getTime();i===0?e=t._segment1:i===1?e=t._segment2:i!=null&&(e=t.getPartLength(0,i)<t.getPartLength(i,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function i(r){var a=r&&r.getCurve();if(a&&(t._time=a.getTimeOf(t._point))!=null)return t._setCurve(a),a}return this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),i=this.getIndex();if(t&&i!=null)for(var r=t.getCurves(),a=0;a<i;a++)e+=r[a].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),i=this.getTime();this._curveOffset=e=i!=null&&t&&t.getPartLength(0,i)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,i=e&&e.splitAtTime(this.getTime());return i&&this._setSegment(t.getLastSegment()),i},equals:function(e,t){var i=this===e;if(!i&&e instanceof Xe){var r=this.getCurve(),a=e.getCurve(),o=r._path,h=a._path;if(o===h){var c=Math.abs,f=1e-7,g=c(this.getOffset()-e.getOffset()),v=!t&&this._intersection,b=!t&&e._intersection;i=(g<f||o&&c(o.getLength()-g)<f)&&(!v&&!b||v&&b&&v.equals(b,!0))}}return i},toString:function(){var e=[],t=this.getPoint(),i=G.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var a=this.getTime();return a!=null&&e.push("time: "+i.number(a)),this._distance!=null&&e.push("distance: "+i.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),i=e.getCurve();return!(t.isStraight()&&i.isStraight()&&t.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),i=e.getTime(),r=1e-8,a=1-r,o=t>=r&&t<=a,h=i>=r&&i<=a;if(o&&h)return!this.isTouching();var c=this.getCurve(),f=c&&t<r?c.getPrevious():c,g=e.getCurve(),v=g&&i<r?g.getPrevious():g;if(t>a&&(c=c.getNext()),i>a&&(g=g.getNext()),!f||!c||!v||!g)return!1;var b=[];function _(z,N){var D=z.getValues(),V=ne.classify(D).roots||ne.getPeaks(D),O=V.length,F=ne.getLength(D,N&&O?V[O-1]:0,!N&&O?V[0]:1);b.push(O?F:F/32)}function m(z,N,D){return N<D?z>N&&z<D:z>N||z<D}o||(_(f,!0),_(c,!1)),h||(_(v,!0),_(g,!1));var T=this.getPoint(),x=Math.min.apply(Math,b),E=o?c.getTangentAtTime(t):c.getPointAt(x).subtract(T),w=o?E.negate():f.getPointAt(-x).subtract(T),k=h?g.getTangentAtTime(i):g.getPointAt(x).subtract(T),p=h?k.negate():v.getPointAt(-x).subtract(T),C=w.getAngle(),P=E.getAngle(),I=p.getAngle(),A=k.getAngle();return!!(o?m(C,I,A)^m(P,I,A)&&m(C,A,I)^m(P,A,I):m(I,C,P)^m(A,C,P)&&m(I,P,C)^m(A,P,C))},hasOverlap:function(){return!!this._overlap}},d.each(ne._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var i=this.getCurve(),r=this.getTime();return r!=null&&i&&i[t](r,!0)}},{preserve:!0}),new function(){function e(t,i,r){var a=t.length,o=0,h=a-1;function c(T,x){for(var E=T+x;E>=-1&&E<=a;E+=x){var w=t[(E%a+a)%a];if(!i.getPoint().isClose(w.getPoint(),1e-7))break;if(i.equals(w))return w}return null}for(;o<=h;){var f=o+h>>>1,g=t[f],v;if(r&&(v=i.equals(g)?g:c(f,-1)||c(f,1)))return i._overlap&&(v._overlap=v._intersection._overlap=!0),v;var b=i.getPath(),_=g.getPath(),m=b!==_?b._id-_._id:i.getIndex()+i.getTime()-(g.getIndex()+g.getTime());m<0?h=f-1:o=f+1}return t.splice(o,0,i),i}return{statics:{insert:e,expand:function(t){for(var i=t.slice(),r=t.length-1;r>=0;r--)e(i,t[r]._intersection,!1);return i}}}}),Ce=ce.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,i,r;if(d.isPlainObject(e)?(i=e.segments,t=e.pathData):Array.isArray(e)?i=e:typeof e=="string"&&(t=e),i){var a=i[0];r=a&&Array.isArray(a[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var o=r?ae:fe;return new o(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),i,r=!1,a,o,h=new L,c=new L;function f(p,C){var P=+i[p];return r&&(P+=h[C]),P}function g(p){return new L(f(p,"x"),f(p+1,"y"))}this.clear();for(var v=0,b=t&&t.length;v<b;v++){var _=t[v],m=_[0],T=m.toLowerCase();i=_.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var x=i&&i.length;switch(r=m===T,a==="z"&&!/[mz]/.test(T)&&this.moveTo(h),T){case"m":case"l":for(var E=T==="m",w=0;w<x;w+=2)this[E?"moveTo":"lineTo"](h=g(w)),E&&(c=h,E=!1);o=h;break;case"h":case"v":var k=T==="h"?"x":"y";h=h.clone();for(var w=0;w<x;w++)h[k]=f(w,k),this.lineTo(h);o=h;break;case"c":for(var w=0;w<x;w+=6)this.cubicCurveTo(g(w),o=g(w+2),h=g(w+4));break;case"s":for(var w=0;w<x;w+=4)this.cubicCurveTo(/[cs]/.test(a)?h.multiply(2).subtract(o):h,o=g(w),h=g(w+2)),a=T;break;case"q":for(var w=0;w<x;w+=4)this.quadraticCurveTo(o=g(w),h=g(w+2));break;case"t":for(var w=0;w<x;w+=2)this.quadraticCurveTo(o=/[qt]/.test(a)?h.multiply(2).subtract(o):h,h=g(w)),a=T;break;case"a":for(var w=0;w<x;w+=7)this.arcTo(h=g(w+5),new H(+i[w],+i[w+1]),+i[w+2],+i[w+4],+i[w+3]);break;case"z":this.closePath(1e-12),h=c;break}a=T}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,i,r){var a=this===e||!e,o=this._matrix._orNullIfIdentity(),h=a?o:(i||e._matrix)._orNullIfIdentity();return a||this.getBounds(o).intersects(e.getBounds(h),1e-12)?ne.getIntersections(this.getCurves(),!a&&e.getCurves(),t,o,h,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=L.read(arguments),t=this.getCurves(),i=1/0,r=null,a=0,o=t.length;a<o;a++){var h=t[a].getNearestLocation(e);h._distance<i&&(i=h._distance,r=h)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,i){var r=!this._children,a=r?"_segments":"_children",o=e[a],h=t[a],c=this[a];if(!o||!h||o.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var f=c.length,g=h.length;if(f<g)for(var v=r?he:fe,b=f;b<g;b++)this.add(new v);else f>g&&this[r?"removeSegments":"removeChildren"](g,f);for(var b=0;b<g;b++)c[b].interpolate(o[b],h[b],i);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var i=this._children||[this],r=e._children?e._children.slice():[e],a=i.length,o=r.length,h=[],c=0;t=!0;for(var f=j.findItemBoundsCollisions(i,r,K.GEOMETRIC_EPSILON),g=a-1;g>=0&&t;g--){var v=i[g];t=!1;var b=f[g];if(b)for(var _=b.length-1;_>=0&&!t;_--)v.compare(r[b[_]])&&(h[b[_]]||(h[b[_]]=!0,c++),t=!0)}t=t&&c===o}return t}}),fe=Ce.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,r=Array.isArray(t)?typeof t[0]=="object"?t:i:t&&t.size===s&&(t.x!==s||t.point!==s)?i:null;r&&r.length>0?this.setSegments(r):(this._curves=s,this._segmentSelection=0,!r&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&d.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=s,t&32)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else t&64&&(this._bounds=s)},getStyle:function(){var e=this._parent;return(e instanceof ae?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),i=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,i){var r=e[i-1];typeof r=="boolean"&&(this.setClosed(r),i--),this._add(he.readList(e,0,{},i))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var i=this._countCurves();e=this._curves=new Array(i);for(var r=0;r<i;r++)e[r]=new ne(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new ne(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var i=this._segments,r=i.length,a=new G(t),o=new Array(6),h=!0,c,f,g,v,b,_,m,T,x=[];function E(k,p){if(k._transformCoordinates(e,o),c=o[0],f=o[1],h)x.push("M"+a.pair(c,f)),h=!1;else if(b=o[2],_=o[3],b===c&&_===f&&m===g&&T===v){if(!p){var C=c-g,P=f-v;x.push(C===0?"v"+a.number(P):P===0?"h"+a.number(C):"l"+a.pair(C,P))}}else x.push("c"+a.pair(m-g,T-v)+" "+a.pair(b-g,_-v)+" "+a.pair(c-g,f-v));g=c,v=f,m=o[4],T=o[5]}if(!r)return"";for(var w=0;w<r;w++)E(i[w]);return this._closed&&r>0&&(E(i[0],!0),x.push("z")),x.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,i=new Array(6),r=0,a=t.length;r<a;r++)t[r]._transformCoordinates(e,i,!0);return!0},_add:function(e,h){for(var i=this._segments,r=this._curves,a=e.length,o=h==null,h=o?i.length:h,c=0;c<a;c++){var f=e[c];f._path&&(f=e[c]=f.clone()),f._path=this,f._index=h+c,f._selection&&this._updateSelection(f,0,f._selection)}if(o)d.push(i,e);else{i.splice.apply(i,[h,0].concat(e));for(var c=h+a,g=i.length;c<g;c++)i[c]._index=c}if(r){var v=this._countCurves(),b=h>0&&h+a-1===v?h-1:h,_=b,m=Math.min(b+a,v);e._curves&&(r.splice.apply(r,[b,0].concat(e._curves)),_+=e._curves.length);for(var c=_;c<m;c++)r.splice(c,0,new ne(this,null,null));this._adjustCurves(b,m)}return this._changed(41),e},_adjustCurves:function(e,t){for(var i=this._segments,r=this._curves,a,o=e;o<t;o++)a=r[o],a._path=this,a._segment1=i[o],a._segment2=i[o+1]||i[0],a._changed();(a=r[this._closed&&!e?i.length-1:e-1])&&(a._segment2=i[e]||i[0],a._changed()),(a=r[t])&&(a._segment1=i[t],a._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(he.readList(t)):this._add([he.read(t)])[0]},insert:function(e,t){var i=arguments;return i.length>2&&typeof t!="number"?this._add(he.readList(i,1),e):this._add([he.read(i,1)],e)[0]},addSegment:function(){return this._add([he.read(arguments)])[0]},insertSegment:function(e){return this._add([he.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(he.readList(e))},insertSegments:function(e,t){return this._add(he.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,i){e=e||0,t=d.pick(t,this._segments.length);var r=this._segments,a=this._curves,o=r.length,h=r.splice(e,t-e),c=h.length;if(!c)return h;for(var f=0;f<c;f++){var g=h[f];g._selection&&this._updateSelection(g,g._selection,0),g._index=g._path=null}for(var f=e,v=r.length;f<v;f++)r[f]._index=f;if(a){for(var b=e>0&&t===o+(this._closed?1:0)?e-1:e,a=a.splice(b,c),f=a.length-1;f>=0;f--)a[f]._path=null;i&&(h._curves=a.slice(1)),this._adjustCurves(b,b)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,i=e.length;t<i;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,i=e.length;t<i;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,i=0,r=e.length;i<r;i++)t+=e[i].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,i=this._closed;e=0;for(var r=0,a=t.length;r<a;r++){var o=r+1===a;e+=ne.getArea(ne.getValues(t[r],t[o?0:r+1],null,o&&!i))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,i=t.length,r=e?7:0;this._segmentSelection=r*i;for(var a=0;a<i;a++)t[a]._selection=r},_updateSelection:function(e,t,i){e._selection=i;var r=this._segmentSelection+=i-t;r>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),i;return t&&(i=t.getCurve().divideAt(t.getCurveOffset()))?i._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),i=t&&t.index,r=t&&t.time,a=1e-8,o=1-a;r>o&&(i++,r=0);var h=this.getCurves();if(i>=0&&i<h.length){r>=a&&h[i++].divideAtTime(r);var c=this.removeSegments(i,this._segments.length,!0),f;return this._closed?(this.setClosed(!1),f=this):(f=new fe(ce.NO_INSERT),f.insertAbove(this),f.copyAttributes(this)),f._add(c,0),this.addSegment(c[0]),f}return null},split:function(e,t){var i,r=t===s?e:(i=this.getCurves()[e])&&i.getLocationAtTime(t);return r!=null?this.splitAt(r):null},join:function(e,t){var i=t||0;if(e&&e!==this){var r=e._segments,a=this.getLastSegment(),o=e.getLastSegment();if(!o)return this;a&&a._point.isClose(o._point,i)&&e.reverse();var h=e.getFirstSegment();if(a&&a._point.isClose(h._point,i))a.setHandleOut(h._handleOut),this._add(r.slice(1));else{var c=this.getFirstSegment();c&&c._point.isClose(h._point,i)&&e.reverse(),o=e.getLastSegment(),c&&c._point.isClose(o._point,i)?(c.setHandleIn(o._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var f=this.getFirstSegment(),g=this.getLastSegment();return f!==g&&f._point.isClose(g._point,i)&&(f.setHandleIn(g._handleIn),g.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),i=e&&e.simplify,r=i?1e-7:0,a=t.length-1;a>=0;a--){var o=t[a];!o.hasHandles()&&(!o.hasLength(r)||i&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var i=this._segments[e],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new Ee(this,e||.25,256,!0),i=t.parts,r=i.length,a=[],o=0;o<r;o++)a.push(new he(i[o].curve.slice(0,2)));!this._closed&&r>0&&a.push(new he(i[r-1].curve.slice(6))),this.setSegments(a)},simplify:function(e){var t=new oe(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,i=e||{},r=i.type||"asymmetric",a=this._segments,o=a.length,h=this._closed;function c(Pe,De){var Re=Pe&&Pe.index;if(Re!=null){var je=Pe.path;if(je&&je!==t)throw new Error(Pe._class+" "+Re+" of "+je+" is not part of "+t);De&&Pe instanceof ne&&Re++}else Re=typeof Pe=="number"?Pe:De;return Math.min(Re<0&&h?Re%o:Re<0?Re+o:Re,o-1)}var f=h&&i.from===s&&i.to===s,g=c(i.from,0),v=c(i.to,o-1);if(g>v)if(h)g-=o;else{var b=g;g=v,v=b}if(/^(?:asymmetric|continuous)$/.test(r)){var _=r==="asymmetric",m=Math.min,T=v-g+1,x=T-1,E=f?m(T,4):1,w=E,k=E,p=[];if(h||(w=m(1,g),k=m(1,o-v-1)),x+=w+k,x<=1)return;for(var C=0,P=g-w;C<=x;C++,P++)p[C]=a[(P<0?P+o:P)%o]._point;for(var I=p[0]._x+2*p[1]._x,A=p[0]._y+2*p[1]._y,z=2,N=x-1,D=[I],V=[A],O=[z],F=[],U=[],C=1;C<x;C++){var Y=C<N,Z=Y||_?1:2,Q=Y?4:_?2:7,de=Y?4:_?3:8,pe=Y?2:_?0:1,ye=Z/z;z=O[C]=Q-ye,I=D[C]=de*p[C]._x+pe*p[C+1]._x-ye*I,A=V[C]=de*p[C]._y+pe*p[C+1]._y-ye*A}F[N]=D[N]/O[N],U[N]=V[N]/O[N];for(var C=x-2;C>=0;C--)F[C]=(D[C]-F[C+1])/O[C],U[C]=(V[C]-U[C+1])/O[C];F[x]=(3*p[x]._x-F[N])/2,U[x]=(3*p[x]._y-U[N])/2;for(var C=w,Te=x-k,P=g;C<=Te;C++,P++){var se=a[P<0?P+o:P],le=se._point,be=F[C]-le._x,Ie=U[C]-le._y;(f||C<Te)&&se.setHandleOut(be,Ie),(f||C>w)&&se.setHandleIn(-be,-Ie)}}else for(var C=g;C<=v;C++)a[C<0?C+o:C].smooth(i,!f&&C===g,!f&&C===v)},toShape:function(e){if(!this._closed)return null;var t=this._segments,i,r,a,o;function h(_,m){var T=t[_],x=T.getNext(),E=t[m],w=E.getNext();return T._handleOut.isZero()&&x._handleIn.isZero()&&E._handleOut.isZero()&&w._handleIn.isZero()&&x._point.subtract(T._point).isCollinear(w._point.subtract(E._point))}function c(_){var m=t[_],T=m.getPrevious(),x=m.getNext();return T._handleOut.isZero()&&m._handleIn.isZero()&&m._handleOut.isZero()&&x._handleIn.isZero()&&m._point.subtract(T._point).isOrthogonal(x._point.subtract(m._point))}function f(_){var m=t[_],T=m.getNext(),x=m._handleOut,E=T._handleIn,w=.5522847498307936;if(x.isOrthogonal(E)){var k=m._point,p=T._point,C=new ge(k,x,!0).intersect(new ge(p,E,!0),!0);return C&&K.isZero(x.getLength()/C.subtract(k).getLength()-w)&&K.isZero(E.getLength()/C.subtract(p).getLength()-w)}return!1}function g(_,m){return t[_]._point.getDistance(t[m]._point)}if(!this.hasHandles()&&t.length===4&&h(0,2)&&h(1,3)&&c(1)?(i=xe.Rectangle,r=new H(g(0,3),g(0,1)),o=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&f(0)&&f(2)&&f(4)&&f(6)&&h(1,5)&&h(3,7)?(i=xe.Rectangle,r=new H(g(1,6),g(0,3)),a=r.subtract(new H(g(0,7),g(1,2))).divide(2),o=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&f(0)&&f(1)&&f(2)&&f(3)&&(K.isZero(g(0,2)-g(1,3))?(i=xe.Circle,a=g(0,2)/2):(i=xe.Ellipse,a=new H(g(2,0)/2,g(3,1)/2)),o=t[1]._point),i){var v=this.getPosition(!0),b=new i({center:v,size:r,radius:a,insert:!1});return b.copyAttributes(this,!0),b._matrix.prepend(this._matrix),b.rotate(o.subtract(v).getAngle()+90),(e===s||e)&&b.insertAbove(this),b}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof ae)return e.base.call(this,t);var i=this.getCurves(),r=t.getCurves(),a=i.length,o=r.length;if(!a||!o)return a==o;for(var h=i[0].getValues(),c=[],f=0,g,v=0,b,_=0;_<o;_++){var E=r[_].getValues();c.push(E);var m=ne.getOverlaps(h,E);if(m){g=!_&&m[0][0]>0?o-1:_,b=m[0][1];break}}for(var T=Math.abs,x=1e-8,E=c[g],w;h&&E;){var m=ne.getOverlaps(h,E);if(m){var k=m[0][0];if(T(k-v)<x){v=m[1][0],v===1&&(h=++f<a?i[f].getValues():null,v=0);var p=m[0][1];if(T(p-b)<x){if(w||(w=[g,p]),b=m[1][1],b===1&&(++g>=o&&(g=0),E=c[g]||r[g].getValues(),b=0),!h)return w[0]===g&&w[1]===b;continue}}}break}return!1},_hitTestSelf:function(e,t,i,r){var a=this,o=this.getStyle(),h=this._segments,c=h.length,f=this._closed,g=t._tolerancePadding,v=g,b,_,m,T,x,E,w=t.stroke&&o.hasStroke(),k=t.fill&&o.hasFill(),p=t.curves,C=w?o.getStrokeWidth()/2:k&&t.tolerance>0||p?0:null;C!==null&&(C>0?(b=o.getStrokeJoin(),_=o.getStrokeCap(),m=o.getMiterLimit(),v=v.add(fe._getStrokePadding(C,r))):b=_="round");function P(F,U){return e.subtract(F).divide(U).length<=1}function I(F,U,Y){if(!t.selected||U.isSelected()){var Z=F._point;if(U!==Z&&(U=U.add(Z)),P(U,v))return new Oe(Y,a,{segment:F,point:U})}}function A(F,U){return(U||t.segments)&&I(F,F._point,"segment")||!U&&t.handles&&(I(F,F._handleIn,"handle-in")||I(F,F._handleOut,"handle-out"))}function z(F){T.add(F)}function N(F){var U=f||F._index>0&&F._index<c-1;if((U?b:_)==="round")return P(F._point,v);if(T=new fe({internal:!0,closed:!0}),U?F.isSmooth()||fe._addBevelJoin(F,b,C,m,null,r,z,!0):_==="square"&&fe._addSquareCap(F,_,C,null,r,z,!0),!T.isEmpty()){var Y;return T.contains(e)||(Y=T.getNearestLocation(e))&&P(Y.getPoint(),g)}}if(t.ends&&!t.segments&&!f){if(E=A(h[0],!0)||A(h[c-1],!0))return E}else if(t.segments||t.handles){for(var D=0;D<c;D++)if(E=A(h[D]))return E}if(C!==null){if(x=this.getNearestLocation(e),x){var V=x.getTime();V===0||V===1&&c>1?N(x.getSegment())||(x=null):P(x.getPoint(),v)||(x=null)}if(!x&&b==="miter"&&c>1)for(var D=0;D<c;D++){var O=h[D];if(e.getDistance(O._point)<=m*C&&N(O)){x=O.getLocation();break}}}return!x&&k&&this._contains(e)||x&&!w&&!p?new Oe("fill",this):x?new Oe(w?"stroke":"curve",this,{location:x,point:x.getPoint()}):null}},d.each(ne._evaluateMethods,function(e){this[e+"At"]=function(t){var i=this.getLocationAt(t);return i&&i[e]()}},{beans:!1,getLocationOf:function(){for(var e=L.read(arguments),t=this.getCurves(),i=0,r=t.length;i<r;i++){var a=t[i].getLocationOf(e);if(a)return a}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),i=0,r=0,a=t.length;r<a;r++){var o=i,h=t[r];if(i+=h.getLength(),i>e)return h.getLocationAt(e-o)}if(t.length>0&&e<=this.getLength())return new Xe(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=L.read(arguments);if(e.isZero())return[];for(var t=[],i=0,r=this.getCurves(),a=0,o=r.length;a<o;a++){for(var h=r[a],c=h.getTimesWithTangent(e),f=0,g=c.length;f<g;f++){var v=i+h.getOffsetAtTime(c[f]);t.indexOf(v)<0&&t.push(v)}i+=h.length}return t}}),new function(){function e(i,r,a,o){if(o<=0)return;var h=o/2,c=o-2,f=h-1,g=new Array(6),v,b;function _(k){var p=g[k],C=g[k+1];(v!=p||b!=C)&&(i.beginPath(),i.moveTo(v,b),i.lineTo(p,C),i.stroke(),i.beginPath(),i.arc(p,C,h,0,Math.PI*2,!0),i.fill())}for(var m=0,T=r.length;m<T;m++){var x=r[m],E=x._selection;if(x._transformCoordinates(a,g),v=g[0],b=g[1],E&2&&_(2),E&4&&_(4),i.fillRect(v-h,b-h,o,o),c>0&&!(E&1)){var w=i.fillStyle;i.fillStyle="#ffffff",i.fillRect(v-f,b-f,c,c),i.fillStyle=w}}}function t(i,r,a){var o=r._segments,h=o.length,c=new Array(6),f=!0,g,v,b,_,m,T,x,E;function w(p){if(a)p._transformCoordinates(a,c),g=c[0],v=c[1];else{var C=p._point;g=C._x,v=C._y}if(f)i.moveTo(g,v),f=!1;else{if(a)m=c[2],T=c[3];else{var P=p._handleIn;m=g+P._x,T=v+P._y}m===g&&T===v&&x===b&&E===_?i.lineTo(g,v):i.bezierCurveTo(x,E,m,T,g,v)}if(b=g,_=v,a)x=c[4],E=c[5];else{var P=p._handleOut;x=b+P._x,E=_+P._y}}for(var k=0;k<h;k++)w(o[k]);r._closed&&h>0&&w(o[0])}return{_draw:function(i,r,a,o){var h=r.dontStart,c=r.dontFinish||r.clip,f=this.getStyle(),g=f.hasFill(),v=f.hasStroke(),b=f.getDashArray(),_=!Ye.support.nativeDash&&v&&b&&b.length;h||i.beginPath(),(g||v&&!_||c)&&(t(i,this,o),this._closed&&i.closePath());function m(p){return b[(p%_+_)%_]}if(!c&&(g||v)&&(this._setStyles(i,r,a),g&&(i.fill(f.getFillRule()),i.shadowColor="rgba(0,0,0,0)"),v)){if(_){h||i.beginPath();for(var T=new Ee(this,.25,32,!1,o),x=T.length,E=-f.getDashOffset(),w,k=0;E>0;)E-=m(k--)+m(k--);for(;E<x;)w=E+m(k++),(E>0||w>0)&&T.drawPart(i,Math.max(E,0),Math.max(w,0)),E=w+m(k++)}i.stroke()}},_drawSelected:function(i,r){i.beginPath(),t(i,this,r),i.stroke(),e(i,this._segments,r,Ye.settings.handleSize)}}},new function(){function e(t){var i=t._segments;if(!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new he(L.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new he(L.read(arguments))])},cubicCurveTo:function(){var t=arguments,i=L.read(t),r=L.read(t),a=L.read(t),o=e(this);o.setHandleOut(i.subtract(o._point)),this._add([new he(a,r.subtract(a))])},quadraticCurveTo:function(){var t=arguments,i=L.read(t),r=L.read(t),a=e(this)._point;this.cubicCurveTo(i.add(a.subtract(i).multiply(1/3)),i.add(r.subtract(i).multiply(1/3)),r)},curveTo:function(){var t=arguments,i=L.read(t),r=L.read(t),a=d.pick(d.read(t),.5),o=1-a,h=e(this)._point,c=i.subtract(h.multiply(o*o)).subtract(r.multiply(a*a)).divide(2*a*o);if(c.isNaN())throw new Error("Cannot put a curve through points with parameter = "+a);this.quadraticCurveTo(c,r)},arcTo:function(){var t=arguments,i=Math.abs,r=Math.sqrt,a=e(this),o=a._point,h=L.read(t),c,f=d.peek(t),g=d.pick(f,!0),v,b,_,m;if(typeof g=="boolean")var T=o.add(h).divide(2),c=T.add(T.subtract(o).rotate(g?-90:90));else if(d.remain(t)<=2)c=h,h=L.read(t);else if(!o.equals(h)){var x=H.read(t),E=K.isZero;if(E(x.width)||E(x.height))return this.lineTo(h);var w=d.read(t),g=!!d.read(t),k=!!d.read(t),T=o.add(h).divide(2),p=o.subtract(T).rotate(-w),C=p.x,P=p.y,I=i(x.width),A=i(x.height),z=I*I,N=A*A,D=C*C,V=P*P,O=r(D/z+V/N);if(O>1&&(I*=O,A*=O,z=I*I,N=A*A),O=(z*N-z*V-N*D)/(z*V+N*D),i(O)<1e-12&&(O=0),O<0)throw new Error("Cannot create an arc with the given arguments");v=new L(I*P/A,-A*C/I).multiply((k===g?-1:1)*r(O)).rotate(w).add(T),m=new re().translate(v).rotate(w).scale(I,A),_=m._inverseTransform(o),b=_.getDirectedAngle(m._inverseTransform(h)),!g&&b>0?b-=360:g&&b<0&&(b+=360)}if(c){var F=new ge(o.add(c).divide(2),c.subtract(o).rotate(90),!0),U=new ge(c.add(h).divide(2),h.subtract(c).rotate(90),!0),Y=new ge(o,h),Z=Y.getSide(c);if(v=F.intersect(U,!0),!v){if(!Z)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}_=o.subtract(v),b=_.getDirectedAngle(h.subtract(v));var Q=Y.getSide(v,!0);Q===0?b=Z*i(b):Z===Q&&(b+=b<0?360:-360)}if(b){for(var de=1e-7,pe=i(b),ye=pe>=360?4:Math.ceil((pe-de)/90),Te=b/ye,se=Te*Math.PI/360,le=4/3*Math.sin(se)/(1+Math.cos(se)),be=[],Ie=0;Ie<=ye;Ie++){var p=h,Pe=null;if(Ie<ye&&(Pe=_.rotate(90).multiply(le),m?(p=m._transformPoint(_),Pe=m._transformPoint(_.add(Pe)).subtract(p)):p=v.add(_)),!Ie)a.setHandleOut(Pe);else{var De=_.rotate(-90).multiply(le);m&&(De=m._transformPoint(_.add(De)).subtract(p)),be.push(new he(p,De,Pe))}_=_.rotate(Te)}this._add(be)}},lineBy:function(){var t=L.read(arguments),i=e(this)._point;this.lineTo(i.add(t))},curveBy:function(){var t=arguments,i=L.read(t),r=L.read(t),a=d.read(t),o=e(this)._point;this.curveTo(o.add(i),o.add(r),a)},cubicCurveBy:function(){var t=arguments,i=L.read(t),r=L.read(t),a=L.read(t),o=e(this)._point;this.cubicCurveTo(o.add(i),o.add(r),o.add(a))},quadraticCurveBy:function(){var t=arguments,i=L.read(t),r=L.read(t),a=e(this)._point;this.quadraticCurveTo(a.add(i),a.add(r))},arcBy:function(){var t=arguments,i=e(this)._point,r=i.add(L.read(t)),a=d.pick(d.peek(t),!0);typeof a=="boolean"?this.arcTo(r,a):this.arcTo(r,i.add(L.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var i=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return fe[i](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,i,r,a,o){var h=e[0];if(!h)return new X;var c=new Array(6),f=h._transformCoordinates(r,new Array(6)),g=f.slice(0,2),v=g.slice(),b=new Array(2);function _(x){x._transformCoordinates(r,c);for(var E=0;E<2;E++)ne._addBounds(f[E],f[E+4],c[E+2],c[E],E,o?o[E]:0,g,v,b);var w=f;f=c,c=w}for(var m=1,T=e.length;m<T;m++)_(e[m]);return t&&_(h),new X(g[0],g[1],v[0]-g[0],v[1]-g[1])},getStrokeBounds:function(e,t,i,r,a){var o=i.getStyle(),h=o.hasStroke(),c=o.getStrokeWidth(),f=h&&i._getStrokeMatrix(r,a),g=h&&fe._getStrokePadding(c,f),v=fe.getBounds(e,t,i,r,a,g);if(!h)return v;var b=c/2,_=o.getStrokeJoin(),m=o.getStrokeCap(),T=o.getMiterLimit(),x=new X(new H(g));function E(I){v=v.include(I)}function w(I){v=v.unite(x.setCenter(I._point.transform(r)))}function k(I,A){A==="round"||I.isSmooth()?w(I):fe._addBevelJoin(I,A,b,T,r,f,E)}function p(I,A){A==="round"?w(I):fe._addSquareCap(I,A,b,r,f,E)}var C=e.length-(t?0:1);if(C>0){for(var P=1;P<C;P++)k(e[P],_);t?k(e[0],_):(p(e[0],m),p(e[e.length-1],m))}return v},_getStrokePadding:function(e,t){if(!t)return[e,e];var i=new L(e,0).transform(t),r=new L(0,e).transform(t),a=i.getAngleInRadians(),o=i.getLength(),h=r.getLength(),c=Math.sin(a),f=Math.cos(a),g=Math.tan(a),v=Math.atan2(h*g,o),b=Math.atan2(h,g*o);return[Math.abs(o*Math.cos(v)*f+h*Math.sin(v)*c),Math.abs(h*Math.sin(b)*f+o*Math.cos(b)*c)]},_addBevelJoin:function(e,t,i,r,a,o,h,c){var f=e.getCurve(),g=f.getPrevious(),v=f.getPoint1().transform(a),b=g.getNormalAtTime(1).multiply(i).transform(o),_=f.getNormalAtTime(0).multiply(i).transform(o),m=b.getDirectedAngle(_);if((m<0||m>=180)&&(b=b.negate(),_=_.negate()),c&&h(v),h(v.add(b)),t==="miter"){var T=new ge(v.add(b),new L(-b.y,b.x),!0).intersect(new ge(v.add(_),new L(-_.y,_.x),!0),!0);T&&v.getDistance(T)<=r*i&&h(T)}h(v.add(_))},_addSquareCap:function(e,t,i,r,a,o,h){var c=e._point.transform(r),f=e.getLocation(),g=f.getNormal().multiply(f.getTime()===0?i:-i).transform(a);t==="square"&&(h&&(o(c.subtract(g)),o(c.add(g))),c=c.add(g.rotate(-90))),o(c.add(g)),o(c.subtract(g))},getHandleBounds:function(e,t,i,r,a){var o=i.getStyle(),h=a.stroke&&o.hasStroke(),c,f;if(h){var g=i._getStrokeMatrix(r,a),v=o.getStrokeWidth()/2,b=v;o.getStrokeJoin()==="miter"&&(b=v*o.getMiterLimit()),o.getStrokeCap()==="square"&&(b=Math.max(b,v*Math.SQRT2)),c=fe._getStrokePadding(v,g),f=fe._getStrokePadding(b,g)}for(var _=new Array(6),m=1/0,T=-m,x=m,E=T,w=0,k=e.length;w<k;w++){var p=e[w];p._transformCoordinates(r,_);for(var C=0;C<6;C+=2){var P=C?c:f,I=P?P[0]:0,A=P?P[1]:0,z=_[C],N=_[C+1],D=z-I,V=z+I,O=N-A,F=N+A;D<m&&(m=D),V>T&&(T=V),O<x&&(x=O),F>E&&(E=F)}}return new X(m,x,T-m,E-x)}}});fe.inject({statics:new function(){var e=.5522847498307936,t=[new he([-1,0],[0,e],[0,-e]),new he([0,-1],[-e,0],[e,0]),new he([1,0],[0,-e],[0,e]),new he([0,1],[e,0],[-e,0])];function i(a,o,h){var c=d.getNamed(h),f=new fe(c&&c.insert==!1&&ce.NO_INSERT);return f._add(a),f._closed=o,f.set(c,{insert:!0})}function r(a,o,h){for(var c=new Array(4),f=0;f<4;f++){var g=t[f];c[f]=new he(g._point.multiply(o).add(a),g._handleIn.multiply(o),g._handleOut.multiply(o))}return i(c,!0,h)}return{Line:function(){var a=arguments;return i([new he(L.readNamed(a,"from")),new he(L.readNamed(a,"to"))],!1,a)},Circle:function(){var a=arguments,o=L.readNamed(a,"center"),h=d.readNamed(a,"radius");return r(o,new H(h),a)},Rectangle:function(){var a=arguments,o=X.readNamed(a,"rectangle"),h=H.readNamed(a,"radius",0,{readNull:!0}),c=o.getBottomLeft(!0),f=o.getTopLeft(!0),g=o.getTopRight(!0),v=o.getBottomRight(!0),b;if(!h||h.isZero())b=[new he(c),new he(f),new he(g),new he(v)];else{h=H.min(h,o.getSize(!0).divide(2));var _=h.width,m=h.height,T=_*e,x=m*e;b=[new he(c.add(_,0),null,[-T,0]),new he(c.subtract(0,m),[0,x]),new he(f.add(0,m),null,[0,-x]),new he(f.add(_,0),[-T,0],null),new he(g.subtract(_,0),null,[T,0]),new he(g.add(0,m),[0,-x],null),new he(v.subtract(0,m),null,[0,x]),new he(v.subtract(_,0),[T,0])]}return i(b,!0,a)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=arguments,o=xe._readEllipse(a);return r(o.center,o.radius,a)},Oval:"#Ellipse",Arc:function(){var a=arguments,o=L.readNamed(a,"from"),h=L.readNamed(a,"through"),c=L.readNamed(a,"to"),f=d.getNamed(a),g=new fe(f&&f.insert==!1&&ce.NO_INSERT);return g.moveTo(o),g.arcTo(h,c),g.set(f)},RegularPolygon:function(){for(var a=arguments,o=L.readNamed(a,"center"),h=d.readNamed(a,"sides"),c=d.readNamed(a,"radius"),f=360/h,g=h%3===0,v=new L(0,g?-c:c),b=g?-1:.5,_=new Array(h),m=0;m<h;m++)_[m]=new he(o.add(v.rotate((m+b)*f)));return i(_,!0,a)},Star:function(){for(var a=arguments,o=L.readNamed(a,"center"),h=d.readNamed(a,"points")*2,c=d.readNamed(a,"radius1"),f=d.readNamed(a,"radius2"),g=360/h,v=new L(0,-1),b=new Array(h),_=0;_<h;_++)b[_]=new he(o.add(v.rotate(g*_).multiply(_%2?f:c)));return i(b,!0,a)}}}});var ae=Ce.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,i){var r=i,a=r[0];a&&typeof a[0]=="number"&&(r=[r]);for(var o=i.length-1;o>=0;o--){var h=r[o];r===i&&!(h instanceof fe)&&(r=d.slice(r)),Array.isArray(h)?r[o]=new fe({segments:h,insert:!1}):h instanceof ae&&(r.splice.apply(r,[o,1].concat(h.removeChildren())),h.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var i=this._children,r=i.length-1;r>=0;r--){var a=i[r].reduce(t);a.isEmpty()&&a.remove()}if(!i.length){var a=new fe(ce.NO_INSERT);return a.copyAttributes(this),a.insertAbove(this),this.remove(),a}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,i=e.length;t<i;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,i=0,r=t.length;i<r;i++)t[i].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],i=0,r=e.length;i<r;i++)d.push(t,e[i].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,i=0,r=e.length;i<r;i++)t+=e[i].getArea();return t},getLength:function(){for(var e=this._children,t=0,i=0,r=e.length;i<r;i++)t+=e[i].getLength();return t},getPathData:function(e,t){for(var i=this._children,r=[],a=0,o=i.length;a<o;a++){var h=i[a],c=h._matrix;r.push(h.getPathData(e&&!c.isIdentity()?e.appended(c):e,t))}return r.join("")},_hitTestChildren:function e(t,i,r){return e.base.call(this,t,i.class===fe||i.type==="path"?i:d.set({},i,{fill:!1}),r)},_draw:function(e,t,i,r){var a=this._children;if(!!a.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var o=0,h=a.length;o<h;o++)a[o].draw(e,t,r);if(!t.clip){this._setStyles(e,t,i);var c=this._style;c.hasFill()&&(e.fill(c.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),c.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,i){for(var r=this._children,a=0,o=r.length;a<o;a++){var h=r[a],c=h._matrix;i[h._id]||h._drawSelected(e,c.isIdentity()?t:t.appended(c))}}},new function(){function e(t,i){var r=t._children;if(i&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return d.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var i=e(this,!0);i[t].apply(i,arguments)}},{moveTo:function(){var t=e(this),i=t&&t.isEmpty()?t:new fe(ce.NO_INSERT);i!==t&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var t=e(this,!0),i=t&&t.getLastSegment(),r=L.read(arguments);this.moveTo(i?r.add(i._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},d.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var i=this._children,r,a=0,o=i.length;a<o;a++)r=i[a][e](t)||r;return r}},{}));Ce.inject(new function(){var e=Math.min,t=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(w){return w._children||[w]}function o(w,k){var p=w.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(k){for(var C=a(p),P=0,I=C.length;P<I;P++){var w=C[P];!w._closed&&!w.isEmpty()&&(w.closePath(1e-12),w.getFirstSegment().setHandleIn(0,0),w.getLastSegment().setHandleOut(0,0))}p=p.resolveCrossings().reorient(p.getFillRule()==="nonzero",!0)}return p}function h(w,k,p,C,P){var I=new ae(ce.NO_INSERT);return I.addChildren(w,!0),I=I.reduce({simplify:k}),P&&P.insert==!1||I.insertAbove(C&&p.isSibling(C)&&p.getIndex()<C.getIndex()?C:p),I.copyAttributes(p,!0),I}function c(w){return w.hasOverlap()||w.isCrossing()}function f(w,k,p,C){if(C&&(C.trace==!1||C.stroke)&&/^(subtract|intersect)$/.test(p))return g(w,k,p);var P=o(w,!0),I=k&&w!==k&&o(k,!0),A=r[p];A[p]=!0,I&&(A.subtract||A.exclude)^(I.isClockwise()^P.isClockwise())&&I.reverse();var z=m(Xe.expand(P.getIntersections(I,c))),N=a(P),D=I&&a(I),V=[],O=[],F;function U(Pe){for(var De=0,Re=Pe.length;De<Re;De++){var je=Pe[De];d.push(V,je._segments),d.push(O,je.getCurves()),je._overlapsOnly=!0}}function Y(Pe){for(var De=[],Re=0,je=Pe&&Pe.length;Re<je;Re++)De.push(O[Pe[Re]]);return De}if(z.length){U(N),D&&U(D);for(var Z=new Array(O.length),Q=0,de=O.length;Q<de;Q++)Z[Q]=O[Q].getValues();for(var pe=j.findCurveBoundsCollisions(Z,Z,0,!0),ye={},Q=0;Q<O.length;Q++){var Te=O[Q],se=Te._path._id,le=ye[se]=ye[se]||{};le[Te.getIndex()]={hor:Y(pe[Q].hor),ver:Y(pe[Q].ver)}}for(var Q=0,de=z.length;Q<de;Q++)x(z[Q]._segment,P,I,ye,A);for(var Q=0,de=V.length;Q<de;Q++){var be=V[Q],Ie=be._intersection;be._winding||x(be,P,I,ye,A),Ie&&Ie._overlap||(be._path._overlapsOnly=!1)}F=E(V,A)}else F=_(D?N.concat(D):N.slice(),function(Pe){return!!A[Pe]});return h(F,!0,w,k,C)}function g(w,k,p){var C=o(w),P=o(k),I=C.getIntersections(P,c),A=p==="subtract",z=p==="divide",N={},D=[];function V(U){if(!N[U._id]&&(z||P.contains(U.getPointAt(U.getLength()/2))^A))return D.unshift(U),N[U._id]=!0}for(var O=I.length-1;O>=0;O--){var F=I[O].split();F&&(V(F)&&F.getFirstSegment().setHandleIn(0,0),C.getLastSegment().setHandleOut(0,0))}return V(C),h(D,!1,w,k)}function v(w,k){for(var p=w;p;){if(p===k)return;p=p._previous}for(;w._next&&w._next!==k;)w=w._next;if(!w._next){for(;k._previous;)k=k._previous;w._next=k,k._previous=w}}function b(w){for(var k=w.length-1;k>=0;k--)w[k].clearHandles()}function _(w,k,p){var C=w&&w.length;if(C){var P=d.each(w,function(pe,ye){this[pe._id]={container:null,winding:pe.isClockwise()?1:-1,index:ye}},{}),I=w.slice().sort(function(pe,ye){return i(ye.getArea())-i(pe.getArea())}),A=I[0],z=j.findItemBoundsCollisions(I,null,K.GEOMETRIC_EPSILON);p==null&&(p=A.isClockwise());for(var N=0;N<C;N++){var D=I[N],V=P[D._id],O=0,F=z[N];if(F){for(var U=null,Y=F.length-1;Y>=0;Y--)if(F[Y]<N){U=U||D.getInteriorPoint();var Z=I[F[Y]];if(Z.contains(U)){var Q=P[Z._id];O=Q.winding,V.winding+=O,V.container=Q.exclude?Q.container:Z;break}}}if(k(V.winding)===k(O))V.exclude=!0,w[V.index]=null;else{var de=V.container;D.setClockwise(de?!de.isClockwise():p)}}}return w}function m(w,k,p){var C=k&&[],P=1e-8,I=1-P,A=!1,z=p||[],N=p&&{},D,V,O;function F(De){return De._path._id+"."+De._segment1._index}for(var U=(p&&p.length)-1;U>=0;U--){var Y=p[U];Y._path&&(N[F(Y)]=!0)}for(var U=w.length-1;U>=0;U--){var Z=w[U],Q=Z._time,de=Q,pe=k&&!k(Z),Y=Z._curve,ye;if(Y&&(Y!==V?(A=!Y.hasHandles()||N&&N[F(Y)],D=[],O=null,V=Y):O>=P&&(Q/=O)),pe){D&&D.push(Z);continue}else k&&C.unshift(Z);if(O=de,Q<P)ye=Y._segment1;else if(Q>I)ye=Y._segment2;else{var Te=Y.divideAtTime(Q,!0);A&&z.push(Y,Te),ye=Te._segment1;for(var se=D.length-1;se>=0;se--){var le=D[se];le._time=(le._time-Q)/(1-Q)}}Z._setSegment(ye);var be=ye._intersection,Ie=Z._intersection;if(be){v(be,Ie);for(var Pe=be;Pe;)v(Pe._intersection,be),Pe=Pe._next}else ye._intersection=Ie}return p||b(z),C||w}function T(w,k,p,C,P){var I=Array.isArray(k)?k:k[p?"hor":"ver"],A=p?1:0,z=A^1,N=[w.x,w.y],D=N[A],V=N[z],O=1e-9,F=1e-6,U=D-O,Y=D+O,Z=0,Q=0,de=0,pe=0,ye=!1,Te=!1,se=1,le=[],be,Ie;function Pe(lt){var bt=lt[z+0],Bt=lt[z+6];if(!(V<e(bt,Bt)||V>t(bt,Bt))){var Tt=lt[A+0],$t=lt[A+2],vi=lt[A+4],Yt=lt[A+6];if(bt===Bt){(Tt<Y&&Yt>U||Yt<Y&&Tt>U)&&(ye=!0);return}var Zt=V===bt?0:V===Bt||U>t(Tt,$t,vi,Yt)||Y<e(Tt,$t,vi,Yt)?1:ne.solveCubic(lt,z,V,le,0,1)>0?le[0]:1,Ft=Zt===0?Tt:Zt===1?Yt:ne.getPoint(lt,Zt)[p?"y":"x"],Ut=bt>Bt?1:-1,yi=be[z]>be[z+6]?1:-1,Kt=be[A+6];return V!==bt?(Ft<U?de+=Ut:Ft>Y?pe+=Ut:ye=!0,Ft>D-F&&Ft<D+F&&(se/=2)):(Ut!==yi?Tt<U?de+=Ut:Tt>Y&&(pe+=Ut):Tt!=Kt&&(Kt<Y&&Ft>Y?(pe+=Ut,ye=!0):Kt>U&&Ft<U&&(de+=Ut,ye=!0)),se/=4),be=lt,!P&&Ft>U&&Ft<Y&&ne.getTangent(lt,Zt)[p?"x":"y"]===0&&T(w,k,!p,C,!0)}}function De(lt){var bt=lt[z+0],Bt=lt[z+2],Tt=lt[z+4],$t=lt[z+6];if(V<=t(bt,Bt,Tt,$t)&&V>=e(bt,Bt,Tt,$t)){for(var vi=lt[A+0],Yt=lt[A+2],Zt=lt[A+4],Ft=lt[A+6],Ut=U>t(vi,Yt,Zt,Ft)||Y<e(vi,Yt,Zt,Ft)?[lt]:ne.getMonoCurves(lt,p),yi,Kt=0,Hn=Ut.length;Kt<Hn;Kt++)if(yi=Pe(Ut[Kt]))return yi}}for(var Re=0,je=I.length;Re<je;Re++){var Ge=I[Re],He=Ge._path,St=Ge.getValues(),kt;if((!Re||I[Re-1]._path!==He)&&(be=null,He._closed||(Ie=ne.getValues(He.getLastCurve().getSegment2(),Ge.getSegment1(),null,!C),Ie[z]!==Ie[z+6]&&(be=Ie)),!be)){be=St;for(var Lt=He.getLastCurve();Lt&&Lt!==Ge;){var yt=Lt.getValues();if(yt[z]!==yt[z+6]){be=yt;break}Lt=Lt.getPrevious()}}if(kt=De(St))return kt;if(Re+1===je||I[Re+1]._path!==He){if(Ie&&(kt=De(Ie)))return kt;ye&&!de&&!pe&&(de=pe=He.isClockwise(C)^p?1:-1),Z+=de,Q+=pe,de=pe=0,ye&&(Te=!0,ye=!1),Ie=null}}return Z=i(Z),Q=i(Q),{winding:t(Z,Q),windingL:Z,windingR:Q,quality:se,onPath:Te}}function x(w,k,p,C,P){var I=[],A=w,z=0,O;do{var N=w.getCurve();if(N){var D=N.getLength();I.push({segment:w,curve:N,length:D}),z+=D}w=w.getNext()}while(w&&!w._intersection&&w!==A);for(var V=[.5,.25,.75],O={winding:0,quality:-1},F=.001,U=1-F,Y=0;Y<V.length&&O.quality<.5;Y++)for(var D=z*V[Y],Z=0,Q=I.length;Z<Q;Z++){var de=I[Z],pe=de.length;if(D<=pe){var N=de.curve,ye=N._path,Te=ye._parent,se=Te instanceof ae?Te:ye,le=K.clamp(N.getTimeAt(D),F,U),be=N.getPointAtTime(le),Ie=i(N.getTangentAtTime(le).y)<Math.SQRT1_2,Pe=null;if(P.subtract&&p){var De=se===k?p:k,Re=De._getWinding(be,Ie,!0);if(se===k&&Re.winding||se===p&&!Re.winding){if(Re.quality<1)continue;Pe={winding:0,quality:1}}}Pe=Pe||T(be,C[ye._id][N.getIndex()],Ie,!0),Pe.quality>O.quality&&(O=Pe);break}D-=pe}for(var Z=I.length-1;Z>=0;Z--)I[Z].segment._winding=O}function E(w,k){var p=[],C;function P(je){var Ge;return!!(je&&!je._visited&&(!k||k[(Ge=je._winding||{}).winding]&&!(k.unite&&Ge.winding===2&&Ge.windingL&&Ge.windingR)))}function I(je){if(je){for(var Ge=0,He=C.length;Ge<He;Ge++)if(je===C[Ge])return!0}return!1}function A(je){for(var Ge=je._segments,He=0,St=Ge.length;He<St;He++)Ge[He]._visited=!0}function z(je,Ge){var He=je._intersection,St=He,kt=[];Ge&&(C=[je]);function Lt(yt,lt){for(;yt&&yt!==lt;){var bt=yt._segment,Bt=bt&&bt._path;if(Bt){var Tt=bt.getNext()||Bt.getFirstSegment(),$t=Tt._intersection;bt!==je&&(I(bt)||I(Tt)||Tt&&P(bt)&&(P(Tt)||$t&&P($t._segment)))&&kt.push(bt),Ge&&C.push(bt)}yt=yt._next}}if(He){for(Lt(He);He&&He._previous;)He=He._previous;Lt(He,St)}return kt}w.sort(function(je,Ge){var He=je._intersection,St=Ge._intersection,kt=!!(He&&He._overlap),Lt=!!(St&&St._overlap),yt=je._path,lt=Ge._path;return kt^Lt?kt?1:-1:!He^!St?He?1:-1:yt!==lt?yt._id-lt._id:je._index-Ge._index});for(var N=0,D=w.length;N<D;N++){var V=w[N],O=P(V),F=null,U=!1,Y=!0,Z=[],Q,de,pe;if(O&&V._path._overlapsOnly){var ye=V._path,Te=V._intersection._segment._path;ye.compare(Te)&&(ye.getArea()&&p.push(ye.clone(!1)),A(ye),A(Te),O=!1)}for(;O;){var se=!F,le=z(V,se),be=le.shift(),U=!se&&(I(V)||I(be)),Ie=!U&&be;if(se&&(F=new fe(ce.NO_INSERT),Q=null),U){(V.isFirst()||V.isLast())&&(Y=V._path._closed),V._visited=!0;break}if(Ie&&Q&&(Z.push(Q),Q=null),Q||(Ie&&le.push(V),Q={start:F._segments.length,crossings:le,visited:de=[],handleIn:pe}),Ie&&(V=be),!P(V)){F.removeSegments(Q.start);for(var Pe=0,De=de.length;Pe<De;Pe++)de[Pe]._visited=!1;de.length=0;do V=Q&&Q.crossings.shift(),(!V||!V._path)&&(V=null,Q=Z.pop(),Q&&(de=Q.visited,pe=Q.handleIn));while(Q&&!P(V));if(!V)break}var Re=V.getNext();F.add(new he(V._point,pe,Re&&V._handleOut)),V._visited=!0,de.push(V),V=Re||V._path.getFirstSegment(),pe=Re&&Re._handleIn}U&&(Y&&(F.getFirstSegment().setHandleIn(pe),F.setClosed(Y)),F.getArea()!==0&&p.push(F))}return p}return{_getWinding:function(w,k,p){return T(w,this.getCurves(),k,p)},unite:function(w,k){return f(this,w,"unite",k)},intersect:function(w,k){return f(this,w,"intersect",k)},subtract:function(w,k){return f(this,w,"subtract",k)},exclude:function(w,k){return f(this,w,"exclude",k)},divide:function(w,k){return k&&(k.trace==!1||k.stroke)?g(this,w,"divide"):h([this.subtract(w,k),this.intersect(w,k)],!0,this,w,k)},resolveCrossings:function(){var w=this._children,k=w||[this];function p(Q,de){var pe=Q&&Q._intersection;return pe&&pe._overlap&&pe._path===de}var C=!1,P=!1,I=this.getIntersections(null,function(Q){return Q.hasOverlap()&&(C=!0)||Q.isCrossing()&&(P=!0)}),A=C&&P&&[];if(I=Xe.expand(I),C)for(var z=m(I,function(Q){return Q.hasOverlap()},A),N=z.length-1;N>=0;N--){var D=z[N],V=D._path,O=D._segment,F=O.getPrevious(),U=O.getNext();p(F,V)&&p(U,V)&&(O.remove(),F._handleOut._set(0,0),U._handleIn._set(0,0),F!==O&&!F.getCurve().hasLength()&&(U._handleIn.set(F._handleIn),F.remove()))}P&&(m(I,C&&function(Q){var de=Q.getCurve(),pe=Q.getSegment(),ye=Q._intersection,Te=ye._curve,se=ye._segment;if(de&&Te&&de._path&&Te._path)return!0;pe&&(pe._intersection=null),se&&(se._intersection=null)},A),A&&b(A),k=E(d.each(k,function(Q){d.push(this,Q._segments)},[])));var Y=k.length,Z;return Y>1&&w?(k!==w&&this.setChildren(k),Z=this):Y===1&&!w&&(k[0]!==this&&this.setSegments(k[0].removeSegments()),Z=this),Z||(Z=new ae(ce.NO_INSERT),Z.addChildren(k),Z=Z.reduce(),Z.copyAttributes(this),this.replaceWith(Z)),Z},reorient:function(w,k){var p=this._children;return p&&p.length?this.setChildren(_(this.removeChildren(),function(C){return!!(w?C:C&1)},k)):k!==s&&this.setClockwise(k),this},getInteriorPoint:function(){var w=this.getBounds(),k=w.getCenter(!0);if(!this.contains(k)){for(var p=this.getCurves(),C=k.y,P=[],I=[],A=0,z=p.length;A<z;A++){var N=p[A].getValues(),D=N[1],V=N[3],O=N[5],F=N[7];if(C>=e(D,V,O,F)&&C<=t(D,V,O,F))for(var U=ne.getMonoCurves(N),Y=0,Z=U.length;Y<Z;Y++){var Q=U[Y],de=Q[1],pe=Q[7];if(de!==pe&&(C>=de&&C<=pe||C>=pe&&C<=de)){var ye=C===de?Q[0]:C===pe?Q[6]:ne.solveCubic(Q,1,C,I,0,1)===1?ne.getPoint(Q,I[0]).x:(Q[0]+Q[6])/2;P.push(ye)}}}P.length>1&&(P.sort(function(Te,se){return Te-se}),k.x=(P[0]+P[1])/2)}return k}}});var Ee=d.extend({_class:"PathFlattener",initialize:function(e,t,i,r,a){var o=[],h=[],c=0,f=1/(i||32),g=e._segments,v=g[0],b;function _(E,w){var k=ne.getValues(E,w,a);o.push(k),m(k,E._index,0,1)}function m(E,w,k,p){if(p-k>f&&!(r&&ne.isStraight(E))&&!ne.isFlatEnough(E,t||.25)){var C=ne.subdivide(E,.5),P=(k+p)/2;m(C[0],w,k,P),m(C[1],w,P,p)}else{var I=E[6]-E[0],A=E[7]-E[1],z=Math.sqrt(I*I+A*A);z>0&&(c+=z,h.push({offset:c,curve:E,index:w,time:p}))}}for(var T=1,x=g.length;T<x;T++)b=g[T],_(v,b),v=b;e._closed&&_(b||v,g[0]),this.curves=o,this.parts=h,this.length=c,this.index=0},_get:function(e){for(var t=this.parts,i=t.length,r,a=this.index;r=a,!(!a||t[--a].offset<e););for(;r<i;r++){var o=t[r];if(o.offset>=e){this.index=r;var h=t[r-1],c=h&&h.index===o.index?h.time:0,f=h?h.offset:0;return{index:o.index,time:c+(o.time-c)*(e-f)/(o.offset-f)}}}return{index:t[i-1].index,time:1}},drawPart:function(e,t,i){for(var r=this._get(t),a=this._get(i),o=r.index,h=a.index;o<=h;o++){var c=ne.getPart(this.curves[o],o===r.index?r.time:0,o===a.index?a.time:1);o===r.index&&e.moveTo(c[0],c[1]),e.bezierCurveTo.apply(e,c.slice(2))}}},d.each(ne._evaluateMethods,function(e){this[e+"At"]=function(t){var i=this._get(t);return ne[e](this.curves[i.index],i.time)}},{})),oe=d.extend({initialize:function(e){for(var t=this.points=[],i=e._segments,r=e._closed,a=0,o,h=i.length;a<h;a++){var c=i[a].point;(!o||!o.equals(c))&&t.push(o=c.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,i=t.length,r=null;return i>0&&(r=[new he(t[0])],i>1&&(this.fitCubic(r,e,0,i-1,t[1].subtract(t[0]),t[i-2].subtract(t[i-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,i,r,a,o){var h=this.points;if(r-i===1){var c=h[i],f=h[r],g=c.getDistance(f)/3;this.addCurve(e,[c,c.add(a.normalize(g)),f.add(o.normalize(g)),f]);return}for(var v=this.chordLengthParameterize(i,r),b=Math.max(t,t*t),_,m=!0,T=0;T<=4;T++){var x=this.generateBezier(i,r,v,a,o),E=this.findMaxError(i,r,x,v);if(E.error<t&&m){this.addCurve(e,x);return}if(_=E.index,E.error>=b)break;m=this.reparameterize(i,r,v,x),b=E.error}var w=h[_-1].subtract(h[_+1]);this.fitCubic(e,t,i,_,a,w),this.fitCubic(e,t,_,r,w.negate(),o)},addCurve:function(e,t){var i=e[e.length-1];i.setHandleOut(t[1].subtract(t[0])),e.push(new he(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,i,r,a){for(var o=1e-12,h=Math.abs,c=this.points,f=c[e],g=c[t],v=[[0,0],[0,0]],b=[0,0],_=0,m=t-e+1;_<m;_++){var T=i[_],x=1-T,E=3*T*x,w=x*x*x,k=E*x,p=E*T,C=T*T*T,P=r.normalize(k),I=a.normalize(p),A=c[e+_].subtract(f.multiply(w+k)).subtract(g.multiply(p+C));v[0][0]+=P.dot(P),v[0][1]+=P.dot(I),v[1][0]=v[0][1],v[1][1]+=I.dot(I),b[0]+=P.dot(A),b[1]+=I.dot(A)}var z=v[0][0]*v[1][1]-v[1][0]*v[0][1],N,D;if(h(z)>o){var V=v[0][0]*b[1]-v[1][0]*b[0],O=b[0]*v[1][1]-b[1]*v[0][1];N=O/z,D=V/z}else{var F=v[0][0]+v[0][1],U=v[1][0]+v[1][1];N=D=h(F)>o?b[0]/F:h(U)>o?b[1]/U:0}var Y=g.getDistance(f),Z=o*Y,Q,de;if(N<Z||D<Z)N=D=Y/3;else{var pe=g.subtract(f);Q=r.normalize(N),de=a.normalize(D),Q.dot(pe)-de.dot(pe)>Y*Y&&(N=D=Y/3,Q=de=null)}return[f,f.add(Q||r.normalize(N)),g.add(de||a.normalize(D)),g]},reparameterize:function(e,t,i,r){for(var a=e;a<=t;a++)i[a-e]=this.findRoot(r,this.points[a],i[a-e]);for(var a=1,o=i.length;a<o;a++)if(i[a]<=i[a-1])return!1;return!0},findRoot:function(e,t,i){for(var r=[],a=[],o=0;o<=2;o++)r[o]=e[o+1].subtract(e[o]).multiply(3);for(var o=0;o<=1;o++)a[o]=r[o+1].subtract(r[o]).multiply(2);var h=this.evaluate(3,e,i),c=this.evaluate(2,r,i),f=this.evaluate(1,a,i),g=h.subtract(t),v=c.dot(c)+g.dot(f);return K.isMachineZero(v)?i:i-g.dot(c)/v},evaluate:function(e,t,i){for(var r=t.slice(),a=1;a<=e;a++)for(var o=0;o<=e-a;o++)r[o]=r[o].multiply(1-i).add(r[o+1].multiply(i));return r[0]},chordLengthParameterize:function(e,t){for(var i=[0],r=e+1;r<=t;r++)i[r-e]=i[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,a=t-e;r<=a;r++)i[r]/=i[a];return i},findMaxError:function(e,t,i,r){for(var a=Math.floor((t-e+1)/2),o=0,h=e+1;h<t;h++){var c=this.evaluate(3,i,r[h-e]),f=c.subtract(this.points[h]),g=f.x*f.x+f.y*f.y;g>=o&&(o=g,a=h)}return{error:o,index:a}}}),we=ce.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&d.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(i&&t,!i&&L.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),$e=we.extend({_class:"PointText",initialize:function(){we.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new ee(e.x,e.y,this,"setPoint")},setPoint:function(){var e=L.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,i){if(!!this._content){this._setStyles(e,t,i);var r=this._lines,a=this._style,o=a.hasFill(),h=a.hasStroke(),c=a.getLeading(),f=e.shadowColor;e.font=a.getFontStyle(),e.textAlign=a.getJustification();for(var g=0,v=r.length;g<v;g++){e.shadowColor=f;var b=r[g];o&&(e.fillText(b,0,0),e.shadowColor="rgba(0,0,0,0)"),h&&e.strokeText(b,0,0),e.translate(0,c)}}},_getBounds:function(e,t){var i=this._style,r=this._lines,a=r.length,o=i.getJustification(),h=i.getLeading(),c=this.getView().getTextWidth(i.getFontStyle(),r),f=0;o!=="left"&&(f-=c/(o==="center"?2:1));var g=new X(f,a?-.75*h:0,c,a*h);return e?e._transformBounds(g,g):g}}),Ae=d.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},i={transparent:[0,0,0,0]},r;function a(c){var f=c.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||c.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),g="rgb",v;if(f){var b=f[4]?4:3;v=new Array(b);for(var _=0;_<b;_++){var m=f[_+1];v[_]=parseInt(m.length==1?m+m:m,16)/255}}else if(f=c.match(/^(rgb|hsl)a?\((.*)\)$/)){g=f[1],v=f[2].trim().split(/[,\s]+/g);for(var T=g==="hsl",_=0,x=Math.min(v.length,4);_<x;_++){var E=v[_],m=parseFloat(E);if(T)if(_===0){var w=E.match(/([a-z]*)$/)[1];m*={turn:360,rad:180/Math.PI,grad:.9}[w]||1}else _<3&&(m/=100);else _<3&&(m/=/%$/.test(E)?100:255);v[_]=m}}else{var k=i[c];if(!k)if(u){r||(r=tt.getContext(1,1),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=c,r.fillRect(0,0,1,1);var p=r.getImageData(0,0,1,1).data;k=i[c]=[p[0]/255,p[1]/255,p[2]/255]}else k=[0,0,0];v=k.slice()}return[g,v]}var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(c,f,g){var v=Math.max(c,f,g),b=Math.min(c,f,g),_=v-b,m=_===0?0:(v==c?(f-g)/_+(f<g?6:0):v==f?(g-c)/_+2:(c-f)/_+4)*60;return[m,v===0?0:_/v,v]},"hsb-rgb":function(c,f,g){c=(c/60%6+6)%6;var b=Math.floor(c),v=c-b,b=o[b],_=[g,g*(1-f),g*(1-f*v),g*(1-f*(1-v))];return[_[b[0]],_[b[1]],_[b[2]]]},"rgb-hsl":function(c,f,g){var v=Math.max(c,f,g),b=Math.min(c,f,g),_=v-b,m=_===0,T=m?0:(v==c?(f-g)/_+(f<g?6:0):v==f?(g-c)/_+2:(c-f)/_+4)*60,x=(v+b)/2,E=m?0:x<.5?_/(v+b):_/(2-v-b);return[T,E,x]},"hsl-rgb":function(c,f,g){if(c=(c/360%1+1)%1,f===0)return[g,g,g];for(var v=[c+1/3,c,c-1/3],b=g<.5?g*(1+f):g+f-g*f,_=2*g-b,m=[],T=0;T<3;T++){var x=v[T];x<0&&(x+=1),x>1&&(x-=1),m[T]=6*x<1?_+(b-_)*6*x:2*x<1?b:3*x<2?_+(b-_)*(2/3-x)*6:_}return m},"rgb-gray":function(c,f,g){return[c*.2989+f*.587+g*.114]},"gray-rgb":function(c){return[c,c,c]},"gray-hsb":function(c){return[0,0,c]},"gray-hsl":function(c){return[0,0,c]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return d.each(e,function(c,f){t[f]=[],d.each(c,function(g,v){var b=d.capitalize(g),_=/^(hue|saturation)$/.test(g),m=t[f][v]=f==="gradient"?g==="gradient"?function(T){var x=this._components[0];return T=Ue.read(Array.isArray(T)?T:arguments,0,{readNull:!0}),x!==T&&(x&&x._removeOwner(this),T&&T._addOwner(this)),T}:function(){return L.read(arguments,0,{readNull:g==="highlight",clone:!0})}:function(T){return T==null||isNaN(T)?0:+T};this["get"+b]=function(){return this._type===f||_&&/^hs[bl]$/.test(this._type)?this._components[v]:this._convert(f)[v]},this["set"+b]=function(T){this._type!==f&&!(_&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(f),this._properties=e[f],this._type=f),this._components[v]=m.call(this,T),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function c(f){var g=arguments,v=this.__read,b=0,_,m,T,x;Array.isArray(f)&&(g=f,f=g[0]);var E=f!=null&&typeof f;if(E==="string"&&f in e&&(_=f,f=g[1],Array.isArray(f)?(m=f,T=g[2]):(v&&(b=1),g=d.slice(g,1),E=typeof f)),!m){if(x=E==="number"?g:E==="object"&&f.length!=null?f:null,x){_||(_=x.length>=3?"rgb":"gray");var w=e[_].length;T=x[w],v&&(b+=x===arguments?w+(T!=null?1:0):1),x.length>w&&(x=d.slice(x,0,w))}else if(E==="string"){var k=a(f);_=k[0],m=k[1],m.length===4&&(T=m[3],m.length--)}else if(E==="object")if(f.constructor===c){if(_=f._type,m=f._components.slice(),T=f._alpha,_==="gradient")for(var p=1,C=m.length;p<C;p++){var P=m[p];P&&(m[p]=P.clone())}}else if(f.constructor===Ue)_="gradient",x=g;else{_="hue"in f?"lightness"in f?"hsl":"hsb":"gradient"in f||"stops"in f||"radial"in f?"gradient":"gray"in f?"gray":"rgb";var I=e[_],A=t[_];this._components=m=[];for(var p=0,C=I.length;p<C;p++){var z=f[I[p]];z==null&&!p&&_==="gradient"&&"stops"in f&&(z={stops:f.stops,radial:f.radial}),z=A[p].call(this,z),z!=null&&(m[p]=z)}T=f.alpha}v&&_&&(b=1)}if(this._type=_||"rgb",!m){this._components=m=[];for(var A=t[this._type],p=0,C=A.length;p<C;p++){var z=A[p].call(this,x&&x[p]);z!=null&&(m[p]=z)}}return this._components=m,this._properties=e[this._type],this._alpha=T,v&&(this.__read=b),this},set:"#initialize",_serialize:function(c,f){var g=this.getComponents();return d.serialize(/^(gray|rgb)$/.test(this._type)?g:[this._type].concat(g),c,!0,f)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(c){var f;return this._type===c?this._components.slice():(f=h[this._type+"-"+c])?f.apply(this,this._components):h["rgb-"+c].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(c){return new Ae(c,this._convert(c),this._alpha)},getType:function(){return this._type},setType:function(c){this._components=this._convert(c),this._properties=e[c],this._type=c},getComponents:function(){var c=this._components.slice();return this._alpha!=null&&c.push(this._alpha),c},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(c){this._alpha=c==null?null:Math.min(Math.max(c,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(c){var f=d.isPlainValue(c,!0)?Ae.read(arguments):c;return f===this||f&&this._class===f._class&&this._type===f._type&&this.getAlpha()===f.getAlpha()&&d.equals(this._components,f._components)||!1},toString:function(){for(var c=this._properties,f=[],g=this._type==="gradient",v=G.instance,b=0,_=c.length;b<_;b++){var m=this._components[b];m!=null&&f.push(c[b]+": "+(g?m:v.number(m)))}return this._alpha!=null&&f.push("alpha: "+v.number(this._alpha)),"{ "+f.join(", ")+" }"},toCSS:function(c){var f=this._convert("rgb"),g=c||this._alpha==null?1:this._alpha;function v(b){return Math.round((b<0?0:b>1?1:b)*255)}return f=[v(f[0]),v(f[1]),v(f[2])],g<1&&f.push(g<0?0:g),c?"#"+((1<<24)+(f[0]<<16)+(f[1]<<8)+f[2]).toString(16).slice(1):(f.length==4?"rgba(":"rgb(")+f.join(",")+")"},toCanvasStyle:function(c,f){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var g=this._components,v=g[0],b=v._stops,_=g[1],m=g[2],T=g[3],x=f&&f.inverted(),E;if(x&&(_=x._transformPoint(_),m=x._transformPoint(m),T&&(T=x._transformPoint(T))),v._radial){var w=m.getDistance(_);if(T){var k=T.subtract(_);k.getLength()>w&&(T=_.add(k.normalize(w-.1)))}var p=T||_;E=c.createRadialGradient(p.x,p.y,0,_.x,_.y,w)}else E=c.createLinearGradient(_.x,_.y,m.x,m.y);for(var C=0,P=b.length;C<P;C++){var I=b[C],A=I._offset;E.addColorStop(A==null?C/(P-1):A,I._color.toCanvasStyle())}return this._canvasStyle=E},transform:function(c){if(this._type==="gradient"){for(var f=this._components,g=1,v=f.length;g<v;g++){var b=f[g];c._transformPoint(b,b,!0)}this._changed()}},statics:{_types:e,random:function(){var c=Math.random;return new Ae(c(),c(),c())},_setOwner:function(c,f,g){return c&&(c._owner&&f&&c._owner!==f&&(c=c.clone()),!c._owner^!f&&(c._owner=f||null,c._setter=g||null)),c}}})},new function(){var e={add:function(t,i){return t+i},subtract:function(t,i){return t-i},multiply:function(t,i){return t*i},divide:function(t,i){return t/i}};return d.each(e,function(t,i){this[i]=function(r){r=Ae.read(arguments);for(var a=this._type,o=this._components,h=r._convert(a),c=0,f=o.length;c<f;c++)h[c]=t(o[c],h[c]);return new Ae(a,h,this._alpha!=null?t(this._alpha,r.getAlpha()):null)}},{})}),Ue=d.extend({_class:"Gradient",initialize:function(t,i){this._id=$.get(),t&&d.isPlainObject(t)&&(this.set(t),t=i=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof i=="string"&&i==="radial"||i||!1)},_serialize:function(e,t){return t.add(this,function(){return d.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=s))},clone:function(){for(var e=[],t=0,i=this._stops.length;t<i;t++)e[t]=this._stops[t].clone();return new Ue(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var i=0,r=t.length;i<r;i++)t[i]._owner=s;t=this._stops=xt.readList(e,0,{clone:!0});for(var i=0,r=t.length;i<r;i++)t[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,i=e._stops,r=t.length;if(r===i.length){for(var a=0;a<r;a++)if(!t[a].equals(i[a]))return!1;return!0}}return!1}}),xt=d.extend({_class:"GradientStop",initialize:function(t,i){var r=t,a=i;typeof t=="object"&&i===s&&(Array.isArray(t)&&typeof t[0]!="number"?(r=t[0],a=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,a=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(a)},clone:function(){return new xt(this._color.clone(),this._offset)},_serialize:function(e,t){var i=this._color,r=this._offset;return d.serialize(r==null?[i]:[i,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ae._setOwner(this._color,null),this._color=Ae._setOwner(Ae.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Ot=d.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new L,selectedColor:null},t=d.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=d.set({},t,{fillColor:new Ae}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(c,f,g){this._values={},this._owner=f,this._project=f&&f._project||g||Ye.project,this._defaults=!f||f instanceof _e?t:f instanceof we?i:e,c&&this.set(c)}};return d.each(t,function(h,c){var f=/Color$/.test(c),g=c==="shadowOffset",v=d.capitalize(c),b=r[c],_="set"+v,m="get"+v;o[_]=function(T){var x=this._owner,E=x&&x._children,w=E&&E.length>0&&!(x instanceof ae);if(w)for(var k=0,p=E.length;k<p;k++)E[k]._style[_](T);if((c==="selectedColor"||!w)&&c in this._defaults){var C=this._values[c];C!==T&&(f&&(C&&(Ae._setOwner(C,null),C._canvasStyle=null),T&&T.constructor===Ae&&(T=Ae._setOwner(T,x,w&&_))),this._values[c]=T,x&&x._changed(b||129))}},o[m]=function(T){var x=this._owner,E=x&&x._children,w=E&&E.length>0&&!(x instanceof ae),k;if(w&&!T)for(var p=0,C=E.length;p<C;p++){var P=E[p]._style[m]();if(!p)k=P;else if(!d.equals(k,P))return s}else if(c in this._defaults){var k=this._values[c];if(k===s)k=this._defaults[c],k&&k.clone&&(k=k.clone());else{var I=f?Ae:g?L:null;I&&!(k&&k.constructor===I)&&(this._values[c]=k=I.read([k],0,{readNull:!0,clone:!0}))}}return k&&f&&(k=Ae._setOwner(k,x,w&&_)),k},a[m]=function(T){return this._style[m](T)},a[_]=function(T){this._style[_](T)}}),d.each({Font:"FontFamily",WindingRule:"FillRule"},function(h,c){var f="get"+c,g="set"+c;o[f]=a[f]="#get"+h,o[g]=a[g]="#set"+h}),ce.inject(a),o},{set:function(e){var t=e instanceof Ot,i=t?e._values:e;if(i){for(var r in i)if(r in this._defaults){var a=i[r];this[r]=a&&t&&a.clone?a.clone():a}}},equals:function(e){function t(i,r,a){var o=i._values,h=r._values,c=r._defaults;for(var f in o){var g=o[f],v=h[f];if(!(a&&f in h)&&!d.equals(g,v===s?c[f]:v))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),t!=null?t:i*1.2}}),at=new function(){function e(t,i,r,a){for(var o=["","webkit","moz","Moz","ms","o"],h=i[0].toUpperCase()+i.substring(1),c=0;c<6;c++){var f=o[c],g=f?f+h:i;if(g in t){if(r)t[g]=a;else return t[g];break}}}return{getStyles:function(t){var i=t&&t.nodeType!==9?t.ownerDocument:t,r=i&&i.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,i){var r=t.ownerDocument,a=r.body,o=r.documentElement,h;try{h=t.getBoundingClientRect()}catch(v){h={left:0,top:0,width:0,height:0}}var c=h.left-(o.clientLeft||a.clientLeft||0),f=h.top-(o.clientTop||a.clientTop||0);if(!i){var g=r.defaultView;c+=g.pageXOffset||o.scrollLeft||a.scrollLeft,f+=g.pageYOffset||o.scrollTop||a.scrollTop}return new X(c,f,h.width,h.height)},getViewportBounds:function(t){var i=t.ownerDocument,r=i.defaultView,a=i.documentElement;return new X(0,0,r.innerWidth||a.clientWidth,r.innerHeight||a.clientHeight)},getOffset:function(t,i){return at.getBounds(t,i).getPoint()},getSize:function(t){return at.getBounds(t,!0).getSize()},isInvisible:function(t){return at.getSize(t).equals(new H(0,0))},isInView:function(t){return!at.isInvisible(t)&&at.getViewportBounds(t).intersects(at.getBounds(t,!0))},isInserted:function(t){return y.body.contains(t)},getPrefixed:function(t,i){return t&&e(t,i)},setPrefixed:function(t,i,r){if(typeof i=="object")for(var a in i)e(t,a,!0,i[a]);else e(t,i,!0,r)}}},ht={add:function(e,t){if(e)for(var i in t)for(var r=t[i],a=i.split(/[\s,]+/g),o=0,h=a.length;o<h;o++){var c=a[o],f=e===y&&(c==="touchstart"||c==="touchmove")?{passive:!1}:!1;e.addEventListener(c,r,f)}},remove:function(e,t){if(e)for(var i in t)for(var r=t[i],a=i.split(/[\s,]+/g),o=0,h=a.length;o<h;o++)e.removeEventListener(a[o],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new L(t.pageX||t.clientX+y.documentElement.scrollLeft,t.pageY||t.clientY+y.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return ht.getPoint(e).subtract(at.getOffset(t||ht.getTarget(e)))}};ht.requestAnimationFrame=new function(){var e=at.getPrefixed(u,"requestAnimationFrame"),t=!1,i=[],r;function a(){var o=i;i=[];for(var h=0,c=o.length;h<c;h++)o[h]();t=e&&i.length,t&&e(a)}return function(o){i.push(o),e?t||(e(a),t=!0):r||(r=setInterval(a,1e3/60))}};var ct=d.extend(S,{_class:"View",initialize:function e(t,i){function r(b){return i[b]||parseInt(i.getAttribute(b),10)}function a(){var b=at.getSize(i);return b.isNaN()||b.isZero()?new H(r("width"),r("height")):b}var o;if(u&&i){this._id=i.getAttribute("id"),this._id==null&&i.setAttribute("id",this._id="paper-view-"+e._id++),ht.add(i,this._viewEvents);var h="none";if(at.setPrefixed(i.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),M.hasAttribute(i,"resize")){var c=this;ht.add(u,this._windowEvents={resize:function(){c.setViewSize(a())}})}if(o=a(),M.hasAttribute(i,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var f=this._stats.domElement,g=f.style,v=at.getOffset(i);g.position="absolute",g.left=v.x+"px",g.top=v.y+"px",y.body.appendChild(f)}}else o=new H(i),i=null;this._project=t,this._scope=t._scope,this._element=i,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new re)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ye.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ct._focused===this&&(ct._focused=null),ct._views.splice(ct._views.indexOf(this),1),delete ct._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),ht.remove(this._element,this._viewEvents),ht.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:d.each(ce._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;ht.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!at.getPrefixed(y,"hidden")||M.getAttribute(t,"keepalive")==="true")&&at.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ye=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new d({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var i=this._frameItems;t?(i[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete i[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var i=this._frameItems[t];i.item.emit("frame",new d(e,{time:i.time+=e.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new te(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=H.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var i=this._element;i&&(i.width!==e&&(i.width=e),i.height!==t&&(i.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new X(new L,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return at.isInView(this._element)},isInserted:function(){return at.isInserted(this._element)},getPixelSize:function(e){var t=this._element,i;if(t){var r=t.parentNode,a=y.createElement("div");a.style.fontSize=e,r.appendChild(a),i=parseFloat(at.getStyles(a).fontSize),r.removeChild(a)}else i=parseFloat(i);return i},getTextWidth:function(e,t){return 0}},d.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var i=arguments,r=(t?d:L).read(i),a=L.read(i,0,{readNull:!0});return this.transform(new re()[e](r,a||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new re;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=L.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new re().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new ee(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=L.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(L.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(L.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(L.read(arguments))},getEventPoint:function(e){return this.viewToProject(ht.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){y&&typeof t=="string"&&(t=y.getElementById(t));var i=u?Hi:ct;return new i(e,t)}}},new function(){if(!u)return;var e,t,i=!1,r=!1;function a(O){var F=ht.getTarget(O);return F.getAttribute&&ct._viewsById[F.getAttribute("id")]}function o(){var O=ct._focused;if(!O||!O.isVisible()){for(var F=0,U=ct._views.length;F<U;F++)if((O=ct._views[F]).isVisible()){ct._focused=t=O;break}}}function h(O,F,U){O._handleMouseEvent("mousemove",F,U)}var c=u.navigator,f,g,v;c.pointerEnabled||c.msPointerEnabled?(f="pointerdown MSPointerDown",g="pointermove MSPointerMove",v="pointerup pointercancel MSPointerUp MSPointerCancel"):(f="touchstart",g="touchmove",v="touchend touchcancel","ontouchstart"in u&&c.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(f+=" mousedown",g+=" mousemove",v+=" mouseup"));var b={},_={mouseout:function(O){var F=ct._focused,U=ht.getRelatedTarget(O);if(F&&(!U||U.nodeName==="HTML")){var Y=ht.getOffset(O,F._element),Z=Y.x,Q=Math.abs,de=Q(Z),pe=1<<25,ye=de-pe;Y.x=Q(ye)<de?ye*(Z<0?-1:1):Z,h(F,O,F.viewToProject(Y))}},scroll:o};b[f]=function(O){var F=ct._focused=a(O);i||(i=!0,F._handleMouseEvent("mousedown",O))},_[g]=function(O){var F=ct._focused;if(!r){var U=a(O);U?F!==U&&(F&&h(F,O),e||(e=F),F=ct._focused=t=U):t&&t===F&&(e&&!e.isInserted()&&(e=null),F=ct._focused=e,e=null,o())}F&&h(F,O)},_[f]=function(){r=!0},_[v]=function(O){var F=ct._focused;F&&i&&F._handleMouseEvent("mouseup",O),r=i=!1},ht.add(y,_),ht.add(u,{load:o});var m=!1,T=!1,x={doubleclick:"click",mousedrag:"mousemove"},E=!1,w,k,p,C,P,I,A,z;function N(O,F,U,Y,Z,Q,de){var pe=!1,ye;function Te(se,le){if(se.responds(le)){if(ye||(ye=new Dt(le,Y,Z,F||se,Q?Z.subtract(Q):null)),se.emit(le,ye)&&(m=!0,ye.prevented&&(T=!0),ye.stopped))return pe=!0}else{var be=x[le];if(be)return Te(se,be)}}for(;O&&O!==de&&!Te(O,U);)O=O._parent;return pe}function D(O,F,U,Y,Z,Q){return O._project.removeOn(U),T=m=!1,P&&N(P,null,U,Y,Z,Q)||F&&F!==P&&!F.isDescendant(P)&&N(F,null,U==="mousedrag"?"mousemove":U,Y,Z,Q,P)||N(O,P||F||O,U,Y,Z,Q)}var V={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:b,_handleMouseEvent:function(O,F,U){var Y=this._itemEvents,Z=Y.native[O],Q=O==="mousemove",de=this._scope.tool,pe=this;function ye(De){return Y.virtual[De]||pe.responds(De)||de&&de.responds(De)}Q&&i&&ye("mousedrag")&&(O="mousedrag"),U||(U=this.getEventPoint(F));var Te=this.getBounds().contains(U),se=Z&&Te&&pe._project.hitTest(U,{tolerance:0,fill:!0,stroke:!0}),le=se&&se.item||null,be=!1,Ie={};if(Ie[O.substr(5)]=!0,Z&&le!==C&&(C&&N(C,null,"mouseleave",F,U),le&&N(le,null,"mouseenter",F,U),C=le),E^Te&&(N(this,null,Te?"mouseenter":"mouseleave",F,U),be=!0),(Te||Ie.drag)&&!U.equals(k)&&(D(this,le,Q?O:"mousemove",F,U,k),be=!0),E=Te,Ie.down&&Te||Ie.up&&w){if(D(this,le,O,F,U,w),Ie.down){if(z=le===I&&Date.now()-A<300,p=I=le,!T&&le){for(var Pe=le;Pe&&!Pe.responds("mousedrag");)Pe=Pe._parent;Pe&&(P=le)}w=U}else Ie.up&&(!T&&le===p&&(A=Date.now(),D(this,le,z?"doubleclick":"click",F,U,w),z=!1),p=P=null);E=!1,be=!0}k=U,be&&de&&(m=de._handleMouseEvent(O,F,U,Ie)||m),F.cancelable!==!1&&(m&&!Ie.move||Ie.down&&ye("mouseup"))&&F.preventDefault()},_handleKeyEvent:function(O,F,U,Y){var Z=this._scope,Q=Z.tool,de;function pe(ye){ye.responds(O)&&(Ye=Z,ye.emit(O,de=de||new rt(O,F,U,Y)))}this.isVisible()&&(pe(this),Q&&Q.responds(O)&&pe(Q))},_countItemEvent:function(O,F){var U=this._itemEvents,Y=U.native,Z=U.virtual;for(var Q in V)Y[Q]=(Y[Q]||0)+(V[Q][O]||0)*F;Z[O]=(Z[O]||0)+F},statics:{updateFocus:o,_resetState:function(){i=r=m=E=!1,e=t=w=k=p=C=P=I=A=z=null}}}}),Hi=ct.extend({_class:"CanvasView",initialize:function(t,i){if(!(i instanceof u.HTMLCanvasElement)){var r=H.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+d.slice(arguments,1));i=tt.getCanvas(r)}var a=this._context=i.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(M.getAttribute(i,"hidpi"))){var o=u.devicePixelRatio||1,h=at.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=o/h}ct.call(this,t,i),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,i){var r=this._pixelRatio;if(e.base.call(this,t*r,i*r),r!==1){var a=this._element,o=this._context;if(!M.hasAttribute(a,"resize")){var h=a.style;h.width=t+"px",h.height=i+"px"}o.restore(),o.save(),o.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var i=Ye.agent,r;if(i&&i.firefox)r=e.base.call(this,t);else{var a=this._context,o=a.font;a.font=t+" serif",r=parseFloat(a.font),a.font=o}return r},getTextWidth:function(e,t){var i=this._context,r=i.font,a=0;i.font=e;for(var o=0,h=t.length;o<h;o++)a=Math.max(a,i.measureText(t[o]).width);return i.font=r,a},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,i=this._viewSize;return t.clearRect(0,0,i.width+1,i.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Me=d.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return mt.modifiers}}),rt=Me.extend({_class:"KeyEvent",initialize:function(t,i,r,a){this.type=t,this.event=i,this.key=r,this.character=a},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),mt=new function(){var e={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},i={},r={},a,o,h=new d({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var g=Ye&&Ye.agent;return g&&g.mac?this.meta:this.control}}});function c(g){var v=g.key||g.keyIdentifier;return v=/^U\+/.test(v)?String.fromCharCode(parseInt(v.substr(2),16)):/^Arrow[A-Z]/.test(v)?v.substr(5):v==="Unidentified"||v===s?String.fromCharCode(g.keyCode):v,e[v]||(v.length>1?d.hyphenate(v):v.toLowerCase())}function f(g,v,b,_){var m=ct._focused,T;if(i[v]=g,g?r[v]=b:delete r[v],v.length>1&&(T=d.camelize(v))in h){h[T]=g;var x=Ye&&Ye.agent;if(T==="meta"&&x&&x.mac)if(g)a={};else{for(var E in a)E in r&&f(!1,E,a[E],_);a=null}}else g&&a&&(a[v]=b);m&&m._handleKeyEvent(g?"keydown":"keyup",_,v,b)}return ht.add(y,{keydown:function(g){var v=c(g),b=Ye&&Ye.agent;v.length>1||b&&b.chrome&&(g.altKey||b.mac&&g.metaKey||!b.mac&&g.ctrlKey)?f(!0,v,t[v]||(v.length>1?"":v),g):o=v},keypress:function(g){if(o){var v=c(g),b=g.charCode,_=b>=32?String.fromCharCode(b):v.length>1?"":v;v!==o&&(v=_.toLowerCase()),f(!0,v,_,g),o=null}},keyup:function(g){var v=c(g);v in r&&f(!1,v,r[v],g)}}),ht.add(u,{blur:function(g){for(var v in r)f(!1,v,r[v],g)}}),{modifiers:h,isDown:function(g){return!!i[g]}}},Dt=Me.extend({_class:"MouseEvent",initialize:function(t,i,r,a,o){this.type=t,this.event=i,this.point=r,this.target=a,this.delta=o},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ui=Me.extend({_class:"ToolEvent",_item:null,initialize:function(t,i,r){this.tool=t,this.type=i,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,i=t._parent;/^(Group|CompoundPath)$/.test(i._class);)t=i,i=i._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),qn=q.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){q.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,i,r){Ye=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var a=r.move||r.drag,o=this.responds(e),h=this.minDistance,c=this.maxDistance,f=!1,g=this;function v(_,m){var T=i,x=a?g._point:g._downPoint||T;if(a){if(g._moveCount>=0&&T.equals(x))return!1;if(x&&(_!=null||m!=null)){var E=T.subtract(x),w=E.getLength();if(w<(_||0))return!1;m&&(T=x.add(E.normalize(Math.min(w,m))))}g._moveCount++}return g._point=T,g._lastPoint=x||T,r.down&&(g._moveCount=-1,g._downPoint=T,g._downCount++),!0}function b(){o&&(f=g.emit(e,new Ui(g,e,t))||f)}if(r.down)v(),b();else if(r.up)v(null,c),b();else if(o)for(;v(h,c);)b();return f}}),Pr=d.extend(S,{_class:"Tween",statics:{easings:new d({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,i,r,a,o,h){this.object=t;var c=typeof o,f=c==="function";this.type=f?c:c==="string"?o:"linear",this.easing=f?o:e.easings[this.type],this.duration=a,this.running=!1,this._then=null,this._startTime=null;var g=i||r;this._keys=g?Object.keys(g):[],this._parsedKeys=this._parseKeys(this._keys),this._from=g&&this._getState(i),this._to=g&&this._getState(r),h!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),i=this._keys,r=function(v){return typeof v=="function"?v(t,e):v},a=0,o=i&&i.length;a<o;a++){var h=i[a],c=r(this._from[h]),f=r(this._to[h]),g=c&&f&&c.__add&&f.__add?f.__subtract(c).__multiply(t).__add(c):(f-c)*t+c;this._setProperty(this._parsedKeys[h],g)}this.responds("update")&&this.emit("update",new d({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,i=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(i)},_getState:function(e){for(var t=this._keys,i={},r=0,a=t.length;r<a;r++){var o=t[r],h=this._parsedKeys[o],c=this._getProperty(h),f;if(e){var g=this._resolveValue(c,e[o]);this._setProperty(h,g),f=this._getProperty(h),f=f&&f.clone?f.clone():f,this._setProperty(h,c)}else f=c&&c.clone?c.clone():c;i[o]=f}return i},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var i=t[0];return i&&i.match&&i.match(/^[+\-\*\/]=/)?this._calculate(e,i[0],t[1]):t}else if(typeof t=="string"){var r=t.match(/^[+\-*/]=(.*)/);if(r){var a=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],a)}}}return t},_calculate:function(e,t,i){return Ye.PaperScript.calculateBinary(e,t,i)},_parseKeys:function(e){for(var t={},i=0,r=e.length;i<r;i++){var a=e[i],o=a.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[a]=o.split("/")}return t},_getProperty:function(e,t){for(var i=this.object,r=0,a=e.length-(t||0);r<a&&i;r++)i=i[e[r]];return i},_setProperty:function(e,t){var i=this._getProperty(e,1);i&&(i[e[e.length-1]]=t)}}),gn={request:function(e){var t=new l.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,d.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var i=t.status;i===0||i===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var i=t.status,r='Could not load "'+e.url+'" (Status: '+i+")";if(e.onError)e.onError(r,i);else throw new Error(r)},t.send(null)}},tt=d.exports.CanvasProvider={canvases:[],getCanvas:function(e,t){if(!u)return null;var i,r=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?i=this.canvases.pop():(i=y.createElement("canvas"),r=!1);var a=i.getContext("2d");if(!a)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===e&&i.height===t?r&&a.clearRect(0,0,e+1,t+1):(i.width=e,i.height=t),a.save(),i},getContext:function(e,t){var i=this.getCanvas(e,t);return i?i.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ji=new function(){var e=Math.min,t=Math.max,i=Math.abs,r,a,o,h,c,f,g,v,b,_,m;function T(P,I,A){return .2989*P+.587*I+.114*A}function x(P,I,A,D){var N=D-T(P,I,A);b=P+N,_=I+N,m=A+N;var D=T(b,_,m),V=e(b,_,m),O=t(b,_,m);if(V<0){var F=D-V;b=D+(b-D)*D/F,_=D+(_-D)*D/F,m=D+(m-D)*D/F}if(O>255){var U=255-D,Y=O-D;b=D+(b-D)*U/Y,_=D+(_-D)*U/Y,m=D+(m-D)*U/Y}}function E(P,I,A){return t(P,I,A)-e(P,I,A)}function w(P,I,A,z){var N=[P,I,A],D=t(P,I,A),V=e(P,I,A),O;V=V===P?0:V===I?1:2,D=D===P?0:D===I?1:2,O=e(V,D)===0?t(V,D)===1?2:1:0,N[D]>N[V]?(N[O]=(N[O]-N[V])*z/(N[D]-N[V]),N[D]=z):N[O]=N[D]=0,N[V]=0,b=N[0],_=N[1],m=N[2]}var k={multiply:function(){b=c*r/255,_=f*a/255,m=g*o/255},screen:function(){b=c+r-c*r/255,_=f+a-f*a/255,m=g+o-g*o/255},overlay:function(){b=c<128?2*c*r/255:255-2*(255-c)*(255-r)/255,_=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255,m=g<128?2*g*o/255:255-2*(255-g)*(255-o)/255},"soft-light":function(){var P=r*c/255;b=P+c*(255-(255-c)*(255-r)/255-P)/255,P=a*f/255,_=P+f*(255-(255-f)*(255-a)/255-P)/255,P=o*g/255,m=P+g*(255-(255-g)*(255-o)/255-P)/255},"hard-light":function(){b=r<128?2*r*c/255:255-2*(255-r)*(255-c)/255,_=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255,m=o<128?2*o*g/255:255-2*(255-o)*(255-g)/255},"color-dodge":function(){b=c===0?0:r===255?255:e(255,255*c/(255-r)),_=f===0?0:a===255?255:e(255,255*f/(255-a)),m=g===0?0:o===255?255:e(255,255*g/(255-o))},"color-burn":function(){b=c===255?255:r===0?0:t(0,255-(255-c)*255/r),_=f===255?255:a===0?0:t(0,255-(255-f)*255/a),m=g===255?255:o===0?0:t(0,255-(255-g)*255/o)},darken:function(){b=c<r?c:r,_=f<a?f:a,m=g<o?g:o},lighten:function(){b=c>r?c:r,_=f>a?f:a,m=g>o?g:o},difference:function(){b=c-r,b<0&&(b=-b),_=f-a,_<0&&(_=-_),m=g-o,m<0&&(m=-m)},exclusion:function(){b=c+r*(255-c-c)/255,_=f+a*(255-f-f)/255,m=g+o*(255-g-g)/255},hue:function(){w(r,a,o,E(c,f,g)),x(b,_,m,T(c,f,g))},saturation:function(){w(c,f,g,E(r,a,o)),x(b,_,m,T(c,f,g))},luminosity:function(){x(c,f,g,T(r,a,o))},color:function(){x(r,a,o,T(c,f,g))},add:function(){b=e(c+r,255),_=e(f+a,255),m=e(g+o,255)},subtract:function(){b=t(c-r,0),_=t(f-a,0),m=t(g-o,0)},average:function(){b=(c+r)/2,_=(f+a)/2,m=(g+o)/2},negation:function(){b=255-i(255-r-c),_=255-i(255-a-f),m=255-i(255-o-g)}},p=this.nativeModes=d.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(P){this[P]=!0},{}),C=tt.getContext(1,1);C&&(d.each(k,function(P,I){var A=I==="darken",z=!1;C.save();try{C.fillStyle=A?"#300":"#a00",C.fillRect(0,0,1,1),C.globalCompositeOperation=I,C.globalCompositeOperation===I&&(C.fillStyle=A?"#a00":"#300",C.fillRect(0,0,1,1),z=C.getImageData(0,0,1,1).data[0]!==A?170:51)}catch(N){}C.restore(),p[I]=z}),tt.release(C)),this.process=function(P,I,A,z,N){var D=I.canvas,V=P==="normal";if(V||p[P])A.save(),A.setTransform(1,0,0,1,0,0),A.globalAlpha=z,V||(A.globalCompositeOperation=P),A.drawImage(D,N.x,N.y),A.restore();else{var O=k[P];if(!O)return;for(var F=A.getImageData(N.x,N.y,D.width,D.height),U=F.data,Y=I.getImageData(0,0,D.width,D.height).data,Z=0,Q=U.length;Z<Q;Z+=4){r=Y[Z],c=U[Z],a=Y[Z+1],f=U[Z+1],o=Y[Z+2],g=U[Z+2],h=Y[Z+3],v=U[Z+3],O();var de=h*z/255,pe=1-de;U[Z]=de*b+pe*c,U[Z+1]=de*_+pe*f,U[Z+2]=de*m+pe*g,U[Z+3]=h*z+pe*v}A.putImageData(F,N.x,N.y)}}},ft=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",r={href:i,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function a(c,f,g){return h(y.createElementNS(e,c),f,g)}function o(c,f){var g=r[f],v=g?c.getAttributeNS(g,f):c.getAttribute(f);return v==="null"?null:v}function h(c,f,g){for(var v in f){var b=f[v],_=r[v];typeof b=="number"&&g&&(b=g.number(b)),_?c.setAttributeNS(_,v,b):c.setAttribute(v,b)}return c}return{svg:e,xmlns:t,xlink:i,create:a,get:o,set:h}},pn=d.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Ce||e instanceof xe||e instanceof we)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var i=d.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&d.each(r,function(a,o){this[a]=o},{}),exportFilter:e[3],get:"get"+i,set:"set"+i}},{});new function(){var e;function t(k,p,C){var P=new d,I=k.getTranslation();if(p){var A;k.isInvertible()?(k=k._shiftless(),A=k._inverseTransform(I),I=null):A=new L,P[C?"cx":"x"]=A.x,P[C?"cy":"y"]=A.y}if(!k.isIdentity()){var z=k.decompose();if(z){var N=[],D=z.rotation,V=z.scaling,O=z.skewing;I&&!I.isZero()&&N.push("translate("+e.point(I)+")"),D&&N.push("rotate("+e.number(D)+")"),(!K.isZero(V.x-1)||!K.isZero(V.y-1))&&N.push("scale("+e.point(V)+")"),O.x&&N.push("skewX("+e.number(O.x)+")"),O.y&&N.push("skewY("+e.number(O.y)+")"),P.transform=N.join(" ")}else P.transform="matrix("+k.getValues().join(",")+")"}return P}function i(k,p){for(var C=t(k._matrix),P=k._children,I=ft.create("g",C,e),A=0,z=P.length;A<z;A++){var N=P[A],D=E(N,p);if(D)if(N.isClipMask()){var V=ft.create("clipPath");V.appendChild(D),T(N,V,"clip"),ft.set(I,{"clip-path":"url(#"+V.id+")"})}else I.appendChild(D)}return I}function r(k,p){var C=t(k._matrix,!0),P=k.getSize(),I=k.getImage();return C.x-=P.width/2,C.y-=P.height/2,C.width=P.width,C.height=P.height,C.href=p.embedImages==!1&&I&&I.src||k.toDataURL(),ft.create("image",C,e)}function a(k,p){var C=p.matchShapes;if(C){var P=k.toShape(!1);if(P)return o(P)}var I=k._segments,A=I.length,z,N=t(k._matrix);if(C&&A>=2&&!k.hasHandles())if(A>2){z=k._closed?"polygon":"polyline";for(var D=[],V=0;V<A;V++)D.push(e.point(I[V]._point));N.points=D.join(" ")}else{z="line";var O=I[0]._point,F=I[1]._point;N.set({x1:O.x,y1:O.y,x2:F.x,y2:F.y})}else z="path",N.d=k.getPathData(null,p.precision);return ft.create(z,N,e)}function o(k){var p=k._type,C=k._radius,P=t(k._matrix,!0,p!=="rectangle");if(p==="rectangle"){p="rect";var I=k._size,A=I.width,z=I.height;P.x-=A/2,P.y-=z/2,P.width=A,P.height=z,C.isZero()&&(C=null)}return C&&(p==="circle"?P.r=C:(P.rx=C.width,P.ry=C.height)),ft.create(p,P,e)}function h(k,p){var C=t(k._matrix),P=k.getPathData(null,p.precision);return P&&(C.d=P),ft.create("path",C,e)}function c(k,p){var C=t(k._matrix,!0),P=k._definition,I=m(P,"symbol"),A=P._item,z=A.getStrokeBounds();return I||(I=ft.create("symbol",{viewBox:e.rectangle(z)}),I.appendChild(E(A,p)),T(P,I,"symbol")),C.href="#"+I.id,C.x+=z.x,C.y+=z.y,C.width=z.width,C.height=z.height,C.overflow="visible",ft.create("use",C,e)}function f(k){var p=m(k,"color");if(!p){var C=k.getGradient(),P=C._radial,I=k.getOrigin(),A=k.getDestination(),z;if(P){z={cx:I.x,cy:I.y,r:I.getDistance(A)};var N=k.getHighlight();N&&(z.fx=N.x,z.fy=N.y)}else z={x1:I.x,y1:I.y,x2:A.x,y2:A.y};z.gradientUnits="userSpaceOnUse",p=ft.create((P?"radial":"linear")+"Gradient",z,e);for(var D=C._stops,V=0,O=D.length;V<O;V++){var F=D[V],U=F._color,Y=U.getAlpha(),Z=F._offset;z={offset:Z==null?V/(O-1):Z},U&&(z["stop-color"]=U.toCSS(!0)),Y<1&&(z["stop-opacity"]=Y),p.appendChild(ft.create("stop",z,e))}T(k,p,"color")}return"url(#"+p.id+")"}function g(k){var p=ft.create("text",t(k._matrix,!0),e);return p.textContent=k._content,p}var v={Group:i,Layer:i,Raster:r,Path:a,Shape:o,CompoundPath:h,SymbolItem:c,PointText:g};function b(k,p,C){var P={},I=!C&&k.getParent(),A=[];return k._name!=null&&(P.id=k._name),d.each(pn,function(z){var N=z.get,D=z.type,V=k[N]();if(z.exportFilter?z.exportFilter(k,V):!I||!d.equals(I[N](),V)){if(D==="color"&&V!=null){var O=V.getAlpha();O<1&&(P[z.attribute+"-opacity"]=O)}D==="style"?A.push(z.attribute+": "+V):P[z.attribute]=V==null?"none":D==="color"?V.gradient?f(V):V.toCSS(!0):D==="array"?V.join(","):D==="lookup"?z.toSVG[V]:V}}),A.length&&(P.style=A.join(";")),P.opacity===1&&delete P.opacity,k._visible||(P.visibility="hidden"),ft.set(p,P,e)}var _;function m(k,p){return _||(_={ids:{},svgs:{}}),k&&_.svgs[p+"-"+(k._id||k.__id||(k.__id=$.get("svg")))]}function T(k,p,C){_||m();var P=_.ids[C]=(_.ids[C]||0)+1;p.id=C+"-"+P,_.svgs[C+"-"+(k._id||k.__id)]=p}function x(k,p){var C=k,P=null;if(_){C=k.nodeName.toLowerCase()==="svg"&&k;for(var I in _.svgs)P||(C||(C=ft.create("svg"),C.appendChild(k)),P=C.insertBefore(ft.create("defs"),C.firstChild)),P.appendChild(_.svgs[I]);_=null}return p.asString?new l.XMLSerializer().serializeToString(C):C}function E(k,p,C){var P=v[k._class],I=P&&P(k,p);if(I){var A=p.onExport;A&&(I=A(k,I,p)||I);var z=JSON.stringify(k._data);z&&z!=="{}"&&z!=="null"&&I.setAttribute("data-paper-data",z)}return I&&b(k,I,C)}function w(k){return k||(k={}),e=new G(k.precision),k}ce.inject({exportSVG:function(k){return k=w(k),x(E(this,k,!0),k)}}),Le.inject({exportSVG:function(k){k=w(k);var p=this._children,C=this.getView(),P=d.pick(k.bounds,"view"),I=k.matrix||P==="view"&&C._matrix,A=I&&re.read([I]),z=P==="view"?new X([0,0],C.getViewSize()):P==="content"?ce._getBounds(p,A,{stroke:!0}).rect:X.read([P],0,{readNull:!0}),N={version:"1.1",xmlns:ft.svg,"xmlns:xlink":ft.xlink};z&&(N.width=z.width,N.height=z.height,(z.x||z.x===0||z.y||z.y===0)&&(N.viewBox=e.rectangle(z)));var D=ft.create("svg",N,e),V=D;A&&!A.isIdentity()&&(V=D.appendChild(ft.create("g",t(A),e)));for(var O=0,F=p.length;O<F;O++)V.appendChild(E(p[O],k,!0));return x(D,k)}})},new function(){var e={},t;function i(p,C,P,I,A,z){var N=ft.get(p,C)||z,D=N==null?I?null:P?"":0:P?N:parseFloat(N);return/%\s*$/.test(N)?D/100*(A?1:t[/x|^width/.test(C)?"width":"height"]):D}function r(p,C,P,I,A,z,N){return C=i(p,C||"x",!1,I,A,z),P=i(p,P||"y",!1,I,A,N),I&&(C==null||P==null)?null:new L(C,P)}function a(p,C,P,I,A){return C=i(p,C||"width",!1,I,A),P=i(p,P||"height",!1,I,A),I&&(C==null||P==null)?null:new H(C,P)}function o(p,C,P){return p==="none"?null:C==="number"?parseFloat(p):C==="array"?p?p.split(/[\s,]+/g).map(parseFloat):[]:C==="color"?E(p)||p:C==="lookup"?P[p]:p}function h(p,C,P,I){var A=p.childNodes,z=C==="clippath",N=C==="defs",D=new _e,V=D._project,O=V._currentStyle,F=[];if(!z&&!N&&(D=x(D,p,I),V._currentStyle=D._style.clone()),I)for(var U=p.querySelectorAll("defs"),Y=0,Z=U.length;Y<Z;Y++)w(U[Y],P,!1);for(var Y=0,Z=A.length;Y<Z;Y++){var Q=A[Y],de;Q.nodeType===1&&!/^defs$/i.test(Q.nodeName)&&(de=w(Q,P,!1))&&!(de instanceof ve)&&F.push(de)}return D.addChildren(F),z&&(D=x(D.reduce(),p,I)),V._currentStyle=O,(z||N)&&(D.remove(),D=null),D}function c(p,C){for(var P=p.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),I=[],A=0,z=P.length;A<z;A+=2)I.push(new L(parseFloat(P[A]),parseFloat(P[A+1])));var N=new fe(I);return C==="polygon"&&N.closePath(),N}function f(p){return Ce.create(p.getAttribute("d"))}function g(p,C){var P=(i(p,"href",!0)||"").substring(1),I=C==="radialgradient",A;if(P)A=e[P].getGradient(),A._radial^I&&(A=A.clone(),A._radial=I);else{for(var z=p.childNodes,N=[],D=0,V=z.length;D<V;D++){var O=z[D];O.nodeType===1&&N.push(x(new xt,O))}A=new Ue(N,I)}var F,U,Y,Z=i(p,"gradientUnits",!0)!=="userSpaceOnUse";I?(F=r(p,"cx","cy",!1,Z,"50%","50%"),U=F.add(i(p,"r",!1,!1,Z,"50%"),0),Y=r(p,"fx","fy",!0,Z)):(F=r(p,"x1","y1",!1,Z,"0%","0%"),U=r(p,"x2","y2",!1,Z,"100%","0%"));var Q=x(new Ae(A,F,U,Y),p);return Q._scaleToBounds=Z,null}var v={"#document":function(p,C,P,I){for(var A=p.childNodes,z=0,N=A.length;z<N;z++){var D=A[z];if(D.nodeType===1)return w(D,P,I)}},g:h,svg:h,clippath:h,polygon:c,polyline:c,path:f,lineargradient:g,radialgradient:g,image:function(p){var C=new Ne(i(p,"href",!0));return C.on("load",function(){var P=a(p);this.setSize(P);var I=r(p).add(P.divide(2));this._matrix.append(new re().translate(I))}),C},symbol:function(p,C,P,I){return new ve(h(p,C,P,I),!0)},defs:h,use:function(p){var C=(i(p,"href",!0)||"").substring(1),P=e[C],I=r(p);return P?P instanceof ve?P.place(I):P.clone().translate(I):null},circle:function(p){return new xe.Circle(r(p,"cx","cy"),i(p,"r"))},ellipse:function(p){return new xe.Ellipse({center:r(p,"cx","cy"),radius:a(p,"rx","ry")})},rect:function(p){return new xe.Rectangle(new X(r(p),a(p)),a(p,"rx","ry"))},line:function(p){return new fe.Line(r(p,"x1","y1"),r(p,"x2","y2"))},text:function(p){var C=new $e(r(p).add(r(p,"dx","dy")));return C.setContent(p.textContent.trim()||""),C},switch:h};function b(p,C,P,I){if(p.transform){for(var A=(I.getAttribute(P)||"").split(/\)\s*/g),z=new re,N=0,D=A.length;N<D;N++){var V=A[N];if(!V)break;for(var O=V.split(/\(\s*/),F=O[0],U=O[1].split(/[\s,]+/g),Y=0,Z=U.length;Y<Z;Y++)U[Y]=parseFloat(U[Y]);switch(F){case"matrix":z.append(new re(U[0],U[1],U[2],U[3],U[4],U[5]));break;case"rotate":z.rotate(U[0],U[1]||0,U[2]||0);break;case"translate":z.translate(U[0],U[1]||0);break;case"scale":z.scale(U);break;case"skewX":z.skew(U[0],0);break;case"skewY":z.skew(0,U[0]);break}}p.transform(z)}}function _(p,C,P){var I=P==="fill-opacity"?"getFillColor":"getStrokeColor",A=p[I]&&p[I]();A&&A.setAlpha(parseFloat(C))}var m=d.set(d.each(pn,function(p){this[p.attribute]=function(C,P){if(C[p.set]&&(C[p.set](o(P,p.type,p.fromSVG)),p.type==="color")){var I=C[p.get]();if(I&&I._scaleToBounds){var A=C.getBounds();I.transform(new re().translate(A.getPoint()).scale(A.getSize()))}}}},{}),{id:function(p,C){e[C]=p,p.setName&&p.setName(C)},"clip-path":function(p,C){var P=E(C);if(P)if(P=P.clone(),P.setClipMask(!0),p instanceof _e)p.insertChild(0,P);else return new _e(P,p)},gradientTransform:b,transform:b,"fill-opacity":_,"stroke-opacity":_,visibility:function(p,C){p.setVisible&&p.setVisible(C==="visible")},display:function(p,C){p.setVisible&&p.setVisible(C!==null)},"stop-color":function(p,C){p.setColor&&p.setColor(C)},"stop-opacity":function(p,C){p._color&&p._color.setAlpha(parseFloat(C))},offset:function(p,C){if(p.setOffset){var P=C.match(/(.*)%$/);p.setOffset(P?P[1]/100:parseFloat(C))}},viewBox:function(p,C,P,I,A){var z=new X(o(C,"array")),N=a(I,null,null,!0),D,V;if(p instanceof _e){var O=N?N.divide(z.getSize()):1,V=new re().scale(O).translate(z.getPoint().negate());D=p}else p instanceof ve&&(N&&z.setSize(N),D=p._item);if(D){if(T(I,"overflow",A)!=="visible"){var F=new xe.Rectangle(z);F.setClipMask(!0),D.addChild(F)}V&&D.transform(V)}}});function T(p,C,P){var I=p.attributes[C],A=I&&I.value;if(!A&&p.style){var z=d.camelize(C);A=p.style[z],!A&&P.node[z]!==P.parent[z]&&(A=P.node[z])}return A?A==="none"?null:A:s}function x(p,C,P){var I=C.parentNode,A={node:at.getStyles(C)||{},parent:!P&&!/^defs$/i.test(I.tagName)&&at.getStyles(I)||{}};return d.each(m,function(z,N){var D=T(C,N,A);p=D!==s&&z(p,D,N,C,A)||p}),p}function E(p){var C=p&&p.match(/\((?:["'#]*)([^"')]+)/),P=C&&C[1],I=P&&e[u?P.replace(u.location.href.split("#")[0]+"#",""):P];return I&&I._scaleToBounds&&(I=I.clone(),I._scaleToBounds=!0),I}function w(p,C,P){var I=p.nodeName.toLowerCase(),A=I!=="#document",z=y.body,N,D,V;P&&A&&(t=Ye.getView().getSize(),t=a(p,null,null,!0)||t,N=ft.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),D=p.parentNode,V=p.nextSibling,N.appendChild(p),z.appendChild(N));var O=Ye.settings,F=O.applyMatrix,U=O.insertItems;O.applyMatrix=!1,O.insertItems=!1;var Y=v[I],Z=Y&&Y(p,I,C,P)||null;if(O.insertItems=U,O.applyMatrix=F,Z){A&&!(Z instanceof _e)&&(Z=x(Z,p,P));var Q=C.onImport,de=A&&p.getAttribute("data-paper-data");Q&&(Z=Q(p,Z,C)||Z),C.expandShapes&&Z instanceof xe&&(Z.remove(),Z=Z.toPath()),de&&(Z._data=JSON.parse(de))}return N&&(z.removeChild(N),D&&(V?D.insertBefore(p,V):D.appendChild(p))),P&&(e={},Z&&d.pick(C.applyMatrix,F)&&Z.matrix.apply(!0,!0)),Z}function k(p,C,P){if(!p)return null;C=typeof C=="function"?{onLoad:C}:C||{};var I=Ye,A=null;function z(O){try{var F=typeof O=="object"?O:new l.DOMParser().parseFromString(O.trim(),"image/svg+xml");if(!F.nodeName)throw F=null,new Error("Unsupported SVG source: "+p);Ye=I,A=w(F,C,!0),(!C||C.insert!==!1)&&P._insertItem(s,A);var U=C.onLoad;U&&U(A,O)}catch(Y){N(Y)}}function N(O,F){var U=C.onError;if(U)U(O,F);else throw new Error(O)}if(typeof p=="string"&&!/^[\s\S]*</.test(p)){var D=y.getElementById(p);D?z(D):gn.request({url:p,async:!0,onLoad:z,onError:N})}else if(typeof File!="undefined"&&p instanceof File){var V=new FileReader;return V.onload=function(){z(V.result)},V.onerror=function(){N(V.error)},V.readAsText(p)}else z(p);return A}ce.inject({importSVG:function(p,C){return k(p,C,this)}}),Le.inject({importSVG:function(p,C){return this.activate(),k(p,C,this)}})},d.exports.PaperScript=function(){var e=this,t=e.acorn;if(!t&&typeof fl!="undefined")try{t=require("acorn")}catch(x){}if(!t){var i,r;t=i=r={},function(x,E){if(typeof i=="object"&&typeof r=="object")return E(i);if(typeof s=="function"&&s.amd)return s(["exports"],E);E(x.acorn||(x.acorn={}))}(this,function(x){x.version="0.5.0";var E,w,k,p;x.parse=function(B,W){return w=String(B),k=w.length,P(W),$s(),nl(E.program)};var C=x.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function P(B){E=B||{};for(var W in C)Object.prototype.hasOwnProperty.call(E,W)||(E[W]=C[W]);p=E.sourceFile||null}var I=x.getLineInfo=function(B,W){for(var ie=1,ue=0;;){Gi.lastIndex=ue;var Be=Gi.exec(B);if(Be&&Be.index<W)++ie,ue=Be.index+Be[0].length;else break}return{line:ie,column:W-ue}};x.tokenize=function(B,W){w=String(B),k=w.length,P(W),$s();var ie={};function ue(Be){return de=N,Oi(Be),ie.start=z,ie.end=N,ie.startLoc=D,ie.endLoc=V,ie.type=O,ie.value=F,ie}return ue.jumpTo=function(Be,Ve){if(A=Be,E.locations){Y=1,Z=Gi.lastIndex=0;for(var We;(We=Gi.exec(w))&&We.index<Be;)++Y,Z=We.index+We[0].length}U=Ve,Yi()},ue};var A,z,N,D,V,O,F,U,Y,Z,Q,de,pe,ye,Te,se;function le(B,W){var ie=I(w,B);W+=" ("+ie.line+":"+ie.column+")";var ue=new SyntaxError(W);throw ue.pos=B,ue.loc=ie,ue.raisedAt=A,ue}var be=[],Ie={type:"num"},Pe={type:"regexp"},De={type:"string"},Re={type:"name"},je={type:"eof"},Ge={keyword:"break"},He={keyword:"case",beforeExpr:!0},St={keyword:"catch"},kt={keyword:"continue"},Lt={keyword:"debugger"},yt={keyword:"default"},lt={keyword:"do",isLoop:!0},bt={keyword:"else",beforeExpr:!0},Bt={keyword:"finally"},Tt={keyword:"for",isLoop:!0},$t={keyword:"function"},vi={keyword:"if"},Yt={keyword:"return",beforeExpr:!0},Zt={keyword:"switch"},Ft={keyword:"throw",beforeExpr:!0},Ut={keyword:"try"},yi={keyword:"var"},Kt={keyword:"while",isLoop:!0},Hn={keyword:"with"},zs={keyword:"new",beforeExpr:!0},Os={keyword:"this"},Ns={keyword:"null",atomValue:null},Rs={keyword:"true",atomValue:!0},Ds={keyword:"false",atomValue:!1},Un={keyword:"in",binop:7,beforeExpr:!0},Ir={break:Ge,case:He,catch:St,continue:kt,debugger:Lt,default:yt,do:lt,else:bt,finally:Bt,for:Tt,function:$t,if:vi,return:Yt,switch:Zt,throw:Ft,try:Ut,var:yi,while:Kt,with:Hn,null:Ns,true:Rs,false:Ds,new:zs,in:Un,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Os,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},jn={type:"[",beforeExpr:!0},Wn={type:"]"},Wi={type:"{",beforeExpr:!0},Li={type:"}"},ni={type:"(",beforeExpr:!0},Xt={type:")"},ci={type:",",beforeExpr:!0},ri={type:";",beforeExpr:!0},$i={type:":",beforeExpr:!0},Lr={type:"."},Mr={type:"?",beforeExpr:!0},zr={binop:10,beforeExpr:!0},Or={isAssign:!0,beforeExpr:!0},Mi={isAssign:!0,beforeExpr:!0},Io={postfix:!0,prefix:!0,isUpdate:!0},Bs={prefix:!0,beforeExpr:!0},Fs={binop:1,beforeExpr:!0},Vs={binop:2,beforeExpr:!0},Lo={binop:3,beforeExpr:!0},Mo={binop:4,beforeExpr:!0},zo={binop:5,beforeExpr:!0},Oo={binop:6,beforeExpr:!0},No={binop:7,beforeExpr:!0},Ro={binop:8,beforeExpr:!0},Do={binop:9,prefix:!0,beforeExpr:!0},Bo={binop:10,beforeExpr:!0};x.tokTypes={bracketL:jn,bracketR:Wn,braceL:Wi,braceR:Li,parenL:ni,parenR:Xt,comma:ci,semi:ri,colon:$i,dot:Lr,question:Mr,slash:zr,eq:Or,name:Re,eof:je,num:Ie,regexp:Pe,string:De};for(var qs in Ir)x.tokTypes["_"+qs]=Ir[qs];function mn(B){B=B.split(" ");var W="",ie=[];e:for(var ue=0;ue<B.length;++ue){for(var Be=0;Be<ie.length;++Be)if(ie[Be][0].length==B[ue].length){ie[Be].push(B[ue]);continue e}ie.push([B[ue]])}function Ve(ot){if(ot.length==1)return W+="return str === "+JSON.stringify(ot[0])+";";W+="switch(str){";for(var Qt=0;Qt<ot.length;++Qt)W+="case "+JSON.stringify(ot[Qt])+":";W+="return true}return false;"}if(ie.length>3){ie.sort(function(ot,Qt){return Qt.length-ot.length}),W+="switch(str.length){";for(var ue=0;ue<ie.length;++ue){var We=ie[ue];W+="case "+We[0].length+":",Ve(We)}W+="}"}else Ve(B);return new Function("str",W)}var Fo=mn("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Vo=mn("class enum extends super const export import"),Hs=mn("implements interface let package private protected public static yield"),$n=mn("eval arguments"),qo=mn("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ho=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Us="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Uo="\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u0620-\u0649\u0672-\u06D3\u06E7-\u06E8\u06FB-\u06FC\u0730-\u074A\u0800-\u0814\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0840-\u0857\u08E4-\u08FE\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09D7\u09DF-\u09E0\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B60\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2-\u0CE3\u0CE6-\u0CEF\u0D02\u0D03\u0D46-\u0D48\u0D57\u0D62-\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E34-\u0E3A\u0E40-\u0E45\u0E50-\u0E59\u0EB4-\u0EB9\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F41-\u0F47\u0F71-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1029\u1040-\u1049\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u170E-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17B2\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1920-\u192B\u1930-\u193B\u1951-\u196D\u19B0-\u19C0\u19C8-\u19C9\u19D0-\u19D9\u1A00-\u1A15\u1A20-\u1A53\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1B46-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C00-\u1C22\u1C40-\u1C49\u1C5B-\u1C7D\u1CD0-\u1CD2\u1D00-\u1DBE\u1E01-\u1F15\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2D81-\u2D96\u2DE0-\u2DFF\u3021-\u3028\u3099\u309A\uA640-\uA66D\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA7F8-\uA800\uA806\uA80B\uA823-\uA827\uA880-\uA881\uA8B4-\uA8C4\uA8D0-\uA8D9\uA8F3-\uA8F7\uA900-\uA909\uA926-\uA92D\uA930-\uA945\uA980-\uA983\uA9B3-\uA9C0\uAA00-\uAA27\uAA40-\uAA41\uAA4C-\uAA4D\uAA50-\uAA59\uAA7B\uAAE0-\uAAE9\uAAF2-\uAAF3\uABC0-\uABE1\uABEC\uABED\uABF0-\uABF9\uFB20-\uFB28\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",js=new RegExp("["+Us+"]"),jo=new RegExp("["+Us+Uo+"]"),Gn=/[\n\r\u2028\u2029]/,Gi=/\r\n|[\n\r\u2028\u2029]/g,Yn=x.isIdentifierStart=function(B){return B<65?B===36:B<91?!0:B<97?B===95:B<123?!0:B>=170&&js.test(String.fromCharCode(B))},Ws=x.isIdentifierChar=function(B){return B<48?B===36:B<58?!0:B<65?!1:B<91?!0:B<97?B===95:B<123?!0:B>=170&&jo.test(String.fromCharCode(B))};function zi(){this.line=Y,this.column=A-Z}function $s(){Y=1,A=Z=0,U=!0,Yi()}function At(B,W){N=A,E.locations&&(V=new zi),O=B,Yi(),F=W,U=B.beforeExpr}function Wo(){var B=E.onComment&&E.locations&&new zi,W=A,ie=w.indexOf("*/",A+=2);if(ie===-1&&le(A-2,"Unterminated comment"),A=ie+2,E.locations){Gi.lastIndex=W;for(var ue;(ue=Gi.exec(w))&&ue.index<A;)++Y,Z=ue.index+ue[0].length}E.onComment&&E.onComment(!0,w.slice(W+2,ie),W,A,B,E.locations&&new zi)}function Nr(){for(var B=A,W=E.onComment&&E.locations&&new zi,ie=w.charCodeAt(A+=2);A<k&&ie!==10&&ie!==13&&ie!==8232&&ie!==8233;)++A,ie=w.charCodeAt(A);E.onComment&&E.onComment(!1,w.slice(B+2,A),B,A,W,E.locations&&new zi)}function Yi(){for(;A<k;){var B=w.charCodeAt(A);if(B===32)++A;else if(B===13){++A;var W=w.charCodeAt(A);W===10&&++A,E.locations&&(++Y,Z=A)}else if(B===10||B===8232||B===8233)++A,E.locations&&(++Y,Z=A);else if(B>8&&B<14)++A;else if(B===47){var W=w.charCodeAt(A+1);if(W===42)Wo();else if(W===47)Nr();else break}else if(B===160)++A;else if(B>=5760&&Ho.test(String.fromCharCode(B)))++A;else break}}function $o(){var B=w.charCodeAt(A+1);return B>=48&&B<=57?Ys(!0):(++A,At(Lr))}function Go(){var B=w.charCodeAt(A+1);return U?(++A,Gs()):B===61?Pt(Mi,2):Pt(zr,1)}function Yo(){var B=w.charCodeAt(A+1);return B===61?Pt(Mi,2):Pt(Bo,1)}function Zo(B){var W=w.charCodeAt(A+1);return W===B?Pt(B===124?Fs:Vs,2):W===61?Pt(Mi,2):Pt(B===124?Lo:zo,1)}function Ko(){var B=w.charCodeAt(A+1);return B===61?Pt(Mi,2):Pt(Mo,1)}function Xo(B){var W=w.charCodeAt(A+1);return W===B?W==45&&w.charCodeAt(A+2)==62&&Gn.test(w.slice(de,A))?(A+=3,Nr(),Yi(),Oi()):Pt(Io,2):W===61?Pt(Mi,2):Pt(Do,1)}function Jo(B){var W=w.charCodeAt(A+1),ie=1;return W===B?(ie=B===62&&w.charCodeAt(A+2)===62?3:2,w.charCodeAt(A+ie)===61?Pt(Mi,ie+1):Pt(Ro,ie)):W==33&&B==60&&w.charCodeAt(A+2)==45&&w.charCodeAt(A+3)==45?(A+=4,Nr(),Yi(),Oi()):(W===61&&(ie=w.charCodeAt(A+2)===61?3:2),Pt(No,ie))}function Qo(B){var W=w.charCodeAt(A+1);return W===61?Pt(Oo,w.charCodeAt(A+2)===61?3:2):Pt(B===61?Or:Bs,1)}function el(B){switch(B){case 46:return $o();case 40:return++A,At(ni);case 41:return++A,At(Xt);case 59:return++A,At(ri);case 44:return++A,At(ci);case 91:return++A,At(jn);case 93:return++A,At(Wn);case 123:return++A,At(Wi);case 125:return++A,At(Li);case 58:return++A,At($i);case 63:return++A,At(Mr);case 48:var W=w.charCodeAt(A+1);if(W===120||W===88)return tl();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ys(!1);case 34:case 39:return il(B);case 47:return Go();case 37:case 42:return Yo();case 124:case 38:return Zo(B);case 94:return Ko();case 43:case 45:return Xo(B);case 60:case 62:return Jo(B);case 61:case 33:return Qo(B);case 126:return Pt(Bs,1)}return!1}function Oi(B){if(B?A=z+1:z=A,E.locations&&(D=new zi),B)return Gs();if(A>=k)return At(je);var W=w.charCodeAt(A);if(Yn(W)||W===92)return Ks();var ie=el(W);if(ie===!1){var ue=String.fromCharCode(W);if(ue==="\\"||js.test(ue))return Ks();le(A,"Unexpected character '"+ue+"'")}return ie}function Pt(B,W){var ie=w.slice(A,A+W);A+=W,At(B,ie)}function Gs(){for(var Be="",B,W,ie=A;;){A>=k&&le(ie,"Unterminated regular expression");var ue=w.charAt(A);if(Gn.test(ue)&&le(ie,"Unterminated regular expression"),B)B=!1;else{if(ue==="[")W=!0;else if(ue==="]"&&W)W=!1;else if(ue==="/"&&!W)break;B=ue==="\\"}++A}var Be=w.slice(ie,A);++A;var Ve=Zs();Ve&&!/^[gmsiy]*$/.test(Ve)&&le(ie,"Invalid regexp flag");try{var We=new RegExp(Be,Ve)}catch(ot){ot instanceof SyntaxError&&le(ie,ot.message),le(ot)}return At(Pe,We)}function _n(B,W){for(var ie=A,ue=0,Be=0,Ve=W==null?1/0:W;Be<Ve;++Be){var We=w.charCodeAt(A),ot;if(We>=97?ot=We-97+10:We>=65?ot=We-65+10:We>=48&&We<=57?ot=We-48:ot=1/0,ot>=B)break;++A,ue=ue*B+ot}return A===ie||W!=null&&A-ie!==W?null:ue}function tl(){A+=2;var B=_n(16);return B==null&&le(z+2,"Expected hexadecimal number"),Yn(w.charCodeAt(A))&&le(A,"Identifier directly after number"),At(Ie,B)}function Ys(B){var W=A,ie=!1,ue=w.charCodeAt(A)===48;!B&&_n(10)===null&&le(W,"Invalid number"),w.charCodeAt(A)===46&&(++A,_n(10),ie=!0);var Be=w.charCodeAt(A);(Be===69||Be===101)&&(Be=w.charCodeAt(++A),(Be===43||Be===45)&&++A,_n(10)===null&&le(W,"Invalid number"),ie=!0),Yn(w.charCodeAt(A))&&le(A,"Identifier directly after number");var Ve=w.slice(W,A),We;return ie?We=parseFloat(Ve):!ue||Ve.length===1?We=parseInt(Ve,10):/[89]/.test(Ve)||se?le(W,"Invalid number"):We=parseInt(Ve,8),At(Ie,We)}function il(B){A++;for(var W="";;){A>=k&&le(z,"Unterminated string constant");var ie=w.charCodeAt(A);if(ie===B)return++A,At(De,W);if(ie===92){ie=w.charCodeAt(++A);var ue=/^[0-7]+/.exec(w.slice(A,A+3));for(ue&&(ue=ue[0]);ue&&parseInt(ue,8)>255;)ue=ue.slice(0,-1);if(ue==="0"&&(ue=null),++A,ue)se&&le(A-2,"Octal literal in strict mode"),W+=String.fromCharCode(parseInt(ue,8)),A+=ue.length-1;else switch(ie){case 110:W+=`
`;break;case 114:W+="\r";break;case 120:W+=String.fromCharCode(Zn(2));break;case 117:W+=String.fromCharCode(Zn(4));break;case 85:W+=String.fromCharCode(Zn(8));break;case 116:W+="	";break;case 98:W+="\b";break;case 118:W+="\v";break;case 102:W+="\f";break;case 48:W+="\0";break;case 13:w.charCodeAt(A)===10&&++A;case 10:E.locations&&(Z=A,++Y);break;default:W+=String.fromCharCode(ie);break}}else(ie===13||ie===10||ie===8232||ie===8233)&&le(z,"Unterminated string constant"),W+=String.fromCharCode(ie),++A}}function Zn(B){var W=_n(16,B);return W===null&&le(z,"Bad character escape sequence"),W}var Zi;function Zs(){Zi=!1;for(var B,W=!0,ie=A;;){var ue=w.charCodeAt(A);if(Ws(ue))Zi&&(B+=w.charAt(A)),++A;else if(ue===92){Zi||(B=w.slice(ie,A)),Zi=!0,w.charCodeAt(++A)!=117&&le(A,"Expecting Unicode escape sequence \\uXXXX"),++A;var Be=Zn(4),Ve=String.fromCharCode(Be);Ve||le(A-1,"Invalid Unicode escape"),(W?Yn(Be):Ws(Be))||le(A-4,"Invalid Unicode escape"),B+=Ve}else break;W=!1}return Zi?B:w.slice(ie,A)}function Ks(){var B=Zs(),W=Re;return!Zi&&qo(B)&&(W=Ir[B]),At(W,B)}function it(){Q=z,de=N,pe=V,Oi()}function Rr(B){if(se=B,A=z,E.locations)for(;A<Z;)Z=w.lastIndexOf(`
`,Z-2)+1,--Y;Yi(),Oi()}function Xs(){this.type=null,this.start=z,this.end=null}function Js(){this.start=D,this.end=null,p!==null&&(this.source=p)}function Mt(){var B=new Xs;return E.locations&&(B.loc=new Js),E.directSourceFile&&(B.sourceFile=E.directSourceFile),E.ranges&&(B.range=[z,0]),B}function bi(B){var W=new Xs;return W.start=B.start,E.locations&&(W.loc=new Js,W.loc.start=B.loc.start),E.ranges&&(W.range=[B.range[0],0]),W}function Ke(B,W){return B.type=W,B.end=de,E.locations&&(B.loc.end=pe),E.ranges&&(B.range[1]=de),B}function Dr(B){return E.ecmaVersion>=5&&B.type==="ExpressionStatement"&&B.expression.type==="Literal"&&B.expression.value==="use strict"}function gt(B){if(O===B)return it(),!0}function Kn(){return!E.strictSemicolons&&(O===je||O===Li||Gn.test(w.slice(de,z)))}function Ni(){!gt(ri)&&!Kn()&&hi()}function Ct(B){O===B?it():hi()}function hi(){le(z,"Unexpected token")}function Xn(B){B.type!=="Identifier"&&B.type!=="MemberExpression"&&le(B.start,"Assigning to rvalue"),se&&B.type==="Identifier"&&$n(B.name)&&le(B.start,"Assigning to "+B.name+" in strict mode")}function nl(B){Q=de=A,E.locations&&(pe=new zi),ye=se=null,Te=[],Oi();var W=B||Mt(),ie=!0;for(B||(W.body=[]);O!==je;){var ue=Jt();W.body.push(ue),ie&&Dr(ue)&&Rr(!0),ie=!1}return Ke(W,"Program")}var Br={kind:"loop"},rl={kind:"switch"};function Jt(){(O===zr||O===Mi&&F=="/=")&&Oi(!0);var B=O,W=Mt();switch(B){case Ge:case kt:it();var ie=B===Ge;gt(ri)||Kn()?W.label=null:O!==Re?hi():(W.label=wi(),Ni());for(var ue=0;ue<Te.length;++ue){var Be=Te[ue];if((W.label==null||Be.name===W.label.name)&&(Be.kind!=null&&(ie||Be.kind==="loop")||W.label&&ie))break}return ue===Te.length&&le(W.start,"Unsyntactic "+B.keyword),Ke(W,ie?"BreakStatement":"ContinueStatement");case Lt:return it(),Ni(),Ke(W,"DebuggerStatement");case lt:return it(),Te.push(Br),W.body=Jt(),Te.pop(),Ct(Kt),W.test=vn(),Ni(),Ke(W,"DoWhileStatement");case Tt:if(it(),Te.push(Br),Ct(ni),O===ri)return Fr(W,null);if(O===yi){var Ve=Mt();return it(),ea(Ve,!0),Ke(Ve,"VariableDeclaration"),Ve.declarations.length===1&&gt(Un)?Qs(W,Ve):Fr(W,Ve)}var Ve=Nt(!1,!0);return gt(Un)?(Xn(Ve),Qs(W,Ve)):Fr(W,Ve);case $t:return it(),jr(W,!0);case vi:return it(),W.test=vn(),W.consequent=Jt(),W.alternate=gt(bt)?Jt():null,Ke(W,"IfStatement");case Yt:return!ye&&!E.allowReturnOutsideFunction&&le(z,"'return' outside of function"),it(),gt(ri)||Kn()?W.argument=null:(W.argument=Nt(),Ni()),Ke(W,"ReturnStatement");case Zt:it(),W.discriminant=vn(),W.cases=[],Ct(Wi),Te.push(rl);for(var We,ot;O!=Li;)if(O===He||O===yt){var Qt=O===He;We&&Ke(We,"SwitchCase"),W.cases.push(We=Mt()),We.consequent=[],it(),Qt?We.test=Nt():(ot&&le(Q,"Multiple default clauses"),ot=!0,We.test=null),Ct($i)}else We||hi(),We.consequent.push(Jt());return We&&Ke(We,"SwitchCase"),it(),Te.pop(),Ke(W,"SwitchStatement");case Ft:return it(),Gn.test(w.slice(de,z))&&le(de,"Illegal newline after throw"),W.argument=Nt(),Ni(),Ke(W,"ThrowStatement");case Ut:if(it(),W.block=yn(),W.handler=null,O===St){var Ri=Mt();it(),Ct(ni),Ri.param=wi(),se&&$n(Ri.param.name)&&le(Ri.param.start,"Binding "+Ri.param.name+" in strict mode"),Ct(Xt),Ri.guard=null,Ri.body=yn(),W.handler=Ke(Ri,"CatchClause")}return W.guardedHandlers=be,W.finalizer=gt(Bt)?yn():null,!W.handler&&!W.finalizer&&le(W.start,"Missing catch or finally clause"),Ke(W,"TryStatement");case yi:return it(),ea(W),Ni(),Ke(W,"VariableDeclaration");case Kt:return it(),W.test=vn(),Te.push(Br),W.body=Jt(),Te.pop(),Ke(W,"WhileStatement");case Hn:return se&&le(z,"'with' in strict mode"),it(),W.object=vn(),W.body=Jt(),Ke(W,"WithStatement");case Wi:return yn();case ri:return it(),Ke(W,"EmptyStatement");default:var $r=F,Jn=Nt();if(B===Re&&Jn.type==="Identifier"&&gt($i)){for(var ue=0;ue<Te.length;++ue)Te[ue].name===$r&&le(Jn.start,"Label '"+$r+"' is already declared");var cl=O.isLoop?"loop":O===Zt?"switch":null;return Te.push({name:$r,kind:cl}),W.body=Jt(),Te.pop(),W.label=Jn,Ke(W,"LabeledStatement")}else return W.expression=Jn,Ni(),Ke(W,"ExpressionStatement")}}function vn(){Ct(ni);var B=Nt();return Ct(Xt),B}function yn(B){var W=Mt(),ie=!0,ue=!1,Be;for(W.body=[],Ct(Wi);!gt(Li);){var Ve=Jt();W.body.push(Ve),ie&&B&&Dr(Ve)&&(Be=ue,Rr(ue=!0)),ie=!1}return ue&&!Be&&Rr(!1),Ke(W,"BlockStatement")}function Fr(B,W){return B.init=W,Ct(ri),B.test=O===ri?null:Nt(),Ct(ri),B.update=O===Xt?null:Nt(),Ct(Xt),B.body=Jt(),Te.pop(),Ke(B,"ForStatement")}function Qs(B,W){return B.left=W,B.right=Nt(),Ct(Xt),B.body=Jt(),Te.pop(),Ke(B,"ForInStatement")}function ea(B,W){for(B.declarations=[],B.kind="var";;){var ie=Mt();if(ie.id=wi(),se&&$n(ie.id.name)&&le(ie.id.start,"Binding "+ie.id.name+" in strict mode"),ie.init=gt(Or)?Nt(!0,W):null,B.declarations.push(Ke(ie,"VariableDeclarator")),!gt(ci))break}return B}function Nt(B,W){var ie=Vr(W);if(!B&&O===ci){var ue=bi(ie);for(ue.expressions=[ie];gt(ci);)ue.expressions.push(Vr(W));return Ke(ue,"SequenceExpression")}return ie}function Vr(B){var W=sl(B);if(O.isAssign){var ie=bi(W);return ie.operator=F,ie.left=W,it(),ie.right=Vr(B),Xn(W),Ke(ie,"AssignmentExpression")}return W}function sl(B){var W=al(B);if(gt(Mr)){var ie=bi(W);return ie.test=W,ie.consequent=Nt(!0),Ct($i),ie.alternate=Nt(!0,B),Ke(ie,"ConditionalExpression")}return W}function al(B){return qr(Hr(),-1,B)}function qr(B,W,ie){var ue=O.binop;if(ue!=null&&(!ie||O!==Un)&&ue>W){var Be=bi(B);Be.left=B,Be.operator=F;var Ve=O;it(),Be.right=qr(Hr(),ue,ie);var We=Ke(Be,Ve===Fs||Ve===Vs?"LogicalExpression":"BinaryExpression");return qr(We,W,ie)}return B}function Hr(){if(O.prefix){var B=Mt(),W=O.isUpdate;return B.operator=F,B.prefix=!0,U=!0,it(),B.argument=Hr(),W?Xn(B.argument):se&&B.operator==="delete"&&B.argument.type==="Identifier"&&le(B.start,"Deleting local variable in strict mode"),Ke(B,W?"UpdateExpression":"UnaryExpression")}for(var ie=ol();O.postfix&&!Kn();){var B=bi(ie);B.operator=F,B.prefix=!1,B.argument=ie,Xn(ie),it(),ie=Ke(B,"UpdateExpression")}return ie}function ol(){return bn(Ur())}function bn(B,W){if(gt(Lr)){var ie=bi(B);return ie.object=B,ie.property=wi(!0),ie.computed=!1,bn(Ke(ie,"MemberExpression"),W)}else if(gt(jn)){var ie=bi(B);return ie.object=B,ie.property=Nt(),ie.computed=!0,Ct(Wn),bn(Ke(ie,"MemberExpression"),W)}else if(!W&&gt(ni)){var ie=bi(B);return ie.callee=B,ie.arguments=Wr(Xt,!1),bn(Ke(ie,"CallExpression"),W)}else return B}function Ur(){switch(O){case Os:var ue=Mt();return it(),Ke(ue,"ThisExpression");case Re:return wi();case Ie:case De:case Pe:var ue=Mt();return ue.value=F,ue.raw=w.slice(z,N),it(),Ke(ue,"Literal");case Ns:case Rs:case Ds:var ue=Mt();return ue.value=O.atomValue,ue.raw=O.keyword,it(),Ke(ue,"Literal");case ni:var B=D,W=z;it();var ie=Nt();return ie.start=W,ie.end=N,E.locations&&(ie.loc.start=B,ie.loc.end=V),E.ranges&&(ie.range=[W,N]),Ct(Xt),ie;case jn:var ue=Mt();return it(),ue.elements=Wr(Wn,!0,!0),Ke(ue,"ArrayExpression");case Wi:return ul();case $t:var ue=Mt();return it(),jr(ue,!1);case zs:return ll();default:hi()}}function ll(){var B=Mt();return it(),B.callee=bn(Ur(),!0),gt(ni)?B.arguments=Wr(Xt,!1):B.arguments=be,Ke(B,"NewExpression")}function ul(){var B=Mt(),W=!0,ie=!1;for(B.properties=[],it();!gt(Li);){if(W)W=!1;else if(Ct(ci),E.allowTrailingCommas&&gt(Li))break;var ue={key:ta()},Be=!1,Ve;if(gt($i)?(ue.value=Nt(!0),Ve=ue.kind="init"):E.ecmaVersion>=5&&ue.key.type==="Identifier"&&(ue.key.name==="get"||ue.key.name==="set")?(Be=ie=!0,Ve=ue.kind=ue.key.name,ue.key=ta(),O!==ni&&hi(),ue.value=jr(Mt(),!1)):hi(),ue.key.type==="Identifier"&&(se||ie))for(var We=0;We<B.properties.length;++We){var ot=B.properties[We];if(ot.key.name===ue.key.name){var Qt=Ve==ot.kind||Be&&ot.kind==="init"||Ve==="init"&&(ot.kind==="get"||ot.kind==="set");Qt&&!se&&Ve==="init"&&ot.kind==="init"&&(Qt=!1),Qt&&le(ue.key.start,"Redefinition of property")}}B.properties.push(ue)}return Ke(B,"ObjectExpression")}function ta(){return O===Ie||O===De?Ur():wi(!0)}function jr(B,W){O===Re?B.id=wi():W?hi():B.id=null,B.params=[];var ie=!0;for(Ct(ni);!gt(Xt);)ie?ie=!1:Ct(ci),B.params.push(wi());var ue=ye,Be=Te;if(ye=!0,Te=[],B.body=yn(!0),ye=ue,Te=Be,se||B.body.body.length&&Dr(B.body.body[0]))for(var Ve=B.id?-1:0;Ve<B.params.length;++Ve){var We=Ve<0?B.id:B.params[Ve];if((Hs(We.name)||$n(We.name))&&le(We.start,"Defining '"+We.name+"' in strict mode"),Ve>=0)for(var ot=0;ot<Ve;++ot)We.name===B.params[ot].name&&le(We.start,"Argument name clash in strict mode")}return Ke(B,W?"FunctionDeclaration":"FunctionExpression")}function Wr(B,W,ie){for(var ue=[],Be=!0;!gt(B);){if(Be)Be=!1;else if(Ct(ci),W&&E.allowTrailingCommas&&gt(B))break;ie&&O===ci?ue.push(null):ue.push(Nt(!0))}return ue}function wi(B){var W=Mt();return B&&E.forbidReserved=="everywhere"&&(B=!1),O===Re?(!B&&(E.forbidReserved&&(E.ecmaVersion===3?Fo:Vo)(F)||se&&Hs(F))&&w.slice(z,N).indexOf("\\")==-1&&le(z,"The keyword '"+F+"' is reserved"),W.name=F):B&&O.keyword?W.name=O.keyword:hi(),U=!1,it(),Ke(W,"Identifier")}}),t.version||(t=null)}function a(x,E){return(e.acorn||t).parse(x,E)}var o={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},c=d.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(x){this["__"+x]="#"+x},{__self:function(){return this}});L.inject(c),H.inject(c),Ae.inject(c);function f(x,E,w){var k=o[E];if(x&&x[k]){var p=x[k](w);return E==="!="?!p:p}switch(E){case"+":return x+w;case"-":return x-w;case"*":return x*w;case"/":return x/w;case"%":return x%w;case"==":return x==w;case"!=":return x!=w}}function g(x,E){var w=h[x];if(E&&E[w])return E[w]();switch(x){case"+":return+E;case"-":return-E}}function v(x,E){if(!x)return"";E=E||{};var w=[];function k(se){for(var le=0,be=w.length;le<be;le++){var Ie=w[le];if(Ie[0]>=se)break;se+=Ie[1]}return se}function p(se){return x.substring(k(se.range[0]),k(se.range[1]))}function C(se,le){return x.substring(k(se.range[1]),k(le.range[0]))}function P(se,le){for(var be=k(se.range[0]),Ie=k(se.range[1]),Pe=0,De=w.length-1;De>=0;De--)if(be>w[De][0]){Pe=De+1;break}w.splice(Pe,0,[be,le.length-Ie+be]),x=x.substring(0,be)+le+x.substring(Ie)}function I(se,le){switch(se.type){case"UnaryExpression":if(se.operator in h&&se.argument.type!=="Literal"){var be=p(se.argument);P(se,'$__("'+se.operator+'", '+be+")")}break;case"BinaryExpression":if(se.operator in o&&se.left.type!=="Literal"){var Ie=p(se.left),Pe=p(se.right),De=C(se.left,se.right),Re=se.operator;P(se,"__$__("+Ie+","+De.replace(new RegExp("\\"+Re),'"'+Re+'"')+", "+Pe+")")}break;case"UpdateExpression":case"AssignmentExpression":var je=le&&le.type;if(!(je==="ForStatement"||je==="BinaryExpression"&&/^[=!<>]/.test(le.operator)||je==="MemberExpression"&&le.computed)){if(se.type==="UpdateExpression"){var be=p(se.argument),Ge="__$__("+be+', "'+se.operator[0]+'", 1)',He=be+" = "+Ge;se.prefix?He="("+He+")":(je==="AssignmentExpression"||je==="VariableDeclarator"||je==="BinaryExpression")&&(p(le.left||le.id)===be&&(He=Ge),He=be+"; "+He),P(se,He)}else if(/^.=$/.test(se.operator)&&se.left.type!=="Literal"){var Ie=p(se.left),Pe=p(se.right),Ge=Ie+" = __$__("+Ie+', "'+se.operator[0]+'", '+Pe+")";P(se,/^\(.*\)$/.test(p(se))?"("+Ge+")":Ge)}}break}}function A(se){switch(se.type){case"ExportDefaultDeclaration":P({range:[se.start,se.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var le=se.declaration,be=se.specifiers;if(le){var Ie=le.declarations;Ie&&(Ie.forEach(function(De){P(De,"module.exports."+p(De))}),P({range:[se.start,le.start+le.kind.length]},""))}else if(be){var Pe=be.map(function(De){var Re=p(De);return"module.exports."+Re+" = "+Re+"; "}).join("");Pe&&P(se,Pe)}break}}function z(se,le,be){if(se){for(var Ie in se)if(Ie!=="range"&&Ie!=="loc"){var Pe=se[Ie];if(Array.isArray(Pe))for(var De=0,Re=Pe.length;De<Re;De++)z(Pe[De],se,be);else Pe&&typeof Pe=="object"&&z(Pe,se,be)}be.operatorOverloading!==!1&&I(se,le),be.moduleExports!==!1&&A(se)}}function N(se){var le="",be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(se=(Math.abs(se)<<1)+(se<0?1:0);se||!le;){var Ie=se&31;se>>=5,se&&(Ie|=32),le+=be[Ie]}return le}var D=E.url||"",V=E.sourceMaps,O=E.paperFeatures||{},F=E.source||x,U=E.offset||0,Y=Ye.agent,Z=Y.versionNumber,Q=!1,de=/\r\n|\n|\r/mg,pe;if(V&&(Y.chrome&&Z>=30||Y.webkit&&Z>=537.76||Y.firefox&&Z>=23||Y.node)){if(Y.node)U-=2;else if(u&&D&&!u.location.href.indexOf(D)){var ye=y.getElementsByTagName("html")[0].innerHTML;U=ye.substr(0,ye.indexOf(x)+1).match(de).length+1}Q=U>0&&!(Y.chrome&&Z>=36||Y.safari&&Z>=600||Y.firefox&&Z>=40||Y.node);var Te=["AA"+N(Q?0:U)+"A"];Te.length=(x.match(de)||[]).length+1+(Q?U:0),pe={version:3,file:D,names:[],mappings:Te.join(";AACA"),sourceRoot:"",sources:[D],sourcesContent:[F]}}return(O.operatorOverloading!==!1||O.moduleExports!==!1)&&z(a(x,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,O),pe&&(Q&&(x=new Array(U+1).join(`
`)+x),/^(inline|both)$/.test(V)&&(x+=`
//# sourceMappingURL=data:application/json;base64,`+l.btoa(unescape(encodeURIComponent(JSON.stringify(pe))))),x+=`
//# sourceURL=`+(D||"paperscript")),{url:D,source:F,code:x,map:pe}}function b(x,E,w){Ye=E;var k=E.getView(),p=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(x)&&!/\bnew\s+Tool\b/.test(x)?new qn:null,C=p?p._events:[],P=["onFrame","onResize"].concat(C),I=[],A=[],z,N=typeof x=="object"?x:v(x,w);x=N.code;function D(Z,Q){for(var de in Z)(Q||!/^_/.test(de))&&new RegExp("([\\b\\s\\W]|^)"+de.replace(/\$/g,"\\$")+"\\b").test(x)&&(I.push(de),A.push(Z[de]))}D({__$__:f,$__:g,paper:E,tool:p},!0),D(E),x="var module = { exports: {} }; "+x;var U=d.each(P,function(Z){new RegExp("\\s+"+Z+"\\b").test(x)&&(I.push(Z),this.push("module.exports."+Z+" = "+Z+";"))},[]).join(`
`);U&&(x+=`
`+U),x+=`
return module.exports;`;var V=Ye.agent;if(y&&(V.chrome||V.firefox&&V.versionNumber<40)){var O=y.createElement("script"),F=y.head||y.getElementsByTagName("head")[0];V.firefox&&(x=`
`+x),O.appendChild(y.createTextNode("document.__paperscript__ = function("+I+") {"+x+`
}`)),F.appendChild(O),z=y.__paperscript__,delete y.__paperscript__,F.removeChild(O)}else z=Function(I,x);var U=z&&z.apply(E,A),Y=U||{};return d.each(C,function(Z){var Q=Y[Z];Q&&(p[Z]=Q)}),k&&(Y.onResize&&k.setOnResize(Y.onResize),k.emit("resize",{size:k.size,delta:new L}),Y.onFrame&&k.setOnFrame(Y.onFrame),k.requestUpdate()),U}function _(x){if(/^text\/(?:x-|)paperscript$/.test(x.type)&&M.getAttribute(x,"ignore")!=="true"){var E=M.getAttribute(x,"canvas"),w=y.getElementById(E),k=x.src||x.getAttribute("data-src"),p=M.hasAttribute(x,"async"),C="data-paper-scope";if(!w)throw new Error('Unable to find canvas with id "'+E+'"');var P=M.get(w.getAttribute(C))||new M().setup(w);return w.setAttribute(C,P._id),k?gn.request({url:k,async:p,mimeType:"text/plain",onLoad:function(I){b(I,P,k)}}):b(x.innerHTML,P,x.baseURI),x.setAttribute("data-paper-ignore","true"),P}}function m(){d.each(y&&y.getElementsByTagName("script"),_)}function T(x){return x?_(x):m()}return u&&(y.readyState==="complete"?setTimeout(m):ht.add(u,{load:m})),{compile:v,execute:b,load:T,parse:a,calculateBinary:f,calculateUnary:g}}.call(this);var Ye=new(M.inject(d.exports,{Base:d,Numerical:K,Key:mt,DomEvent:ht,DomElement:at,document:y,window:u,Symbol:ve,PlacedSymbol:me}));return Ye.agent.node&&Ta(Ye),typeof s=="function"&&s.amd?s("paper",Ye):n&&(n.exports=Ye),Ye}).call(hl,typeof self=="object"?self:null)})(Po);var Je=Po.exports;document.addEventListener("DOMContentLoaded",function(){class n{constructor(){if(n._instance)return n._instance;n._instance=this,this.elements={header:document.getElementById("hw_header"),logo:document.getElementById("hw_logo"),languageSelector:document.getElementById("hodworks_language_selector"),menu:document.getElementById("hodworks_menu"),menuButton:document.getElementById("hodworks_menu_button"),main:document.getElementById("hw_main"),piecesCurrentContainer:document.getElementById("hw_pieces_current_container"),piecesCurrentImageContainer:document.getElementById("hw_pieces_current_image_container"),piecesCurrentTitle:document.getElementById("hw_pieces_current_title"),piecesPastContainer:document.getElementById("hw_pieces_past_container"),piecesPastImageContainer:document.getElementById("hw_pieces_past_image_container"),piecesPastTitle:document.getElementById("hw_pieces_past_title"),companyYearList:document.getElementById("hw_company_list"),calendarYearsList:document.getElementById("hw_calendar_years"),calendarTablesContainer:document.getElementById("hw_calendar_tables"),canvasContainer:document.getElementById("hw_canvas_container"),canvas:document.getElementById("hw_canvas"),singlePieceGalleriesContainer:document.getElementById("hw_single_piece_galleries_container"),singlePieceGallery:document.getElementById("hw_single_piece_gallery"),singlePieceGalleryList:document.getElementById("hw_single_piece_gallery_list"),singlePieceThumbnailGallery:document.getElementById("hw_single_piece_thumbnail_gallery"),singlePieceThumbnailGalleryList:document.getElementById("hw_single_piece_thumbnail_gallery_list"),singlePieceVideosContainer:document.getElementById("hw_single_piece_videos_container"),singlePieceInfoContainer:document.getElementById("hw_background_info_container"),singlePieceSubContents:document.querySelectorAll(".c-piece__sub-content"),singlePieceVideoButton:document.getElementById("hw_single_piece_video_button"),singlePieceGalleryButton:document.getElementById("hw_single_piece_gallery_button"),singlePieceInfoButton:document.getElementById("hw_single_piece_background_info_button"),splashScreenContainer:document.getElementById("hw_splash_screen"),splashScreenVideo:document.getElementById("hw_splash_screen_video"),splashScreenCanvas:document.getElementById("hw_splash_screen_canvas"),hodPageCvButton:document.getElementById("hw_hod_cv_button"),hodPageWorksButton:document.getElementById("hw_hod_works_button"),hodPageContent:document.getElementById("hw_hod_content"),hodPageCv:document.getElementById("hw_hod_cv"),hodPageWorks:document.getElementById("hw_hod_works")},this.sizes={},this.canvasPoints={a:{x:100,y:200},b:{x:200,y:100},c:{x:300,y:200}},this.widgets={hodPageState:{activeScreen:"base"}},this.bindEvents(),this.setSizes(),this.initStuff(),this.initWidgets()}setSizes(){this.elements.logo&&(this.sizes.logo=this.elements.logo.offsetHeight),this.elements.canvas&&(this.sizes.canvas=this.elements.canvas.getBoundingClientRect()),this.elements.header&&(this.sizes.header=this.elements.header.offsetHeight+76,console.log(this.sizes.header))}initStuff(){this.elements.main.style.paddingTop=this.sizes.header+76+"px"}bindEvents(){const u=()=>{document.body.scrollTop>50||document.documentElement.scrollTop>50?this.elements.menu&&this.elements.header&&(this.elements.header.classList.add("c-header--compact"),this.elements.main.style.paddingTop=this.sizes.header+"px"):this.elements.menu&&this.elements.header&&(this.elements.header.classList.remove("c-header--compact"),this.elements.main.style.paddingTop=this.sizes.header+"px")};if(window.onscroll=()=>{u()},this.elements.menuButton&&this.elements.menu&&this.elements.menuButton.addEventListener("click",y=>{y.currentTarget.classList.toggle("is-active"),this.elements.menu.classList.toggle("c-main-navigation--open")}),this.elements.piecesCurrentContainer&&this.elements.piecesCurrentTitle&&(this.elements.piecesCurrentTitle.addEventListener("click",y=>{this.elements.piecesPastTitle.classList.toggle("c-pieces__title-container--hidden")}),this.elements.piecesCurrentContainer.querySelectorAll(".c-pieces__link").forEach(y=>{y.addEventListener("mouseenter",d=>{!d.target.dataset.image||(this.elements.piecesPastImageContainer.classList.add("c-pieces__image-container--visible"),this.elements.piecesPastImageContainer.querySelector("img").src=d.target.dataset.image)}),y.addEventListener("mouseleave",d=>{this.elements.piecesPastImageContainer.classList.remove("c-pieces__image-container--visible"),this.elements.piecesPastImageContainer.querySelector("img").src=null})})),this.elements.piecesPastContainer&&this.elements.piecesPastTitle&&(this.elements.piecesPastTitle.addEventListener("click",y=>{this.elements.piecesCurrentTitle.classList.toggle("c-pieces__title-container--hidden")}),this.elements.piecesPastContainer.querySelectorAll(".c-pieces__link").forEach(y=>{y.addEventListener("mouseenter",d=>{!d.target.dataset.image||(this.elements.piecesCurrentImageContainer.classList.add("c-pieces__image-container--visible"),this.elements.piecesCurrentImageContainer.querySelector("img").src=d.target.dataset.image)}),y.addEventListener("mouseleave",d=>{this.elements.piecesCurrentImageContainer.classList.remove("c-pieces__image-container--visible"),this.elements.piecesCurrentImageContainer.querySelector("img").src=null})})),this.elements.companyYearList&&this.elements.companyYearList.querySelectorAll("h3").forEach(y=>{y.addEventListener("click",d=>{this.elements.companyYearList.querySelectorAll("h3").forEach(S=>{S.classList.remove("c-company__year--active")}),this.elements.companyYearList.querySelectorAll("div").forEach(S=>{S.classList.remove("c-company__year-description--open")}),d.target.nextElementSibling.classList.toggle("c-company__year-description--open"),d.target.classList.toggle("c-company__year--active")})}),this.elements.calendarYearsList){const y=this.elements.calendarYearsList.querySelectorAll("li");y.forEach(d=>{d.addEventListener("click",S=>{y.forEach(M=>{M.classList.remove("c-calendar__year--active")}),this.elements.calendarTablesContainer.querySelectorAll(".c-calendar__table").forEach(M=>{M.classList.remove("c-calendar__table--visible")}),d.classList.add("c-calendar__year--active"),document.getElementById(`hw_calendar_table_${d.dataset.year}`).classList.add("c-calendar__table--visible")})})}if(this.elements.canvas&&this.elements.canvas.addEventListener("mousemove",function(y){handleMouseMove(this.canvasPoints.a,y),handleMouseMove(this.canvasPoints.b,y),handleMouseMove(this.canvasPoints.c,y)}),window.addEventListener("resize",this.initCanvas),this.elements.singlePieceSubContents.length>0){const y=()=>{this.elements.singlePieceSubContents.forEach(d=>{d.classList.remove("c-piece__sub-content--active")})};this.elements.singlePieceGalleriesContainer&&this.elements.singlePieceGalleryButton&&this.elements.singlePieceGalleryButton.addEventListener("click",d=>{console.log(d),y(),this.elements.singlePieceGalleriesContainer.classList.add("c-piece__sub-content--active")}),this.elements.singlePieceVideosContainer&&this.elements.singlePieceVideoButton&&this.elements.singlePieceVideoButton.addEventListener("click",d=>{console.log(d),y(),this.elements.singlePieceVideosContainer.classList.add("c-piece__sub-content--active")}),this.elements.singlePieceInfoContainer&&this.elements.singlePieceInfoButton&&this.elements.singlePieceInfoButton.addEventListener("click",d=>{console.log(d),y(),this.elements.singlePieceInfoContainer.classList.add("c-piece__sub-content--active")})}this.elements.hodPageCvButton&&this.elements.hodPageCv&&this.elements.hodPageContent&&this.elements.hodPageWorks&&(this.elements.hodPageCvButton.addEventListener("click",y=>{this.widgets.hodPageState.activeScreen=="cv"?(y.currentTarget.classList.remove("c-hod__button--active"),this.elements.hodPageContent.classList.add("c-hod__content--active"),this.elements.hodPageCv.classList.remove("c-hod__content--active")):(y.currentTarget.classList.add("c-hod__button--active"),this.elements.hodPageWorksButton.classList.remove("c-hod__button--active"),this.widgets.hodPageState.activeScreen="cv",this.elements.hodPageContent.classList.remove("c-hod__content--active"),this.elements.hodPageWorks.classList.remove("c-hod__content--active"),this.elements.hodPageCv.classList.add("c-hod__content--active"))}),this.elements.hodPageWorksButton.addEventListener("click",y=>{this.widgets.hodPageState.activeScreen=="works"?(y.currentTarget.classList.remove("c-hod__button--active"),this.elements.hodPageContent.classList.add("c-hod__content--active"),this.elements.hodPageWorks.classList.remove("c-hod__content--active")):(y.currentTarget.classList.add("c-hod__button--active"),this.elements.hodPageCvButton.classList.remove("c-hod__button--active"),this.widgets.hodPageState.activeScreen="works",this.elements.hodPageContent.classList.remove("c-hod__content--active"),this.elements.hodPageCv.classList.remove("c-hod__content--active"),this.elements.hodPageWorks.classList.add("c-hod__content--active"))}))}initWidgets(){if(this.elements.singlePieceGallery&&this.elements.singlePieceGalleryList&&this.elements.singlePieceThumbnailGallery&&this.elements.singlePieceThumbnailGalleryList&&(this.widgets.singlePieceGallery=new gr(this.elements.singlePieceGallery,{type:"fade",rewind:!0,pagination:!1}),this.widgets.singlePieceThumbnailGallery=new gr(this.elements.singlePieceThumbnailGallery,{fixedWidth:100,gap:0,rewind:!0,pagination:!1,arrows:!1}),this.widgets.singlePieceGallery.sync(this.widgets.singlePieceThumbnailGallery),this.widgets.singlePieceGallery.mount(),this.widgets.singlePieceThumbnailGallery.mount()),this.elements.singlePieceVideosContainer&&this.elements.singlePieceVideosContainer.querySelectorAll(".c-vimeo-player").forEach(u=>{this.widgets[`singlePieceVimeoPlayer${u.dataset.code}`]=new rn(u)}),this.elements.splashScreenVideo&&(this.widgets.splashScreenVideoPlayer=new rn(this.elements.splashScreenVideo,{volume:0,autoplay:!0,muted:!0,controls:!1})),this.elements.splashScreenCanvas){Je.setup(this.elements.splashScreenCanvas);const u=new Je.Path({segments:[[0,Je.view.viewSize.height/2],[Je.view.viewSize.width/4,Je.view.viewSize.height/2],[Je.view.viewSize.width/4*2,Je.view.viewSize.height/2],[Je.view.viewSize.width/4*3,Je.view.viewSize.height/2],[Je.view.viewSize.width,Je.view.viewSize.height/2]],strokeColor:"#ffffff",strokeWidth:10}),y=new Je.Path({segments:[[5,Je.view.viewSize.height],[5,Je.view.viewSize.height]],strokeColor:"#ffffff",strokeWidth:10}),d=new Je.Path({segments:[[Je.view.viewSize.width-5,0],[Je.view.viewSize.width-5,0]],strokeColor:"#ffffff",strokeWidth:10});this.widgets.splashScreenVideoPlayer.on("ready",S=>{S.detail.plyr,console.log(S.detail)}),Je.view.onMouseMove=function(S){const M=u.getNearestLocation(S.point);M.distance<=50&&M.segment.index!==0&&M.segment.index!==4&&(u.segments[M.segment.index].point.y-S.point.y<0&&S.delta.y<0?u.segments[M.segment.index].point.y+S.delta.y>10&&u.segments[M.segment.index].point.y+S.delta.y<Je.view.bounds.height-10&&(u.segments[M.segment.index].point.y=u.segments[M.segment.index].point.y+S.delta.y):u.segments[M.segment.index].point.y-S.point.y>=0&&S.delta.y>0&&u.segments[M.segment.index].point.y+S.delta.y>10&&u.segments[M.segment.index].point.y+S.delta.y<Je.view.bounds.height-10&&(u.segments[M.segment.index].point.y=u.segments[M.segment.index].point.y+S.delta.y),u.segments[M.segment.index].point.x-S.point.x<0&&S.delta.x<0?u.segments[M.segment.index].point.x+S.delta.x>10&&u.segments[M.segment.index].point.x+S.delta.x<Je.view.bounds.width-10&&(u.segments[M.segment.index].point.x=u.segments[M.segment.index].point.x+S.delta.x):u.segments[M.segment.index].point.x-S.point.x>=0&&S.delta.x>0&&u.segments[M.segment.index].point.x+S.delta.x>10&&u.segments[M.segment.index].point.x+S.delta.x<Je.view.bounds.width-10&&(u.segments[M.segment.index].point.x=u.segments[M.segment.index].point.x+S.delta.x))},Je.view.onResize=function(S){console.log(u.segments[4].point.x),u.segments[0].point.y=Je.view.viewSize.height/3,u.segments[1].point.y=u.segments[1].point.y+S.delta.height,u.segments[2].point.y=u.segments[2].point.y+S.delta.height,u.segments[3].point.y=u.segments[3].point.y+S.delta.height,u.segments[4].point.y=Je.view.viewSize.height/3,u.segments[0].point.x=0,u.segments[1].point.x=u.segments[1].point.x+S.delta.width,u.segments[2].point.x=u.segments[2].point.x+S.delta.width,u.segments[3].point.x=u.segments[3].point.x+S.delta.width,u.segments[4].point.x=Je.view.viewSize.width,d.segments[0].point.y=0,d.segments[1].point.y=Je.view.viewSize.height,y.segments[0].point.y=0,y.segments[1].point.y=Je.view.viewSize.height,d.segments[0].point.x=Je.view.viewSize.width-5,d.segments[1].point.x=Je.view.viewSize.width-5,y.segments[0].point.x=5,y.segments[1].point.x=5},Je.view.onClick=function(S){u.tween({"segments[0].point.y":Je.view.center.y,"segments[1].point.y":Je.view.center.y,"segments[2].point.y":Je.view.center.y,"segments[3].point.y":Je.view.center.y,"segments[4].point.y":Je.view.center.y},{easing:"easeOutCubic",duration:1e3}),y.tween({"segments[0].point.y":Je.view.viewSize.height},{easing:"easeInOutCubic",duration:1e3}),d.tween({"segments[1].point.y":0},{easing:"easeInOutCubic",duration:1e3})}}}}const l=new n;console.log(l)});console.log("main.js");
